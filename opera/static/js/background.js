/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={170:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,s=Object.keys,a=Array.isArray;function o(e,t){return"object"!=typeof t||s(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(u(e))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(t).forEach(function(n){f(e,n,t[n])})}var h=Object.defineProperty;function f(e,t,n,r){h(e,t,o(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,y=[].slice;function g(e,t,n){return y.call(e,t,n)}function v(e,t){return t(e)}function w(e){if(!e)throw new Error("Assertion Failed")}function b(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var s=_(e,t[r]);n.push(s)}return n}var a=t.indexOf(".");if(-1!==a){var o=e[t.substr(0,a)];return null==o?void 0:_(o,t.substr(a+1))}}function k(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){w("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)k(e,t[r],n[r])}else{var s,o,u=t.indexOf(".");-1!==u?(s=t.substr(0,u),""===(o=t.substr(u+1))?void 0===n?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:k(u=(u=e[s])&&l(e,s)?u:e[s]={},o,n)):void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function S(e){var t,n={};for(t in e)l(e,t)&&(n[t]=e[t]);return n}var x=[].concat;function D(e){return x.apply([],e)}var O="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return i[e]}),T=new Set(O.map(function(e){return i[e]})),M=null;function P(e){return M=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=M.get(t);if(n)return n;if(a(t)){n=[],M.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(T.has(t.constructor))n=t;else{var s,o=u(t);for(s in n=o===Object.prototype?{}:Object.create(o),M.set(t,n),t)l(t,s)&&(n[s]=e(t[s]))}return n}(e),M=null,e}var E={}.toString;function C(e){return E.call(e).slice(8,-1)}var A="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",Y="symbol"==typeof A?function(e){var t;return null!=e&&(t=e[A])&&t.apply(e)}:function(){return null};function R(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var j={};function N(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===j&&"string"==typeof e)return[e];if(i=Y(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var I="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},U=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function F(e,t){this.name=e,this.message=t}function K(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function L(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=K(e,t)}function $(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=K(e,this.failures)}p(F).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(L).from(F),p($).from(F);var B=U.reduce(function(e,t){return e[t]=t+"Error",e},{}),q=F,H=U.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=W[t]||n,this.inner=null)}return p(r).from(q),e[t]=r,e},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var V=ue.reduce(function(e,t){return e[t+"Error"]=H[t],e},{}),G=U.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=H[t]),e},{});function z(){}function Z(e){return e}function J(e,t){return null==e||e===Z?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function X(e,t){return e===z?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==s?s:n}}function ee(e,t){return e===z?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===z?t:function(n){var r=e.apply(this,arguments);o(n,r);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Q(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Q(s,this.onerror):s),void 0===r?void 0===n?void 0:n:o(r,n)}}function ne(e,t){return e===z?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===z?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return t.apply(r,s)})}return t.apply(this,arguments)}}G.ModifyError=L,G.DexieError=F,G.BulkError=$;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(e){ie=e}var ae={},oe=100,ue=(O="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]}(),O[0]),ce=(U=O[1],O=O[2],U=U&&U.then,ue&&ue.constructor),le=!!O,de=function(e,t){we.push([e,t]),fe&&(queueMicrotask(Pe),fe=!1)},he=!0,fe=!0,pe=[],me=[],ye=Z,ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:z,pgp:!1,env:{},finalize:z},ve=ge,we=[],be=0,_e=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ve;if("function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&De(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ee();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof ke?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,Oe(t)),r&&Ce()}},De.bind(null,t))}catch(n){De(t,n)}}(this,e)}var Se={get:function(){var e=ve,t=We;function n(n,r){var i=this,s=!e.global&&(e!==ve||t!==We),a=s&&!$e(),o=new ke(function(t,o){Te(i,new xe(ze(n,e,s,a),ze(r,e,s,a),t,o,e))});return this._consoleTask&&(o._consoleTask=this._consoleTask),o}return n.prototype=ae,n},set:function(e){f(this,"then",e&&e.prototype===ae?Se:{get:function(){return e},set:Se.set})}};function xe(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function De(e,t){var n,r;me.push(t),null===e._state&&(n=e._lib&&Ee(),t=ye(t),e._state=!1,e._value=t,r=e,pe.some(function(e){return e._value===r._value})||pe.push(r),Oe(e),n&&Ce())}function Oe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Te(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===be&&(++be,de(function(){0==--be&&Ae()},[]))}function Te(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++be,de(Me,[n,e,t])}else e._listeners.push(t)}function Me(e,t,n){try{var r,i=t._value;!t._state&&me.length&&(me=[]),r=ie&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==me.indexOf(i)||function(e){for(var t=pe.length;t;)if(pe[--t]._value===e._value)return pe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--be&&Ae(),--n.psd.ref||n.psd.finalize()}}function Pe(){Ge(ge,function(){Ee()&&Ce()})}function Ee(){var e=he;return fe=he=!1,e}function Ce(){var e,t,n;do{for(;0<we.length;)for(e=we,we=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<we.length);fe=he=!0}function Ae(){var e=pe;pe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=_e.slice(0),n=t.length;n;)t[--n]()}function Ye(e){return new ke(ae,!1,e)}function Re(e,t){var n=ve;return function(){var r=Ee(),i=ve;try{return He(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{He(i,!1),r&&Ce()}}}d(ke.prototype,{then:Se,_then:function(e,t){Te(this,new xe(null,null,e,t,ve))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Ye)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Ye)(e)})},finally:function(e){return this.then(function(t){return ke.resolve(e()).then(function(){return t})},function(t){return ke.resolve(e()).then(function(){return Ye(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ke(function(r,i){var s=setTimeout(function(){return i(new H.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),ge.env=Ve(),d(ke,{all:function(){var e=N.apply(null,arguments).map(Be);return new ke(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,s){return ke.resolve(i).then(function(n){e[s]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke(function(t,n){e.then(t,n)}):new ke(ae,!0,e)},reject:Ye,race:function(){var e=N.apply(null,arguments).map(Be);return new ke(function(t,n){e.map(function(e){return ke.resolve(e).then(t,n)})})},PSD:{get:function(){return ve},set:function(e){return ve=e}},totalEchoes:{get:function(){return We}},newPSD:Ke,usePSD:Ge,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ye},set:function(e){ye=e}},follow:function(e,t){return new ke(function(n,r){return Ke(function(t,n){var r=ve;r.unhandleds=[],r.onunhandled=n,r.finalize=Q(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},_e.push(function t(){e(),_e.splice(_e.indexOf(t),1)}),++be,de(function(){0==--be&&Ae()},[])},r.finalize),e()},t,n,r)})}}),ce&&(ce.allSettled&&f(ke,"allSettled",function(){var e=N.apply(null,arguments).map(Be);return new ke(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,i){return ke.resolve(e).then(function(e){return r[i]={status:"fulfilled",value:e}},function(e){return r[i]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),ce.any&&"undefined"!=typeof AggregateError&&f(ke,"any",function(){var e=N.apply(null,arguments).map(Be);return new ke(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(e,s){return ke.resolve(e).then(function(e){return t(e)},function(e){i[s]=e,--r||n(new AggregateError(i))})})})}),ce.withResolvers&&(ke.withResolvers=ce.withResolvers));var je={awaits:0,echoes:0,id:0},Ne=0,Ie=[],Ue=0,We=0,Fe=0;function Ke(e,t,n,r){var i=ve,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++Fe,ge.env,s.env=le?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&o(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ge(s,e,n,r),0===s.ref&&s.finalize(),r}function Le(){return je.id||(je.id=++Ne),++je.awaits,je.echoes+=oe,je.id}function $e(){return!!je.awaits&&(0==--je.awaits&&(je.id=0),je.echoes=je.awaits*oe,!0)}function Be(e){return je.echoes&&e&&e.constructor===ce?(Le(),e.then(function(e){return $e(),e},function(e){return $e(),Je(e)})):e}function qe(){var e=Ie[Ie.length-1];Ie.pop(),He(e,!1)}function He(e,t){var n,r=ve;(t?!je.echoes||Ue++&&e===ve:!Ue||--Ue&&e===ve)||queueMicrotask(t?function(e){++We,je.echoes&&0!=--je.echoes||(je.echoes=je.awaits=je.id=0),Ie.push(ve),He(e,!0)}.bind(null,e):qe),e!==ve&&(ve=e,r===ge&&(ge.env=Ve()),le&&(n=ge.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ve(){var e=i.Promise;return le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ge(e,t,n,r,i){var s=ve;try{return He(e,!0),t(n,r,i)}finally{He(s,!1)}}function ze(e,t,n,r){return"function"!=typeof e?e:function(){var i=ve;n&&Le(),He(t,!0);try{return e.apply(this,arguments)}finally{He(i,!1),r&&queueMicrotask($e)}}}function Ze(e){Promise===ce&&0===je.echoes?0===Ue?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+U).indexOf("[native code]")&&(Le=$e=z);var Je=ke.reject,Qe=String.fromCharCode(65535),Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function st(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ot(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function ut(){throw H.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var n=lt(e),r=lt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s){var a=ct(e[s],t[s]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function lt(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=C(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ht(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){return n=n.updatesTable,t?e.db.table(n).where("k").anyOf(t).delete():e.db.table(n).clear()})).then(function(){return n})):n}var ft=(pt.prototype._trans=function(e,t,n){var r=this._tx||ve.trans,i=this.name,s=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,n,r){if(!r.schema[i])throw new H.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var o=Ee();try{var u=r&&r.db._novip===this.db._novip?r===ve.trans?r._promise(e,a,n):Ke(function(){return r._promise(e,a,n)},{trans:r,transless:ve.transless||ve}):function t(n,r,i,s){if(n.idbdb&&(n._state.openComplete||ve.letThrough||n._vip)){var a=n._createTransaction(r,i,n._dbSchema);try{a.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===B.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),n.close({disableAutoOpen:!1}),n.open().then(function(){return t(n,r,i,s)})):Je(e)}return a._promise(r,function(e,t){return Ke(function(){return ve.trans=a,s(e,t,a)})}).then(function(e){if("readwrite"===r)try{a.idbtrans.commit()}catch(e){}return"readonly"===r?e:a._completion.then(function(){return e})})}if(n._state.openComplete)return Je(new H.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Je(new H.DatabaseClosed);n.open().catch(z)}return n._state.dbReadyPromise.then(function(){return t(n,r,i,s)})}(this.db,e,[this.name],a);return s&&(u._consoleTask=s,u=u.catch(function(e){return console.trace(e),Je(e)})),u}finally{o&&Ce()}},pt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Je(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},pt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName;function o(e,t){return 0===ct(e,t)}var u=t.reduce(function(t,n){var r=t[0],s=t[1],u=(t=i[n],e[n]);return[r||t,r||!t?st(s,t&&t.multi?function(e){return e=_(e,n),a(e)&&e.some(function(e){return o(u,e)})}:function(e){return o(u,_(e,n))}):s]},[null,null]);return r=u[0],u=u[1],r?this.where(r.name).equals(e[r.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")},pt.prototype.filter=function(e){return this.toCollection().and(e)},pt.prototype.count=function(e){return this.toCollection().count(e)},pt.prototype.offset=function(e){return this.toCollection().offset(e)},pt.prototype.limit=function(e){return this.toCollection().limit(e)},pt.prototype.each=function(e){return this.toCollection().each(e)},pt.prototype.toArray=function(e){return this.toCollection().toArray(e)},pt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},pt.prototype.reverse=function(){return this.toCollection().reverse()},pt.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function s(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ut&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(s,n=t),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return i},t=s);for(var a=new Set,o=t.prototype;o;o=u(o))Object.getOwnPropertyNames(o).forEach(function(e){return a.add(e)});function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!a.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},pt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},pt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,a=e;return s&&i&&(a=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{k(e,s,t)}catch(t){}return t})},pt.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=_(e,this.schema.primKey.keyPath))?Je(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},pt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,a=e;return s&&i&&(a=ot(s)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{k(e,s,t)}catch(t){}return t})},pt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return ht(t,[e],n)}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})})},pt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:at}).then(function(t){return ht(e,null,t)})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},pt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},pt.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new $("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)})})},pt.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(o=r.schema.primKey).auto;if((o=o.keyPath)&&i)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,o=o&&n?e.map(ot(o)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:o,wantResults:s}).then(function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new $("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)})})},pt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),i=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then(function(o){var u=[],c=[];e.forEach(function(e,n){var r=e.key,i=e.changes,a=o[n];if(a){for(var l=0,d=Object.keys(i);l<d.length;l++){var h=d[l],f=i[h];if(h===t.schema.primKey.keyPath){if(0!==ct(f,r))throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else k(a,h,f)}s.push(n),u.push(r),c.push(a)}});var l=u.length;return n.mutate({trans:a,type:"put",keys:u,values:c,updates:{keys:r,changeSpecs:i}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return l;for(var i=0,a=Object.keys(r);i<a.length;i++){var o,u=a[i],c=s[Number(u)];null!=c&&(o=r[u],delete r[u],r[c]=o)}throw new $("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(l," operations failed"),r)})})})},pt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return ht(t,e,n)})}).then(function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new $("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},pt);function pt(){}function mt(e){function t(t,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return n[t].subscribe.apply(null,s),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return t;function o(e,r,i){if("object"!=typeof e){var u;r=r||ne;var c={subscribers:[],fire:i=i||z,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(r,i)}};return n[e]=t[e]=c}s(u=e).forEach(function(e){var t=u[e];if(a(t))o(e,u[e][0],u[e][1]);else{if("asap"!==t)throw new H.InvalidArgument("Invalid event config");var n=o(e,Z,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function yt(e,t){return p(t).from({prototype:e}),t}function gt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function vt(e,t){e.filter=st(e.filter,t)}function wt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return st(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new H.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function _t(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function kt(e,t,n,r){var i=e.replayFilter?st(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},a=function(e,n,r){var a,o;i&&!i(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"===(o=""+(a=n.primaryKey))&&(o=""+new Uint8Array(a)),l(s,o)||(s[o]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(a,n),St(_t(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return St(_t(e,r,n),st(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function St(e,t,n,r){var i=Re(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=z},function(t){e.fail(t),n=z})||i(e.value,e,function(e){return n=e}),n()})})}var xt=(Dt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(a(n))return r(r([],a(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(e){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var i=t.remove;if(a(i))return a(e)?e.filter(function(e){return!i.includes(e)}).sort():[];if("number"==typeof i)return Number(e)-i;if("bigint"==typeof i)try{return BigInt(e)-i}catch(e){return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Dt);function Dt(e){this["@@propmod"]=e}var Ot=(Tt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Je.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Tt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Je.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Tt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=st(t.algorithm,e)},Tt.prototype._iterate=function(e,t){return kt(this._ctx,e,t,this._ctx.table.core)},Tt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&o(n,e),t._ctx=n,t},Tt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Tt.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return kt(t,e,n,t.table.core)})},Tt.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(gt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var i=0;return kt(n,function(){return++i,!1},e,r).then(function(){return i})}).then(e)},Tt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function o(e,t){return ct(s(e,i),s(t,i))*a}return this.toArray(function(e){return e.sort(o)}).then(t)},Tt.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&gt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var s=[];return kt(n,function(e){return s.push(e)},e,n.table.core).then(function(){return s})},e)},Tt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,gt(t)?wt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):wt(t,function(){var t=e;return function(){return--t<0}})),this},Tt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},Tt.prototype.until=function(e,t){return vt(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},Tt.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Tt.prototype.last=function(e){return this.reverse().first(e)},Tt.prototype.filter=function(e){var t;return vt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=st(t.isMatch,e),this},Tt.prototype.and=function(e){return this.filter(e)},Tt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Tt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Tt.prototype.desc=function(){return this.reverse()},Tt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},Tt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Tt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},Tt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},Tt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&gt(t,!0)&&0<t.limit)return this._read(function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},Tt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Tt.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Tt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Tt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return vt(this._ctx,function(e){var n=e.primaryKey.toString();return e=l(t,n),t[n]=!0,!e}),this},Tt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,o;o="function"==typeof e?e:(i=s(e),a=i.length,function(t){for(var n=!1,r=0;r<a;++r){var s=i[r],o=e[s],u=_(t,s);o instanceof xt?(k(t,s,o.execute(u)),n=!0):u!==o&&(k(t,s,o),n=!0)}return n});var u,c=n.table.core,l=(u=c.schema.primaryKey).outbound,d=u.extractKey,h=200;function f(e,t){var n=t.failures;t=t.numFailures,m+=e-t;for(var r=0,i=s(n);r<i.length;r++){var a=i[r];p.push(n[a])}}(u=t.db._options.modifyChunkSize)&&(h="object"==typeof u?u[c.name]||u["*"]||200:u);var p=[],m=0,y=[],g=e===Mt;return t.clone().primaryKeys().then(function(t){function i(a){var u=Math.min(h,t.length-a),p=t.slice(a,a+u);return(g?Promise.resolve([]):c.getMany({trans:r,keys:p,cache:"immutable"})).then(function(m){var y=[],v=[],w=l?[]:null,b=g?p:[];if(!g)for(var _=0;_<u;++_){var k=m[_],S={value:P(k),primKey:t[a+_]};!1!==o.call(S,S.value,S)&&(null==S.value?b.push(t[a+_]):l||0===ct(d(k),d(S.value))?(v.push(S.value),l&&w.push(t[a+_])):(b.push(t[a+_]),y.push(S.value)))}return Promise.resolve(0<y.length&&c.mutate({trans:r,type:"add",values:y}).then(function(e){for(var t in e.failures)b.splice(parseInt(t),1);f(y.length,e)})).then(function(){return(0<v.length||s&&"object"==typeof e)&&c.mutate({trans:r,type:"put",keys:w,values:v,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<a}).then(function(e){return f(v.length,e)})}).then(function(){return(0<b.length||s&&g)&&c.mutate({trans:r,type:"delete",keys:b,criteria:s,isAdditionalChunk:0<a}).then(function(e){return ht(n.table,b,e)}).then(function(e){return f(b.length,e)})}).then(function(){return t.length>a+u&&i(a+h)})})}var s=gt(n)&&n.limit===1/0&&("function"!=typeof e||g)&&{index:n.index,range:n.range};return i(0).then(function(){if(0<p.length)throw new L("Error modifying one or more objects",p,m,y);return t.length})})})},Tt.prototype.delete=function(){var e=this._ctx,t=e.range;return!gt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Mt):this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(e){var n=e.failures;if(e=e.numFailures)throw new L("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})})},Tt);function Tt(){}var Mt=function(e,t){return t.value=null};function Pt(e,t){return e<t?-1:e===t?0:1}function Et(e,t){return t<e?-1:e===t?0:1}function Ct(e,t,n){return(e=e instanceof Nt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function At(e){return new e.Collection(e,function(){return jt("")}).limit(0)}function Yt(e,t,n,r){var i,s,a,o,u,c,l,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return Ct(e,et);function h(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?Pt:Et;var t=n.map(function(e){return{lower:s(e),upper:i(e)}}).sort(function(e,t){return a(e.lower,t.lower)});o=t.map(function(e){return e.upper}),u=t.map(function(e){return e.lower}),l="next"===(c=e)?"":r}h("next"),(e=new e.Collection(e,function(){return Rt(o[0],u[d-1]+r)}))._ondirectionchange=function(e){h(e)};var f=0;return e._addAlgorithm(function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=s(i);if(t(h,u,f))return!0;for(var p=null,m=f;m<d;++m){var y=function(e,t,n,r,i,s){for(var a=Math.min(e.length,r.length),o=-1,u=0;u<a;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):0<=o?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[u],c)<0&&(o=u)}return a<r.length&&"next"===s?e+n.substr(e.length):a<e.length&&"prev"===s?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}(i,h,o[m],u[m],a,c);null===y&&null===p?f=m+1:(null===p||0<a(p,y))&&(p=y)}return n(null!==p?function(){e.continue(p+l)}:r),!1}),e}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function jt(e){return{type:1,lower:e,upper:e}}var Nt=(Object.defineProperty(It.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),It.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?At(this):new this.Collection(this,function(){return Rt(e,t,!n,!r)})}catch(e){return Ct(this,Xe)}},It.prototype.equals=function(e){return null==e?Ct(this,Xe):new this.Collection(this,function(){return jt(e)})},It.prototype.above=function(e){return null==e?Ct(this,Xe):new this.Collection(this,function(){return Rt(e,void 0,!0)})},It.prototype.aboveOrEqual=function(e){return null==e?Ct(this,Xe):new this.Collection(this,function(){return Rt(e,void 0,!1)})},It.prototype.below=function(e){return null==e?Ct(this,Xe):new this.Collection(this,function(){return Rt(void 0,e,!1,!0)})},It.prototype.belowOrEqual=function(e){return null==e?Ct(this,Xe):new this.Collection(this,function(){return Rt(void 0,e)})},It.prototype.startsWith=function(e){return"string"!=typeof e?Ct(this,et):this.between(e,e+Qe,!0,!0)},It.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Yt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Qe)},It.prototype.equalsIgnoreCase=function(e){return Yt(this,function(e,t){return e===t[0]},[e],"")},It.prototype.anyOfIgnoreCase=function(){var e=N.apply(j,arguments);return 0===e.length?At(this):Yt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},It.prototype.startsWithAnyOfIgnoreCase=function(){var e=N.apply(j,arguments);return 0===e.length?At(this):Yt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Qe)},It.prototype.anyOf=function(){var e=this,t=N.apply(j,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Ct(this,Xe)}if(0===t.length)return At(this);var r=new this.Collection(this,function(){return Rt(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(e,r,s){for(var a=e.key;0<n(a,t[i]);)if(++i===t.length)return r(s),!1;return 0===n(a,t[i])||(r(function(){e.continue(t[i])}),!1)}),r},It.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},It.prototype.noneOf=function(){var e=N.apply(j,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ct(this,Xe)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},It.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(0===e.length)return At(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0}))return Ct(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var u,c=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers,d=i;function h(e,t){return d(e[0],t[0])}try{(u=e.reduce(function(e,t){for(var n=0,i=e.length;n<i;++n){var s=e[n];if(r(t[0],s[1])<0&&0<r(t[1],s[0])){s[0]=a(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return n===i&&e.push(t),e},[])).sort(h)}catch(e){return Ct(this,Xe)}var f=0,p=l?function(e){return 0<i(e,u[f][1])}:function(e){return 0<=i(e,u[f][1])},m=c?function(e){return 0<s(e,u[f][0])}:function(e){return 0<=s(e,u[f][0])},y=p;return(e=new this.Collection(this,function(){return Rt(u[0][0],u[u.length-1][1],!c,!l)}))._ondirectionchange=function(e){d="next"===e?(y=p,i):(y=m,s),u.sort(h)},e._addAlgorithm(function(e,t,r){for(var s,a=e.key;y(a);)if(++f===u.length)return t(r),!1;return!p(s=a)&&!m(s)||(0===n._cmp(a,u[f][1])||0===n._cmp(a,u[f][0])||t(function(){d===i?e.continue(u[f][0]):e.continue(u[f][1])}),!1)}),e},It.prototype.startsWithAnyOf=function(){var e=N.apply(j,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?At(this):this.inAnyRange(e.map(function(e){return[e,e+Qe]})):Ct(this,"startsWithAnyOf() only works with strings")},It);function It(){}function Ut(e){return Re(function(t){return Wt(t),e(t.target.error),!1})}function Wt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ft="storagemutated",Kt="x-storagemutated-1",Lt=mt(null,Ft),$t=(Bt.prototype._lock=function(){return w(!ve.global),++this._reculock,1!==this._reculock||ve.global||(ve.lockOwnerFor=this),this},Bt.prototype._unlock=function(){if(w(!ve.global),0==--this._reculock)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ge(e[1],e[0])}catch(e){}}return this},Bt.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Bt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(w(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new H.DatabaseClosed(r);case"MissingAPIError":throw new H.MissingAPI(r.message,r);default:throw new H.OpenFailed(r)}if(!this.active)throw new H.TransactionInactive;return w(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(n){Wt(n),t._reject(e.error)}),e.onabort=Re(function(n){Wt(n),t.active&&t._reject(new H.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Re(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Lt.storagemutated.fire(e.mutatedParts)}),this},Bt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Je(new H.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new H.TransactionInactive);if(this._locked())return new ke(function(i,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,s)},ve])});if(n)return Ke(function(){var e=new ke(function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var i=new ke(function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)});return i._lib=!0,i},Bt.prototype._root=function(){return this.parent?this.parent._root():this},Bt.prototype.waitFor=function(e){var t,n=this._root(),r=ke.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new ke(function(e,t){r.then(function(t){return n._waitingQueue.push(Re(e.bind(null,t)))},function(e){return n._waitingQueue.push(Re(t.bind(null,e)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},Bt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var n=this.schema[e];if(!n)throw new H.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Bt);function Bt(){}function qt(e,t,n,r,i,s,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Ht(t),type:o}}function Ht(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Vt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e},{}))};var r}var Gt=function(e){try{return e.only([[]]),Gt=function(){return[[]]},[[]]}catch(e){return Gt=function(){return Qe},Qe}};function zt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return _(e,t)}:function(t){return _(t,e)};var t}function Zt(e){return[].slice.call(e)}var Jt=0;function Qt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Xt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,s=e.keys,a=e.values,o=e.range;return new Promise(function(e,u){e=Re(e);var c=t.objectStore(n),l=null==c.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,f=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++g,Wt(e)}var m=[],y=[],g=0;if("deleteRange"===i){if(4===o.type)return e({numFailures:g,failures:y,results:[],lastResult:void 0});3===o.type?m.push(h=c.clear()):m.push(h=c.delete(r(o)))}else{var v=(l=d?l?[a,s]:[a,null]:[s,null])[0],w=l[1];if(d)for(var b=0;b<f;++b)m.push(h=w&&void 0!==w[b]?c[i](v[b],w[b]):c[i](v[b])),h.onerror=p;else for(b=0;b<f;++b)m.push(h=c[i](v[b])),h.onerror=p}function _(t){t=t.target.result,m.forEach(function(e,t){return null!=e.error&&(y[t]=e.error)}),e({numFailures:g,failures:y,results:"delete"===i?s:m.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){p(e),_(e)},h.onsuccess=_})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,i){e=Re(e);for(var s,a=t.objectStore(n),o=r.length,u=new Array(o),c=0,l=0,d=function(t){t=t.target,u[t._pos]=t.result,++l===c&&e(u)},h=Ut(i),f=0;f<o;++f)null!=r[f]&&((s=a.get(r[f]))._pos=f,s.onsuccess=d,s.onerror=h,++c);0===c&&e(u)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,i){e=Re(e);var s=t.objectStore(n).get(r);s.onsuccess=function(t){return e(t.target.result)},s.onerror=Ut(i)})},query:(t=l,function(e){return new Promise(function(i,s){i=Re(i);var a,o,u,c=e.trans,l=e.values,d=e.limit,h=e.query,f=d===1/0?void 0:d,p=h.index;if(h=h.range,c=c.objectStore(n),p=p.isPrimaryKey?c:c.index(p.name),h=r(h),0===d)return i({result:[]});t?((f=l?p.getAll(h,f):p.getAllKeys(h,f)).onsuccess=function(e){return i({result:e.target.result})},f.onerror=Ut(s)):(a=0,o=!l&&"openKeyCursor"in p?p.openKeyCursor(h):p.openCursor(h),u=[],o.onsuccess=function(e){var t=o.result;return t?(u.push(l?t.value:t.primaryKey),++a===d?i({result:u}):void t.continue()):i({result:u})},o.onerror=Ut(s))})}),openCursor:function(e){var t=e.trans,i=e.values,s=e.query,a=e.reverse,o=e.unique;return new Promise(function(e,u){e=Re(e);var c=s.index,l=s.range,d=t.objectStore(n),h=(d=c.isPrimaryKey?d:d.index(c.name),c=a?o?"prevunique":"prev":o?"nextunique":"next",!i&&"openKeyCursor"in d?d.openKeyCursor(r(l),c):d.openCursor(r(l),c));h.onerror=Ut(u),h.onsuccess=Re(function(n){var r,i,s,a,o=h.result;o?(o.___id=++Jt,o.done=!1,r=o.continue.bind(o),i=(i=o.continuePrimaryKey)&&i.bind(o),s=o.advance.bind(o),a=function(){throw new Error("Cursor not stopped")},o.trans=t,o.stop=o.continue=o.continuePrimaryKey=o.advance=function(){throw new Error("Cursor not started")},o.fail=Re(u),o.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},o.start=function(e){function t(){if(h.result)try{e()}catch(e){o.fail(e)}else o.done=!0,o.start=function(){throw new Error("Cursor behind last entry")},o.stop()}var n=new Promise(function(e,t){e=Re(e),h.onerror=Ut(t),o.fail=t,o.stop=function(t){o.stop=o.continue=o.continuePrimaryKey=o.advance=a,e(t)}});return h.onsuccess=Re(function(e){h.onsuccess=t,t()}),o.continue=r,o.continuePrimaryKey=i,o.advance=s,t(),n},e(o)):e(null)},u)})},count:function(e){var t=e.query,i=e.trans,s=t.index,a=t.range;return new Promise(function(e,t){var o=i.objectStore(n),u=s.isPrimaryKey?o:o.index(s.name);(u=(o=r(a))?u.count(o):u.count()).onsuccess=Re(function(t){return e(t.target.result)}),u.onerror=Ut(t)})}}}var s,o,u,c=(o=n,u=Zt((s=e).objectStoreNames),{schema:{name:s.name,tables:u.map(function(e){return o.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:zt(t)},indexes:Zt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:a(e),keyPath:e,unique:n,multiEntry:r,extractKey:zt(e)},i[Qt(e)]=r}),getIndexByKeyPath:function(e){return i[Qt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Qt(t)]=n.primaryKey),n})},hasGetAll:0<u.length&&"getAll"in o.objectStore(u[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),l=(n=c.schema,c.hasGetAll),d=(c=n.tables.map(i),{});return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Gt(t),schema:n}}function en(e,n,r,i){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Xt(n,s,i),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},i))}}function tn(e,t){var n=t.db;t=en(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function nn(e,t,n,r){n.forEach(function(n){var i=r[n];t.forEach(function(t){var r=function e(t,n){return m(t,n)||(t=u(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){h(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))})})}function rn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function sn(e,t){return e._cfg.version-t._cfg.version}function an(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Vt("$meta",pn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=ve.transless||ve;Ke(function(){return ve.trans=a,ve.transless=u,0!==t?(tn(e,n),c=t,((r=a).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:c}):ke.resolve(c)).then(function(t){return i=t,o=a,u=n,c=[],t=(r=e)._versions,l=r._dbSchema=hn(0,r.idbdb,u),0!==(t=t.filter(function(e){return e._cfg.version>=i})).length?(t.forEach(function(e){c.push(function(){var t=l,n=e._cfg.dbschema;fn(r,t,u),fn(r,n,u),l=r._dbSchema=n;var a=un(t,n);a.add.forEach(function(e){cn(u,e[0],e[1].primKey,e[1].indexes)}),a.change.forEach(function(e){if(e.recreate)throw new H.Upgrade("Not yet support for changing primary key");var t=u.objectStore(e.name);e.add.forEach(function(e){return dn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),dn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){tn(r,u),o._memoizedTables={};var d=S(n);a.del.forEach(function(e){d[e]=t[e]}),rn(r,[r.Transaction.prototype]),nn(r,[r.Transaction.prototype],s(d),d),o.schema=d;var h,f=I(c);return f&&Le(),a=ke.follow(function(){var e;(h=c(o))&&f&&(e=$e.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?ke.resolve(h):a.then(function(){return h})}}),c.push(function(t){var n,i,s=e._cfg.dbschema;n=s,i=t,[].slice.call(i.db.objectStoreNames).forEach(function(e){return null==n[e]&&i.db.deleteObjectStore(e)}),rn(r,[r.Transaction.prototype]),nn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),o.schema=r._dbSchema}),c.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?ke.resolve(c.shift()(o.idbtrans)).then(e):ke.resolve()}().then(function(){ln(l,u)})):ke.resolve();var r,i,o,u,c,l}).catch(o)):(s(i).forEach(function(e){cn(n,e,i[e].primKey,i[e].indexes)}),tn(e,n),void ke.follow(function(){return e.on.populate.fire(a)}).catch(o));var r,c})}function on(e,t){ln(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);fn(e,e._dbSchema,t);for(var r=0,i=un(n,e._dbSchema).change;r<i.length;r++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),dn(n,t)})}(i[r]);if("object"==typeof s)return s.value}}function un(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var a={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)a.recreate=!0,r.change.push(a);else{var o=i.idxByName,u=s.idxByName,c=void 0;for(c in o)u[c]||a.del.push(c);for(c in u){var l=o[c],d=u[c];l?l.src!==d.src&&a.change.push(d):a.add.push(d)}(0<a.del.length||0<a.add.length||0<a.change.length)&&r.change.push(a)}}else r.add.push([n,s])}return r}function cn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return dn(i,e)}),i}function ln(e,t){s(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),cn(t,n,e[n].primKey,e[n].indexes))})}function dn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return g(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),i=qt(Ht(o=t.keyPath),o||"",!0,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),s=[],a=0;a<t.indexNames.length;++a){var o=(u=t.index(t.indexNames[a])).keyPath,u=qt(u.name,o,!!u.unique,!!u.multiEntry,!1,o&&"string"!=typeof o,!1);s.push(u)}r[e]=Vt(e,i,s)}),r}function fn(e,t,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var a=r[s],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var c=o.indexNames[u],l=o.index(c).keyPath,d="string"==typeof l?l:"["+g(l).join("+")+"]";!t[a]||(l=t[a].idxByName[d])&&(l.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pn(e){return e.split(",").map(function(e,t){var n=null===(r=(i=e.split(":"))[1])||void 0===r?void 0:r.trim(),r=(e=i[0].trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return qt(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(i),0===t,n)})}var mn=(yn.prototype._createTableSchema=Vt,yn.prototype._parseIndexSyntax=pn,yn.prototype._parseStoresSpec=function(e,t){var n=this;s(e).forEach(function(r){if(null!==e[r]){var i=n._parseIndexSyntax(e[r]),s=i.shift();if(!s)throw new H.Schema("Invalid schema for table "+r+": "+e[r]);if(s.unique=!0,s.multi)throw new H.Schema("Primary key cannot be multiEntry*");i.forEach(function(e){if(e.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),i=n._createTableSchema(r,s,i),t[r]=i}})},yn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){o(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,rn(t,[t._allTables,t,t.Transaction.prototype]),nn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(r),r),t._storeNames=s(r),this},yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||z,e),this},yn);function yn(){}function gn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new nr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function vn(e){return e&&"function"==typeof e.databases}function wn(e){return Ke(function(){return ve.letThrough=!0,e()})}function bn(e){return!("from"in e)}var _n=function(e,t){if(!this){var n=new _n;return e&&"d"in e&&o(n,e),n}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function kn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return o(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ct(n,e.from)<0)return i?kn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},On(e);if(0<ct(t,e.to))return r?kn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},On(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Sn(e,i),r&&n&&Sn(e,r)}}function Sn(e,t){bn(t)||function e(t,n){var r=n.from,i=n.to,s=n.l;n=n.r,kn(t,r,i),s&&e(t,s),n&&e(t,n)}(e,t)}function xn(e,t){var n=Dn(t),r=n.next();if(r.done)return!1;for(var i=r.value,s=Dn(e),a=s.next(i.from),o=a.value;!r.done&&!a.done;){if(ct(o.from,i.to)<=0&&0<=ct(o.to,i.from))return!0;ct(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function Dn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function On(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),s=1<i?"r":i<-1?"l":"";s&&(n="r"==s?"l":"r",r=t({},e),i=e[s],e.from=i.from,e.to=i.to,e[s]=i[s],r[s]=i[n],(e[n]=r).d=Tn(r)),e.d=Tn(e)}function Tn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Mn(e,t){return s(t).forEach(function(n){e[n]?Sn(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)l(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||T.has(r.constructor)?r:e(r));return i}(t[n])}),e}function Pn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&xn(t[n],e[n])})}d(_n.prototype,((U={add:function(e){return Sn(this,e),this},addKey:function(e){return kn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return kn(t,e,e)}),this},hasKey:function(e){var t=Dn(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[A]=function(){return Dn(this)},U));var En={},Cn={},An=!1;function Yn(e){Mn(Cn,e),An||(An=!0,setTimeout(function(){An=!1,Rn(Cn,!(Cn={}))},0))}function Rn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(En);r<i.length;r++)jn(a=i[r],e,n,t);else for(var s in e){var a,o=/^idb\:\/\/(.*)\/(.*)\//.exec(s);o&&(s=o[1],o=o[2],(a=En["idb://".concat(s,"/").concat(o)])&&jn(a,e,n,t))}n.forEach(function(e){return e()})}function jn(e,t,n,r){for(var i=[],s=0,a=Object.entries(e.queries.query);s<a.length;s++){for(var o=a[s],u=o[0],c=[],l=0,d=o[1];l<d.length;l++){var h=d[l];Pn(t,h.obsSet)?h.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(h)}r&&i.push([u,c])}if(r)for(var f=0,p=i;f<p.length;f++){var m=p[f];u=m[0],c=m[1],e.queries.query[u]=c}}function Nn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Je(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function o(){if(t.openCanceller!==r)throw new H.DatabaseClosed("db.open() was cancelled")}function u(){return new ke(function(r,c){if(o(),!n)throw new H.MissingAPI;var l=e.name,f=t.autoSchema||!i?n.open(l):n.open(l,i);if(!f)throw new H.MissingAPI;f.onerror=Ut(c),f.onblocked=Re(e._fireOnBlocked),f.onupgradeneeded=Re(function(r){var i;d=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=Wt,d.abort(),f.result.close(),(i=n.deleteDatabase(l)).onsuccess=i.onerror=Re(function(){c(new H.NoSuchDatabase("Database ".concat(l," doesnt exist")))})):(d.onerror=Ut(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,h=r<1,e.idbdb=f.result,a&&on(e,d),an(e,r/10,d,c))},c),f.onsuccess=Re(function(){d=null;var n,o,c,p,m,y=e.idbdb=f.result,v=g(y.objectStoreNames);if(0<v.length)try{var w=y.transaction(1===(p=v).length?p[0]:p,"readonly");if(t.autoSchema)o=y,c=w,(n=e).verno=o.version/10,c=n._dbSchema=hn(0,o,c),n._storeNames=g(o.objectStoreNames,0),nn(n,[n._allTables],s(c),c);else if(fn(e,e._dbSchema,w),((m=un(hn(0,(m=e).idbdb,w),m._dbSchema)).add.length||m.change.some(function(e){return e.add.length||e.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),y.close(),i=y.version+1,a=!0,r(u());tn(e,w)}catch(n){}tt.push(e),y.onversionchange=Re(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),y.onclose=Re(function(t){e.on("close").fire(t)}),h&&(m=e._deps,w=l,y=m.indexedDB,m=m.IDBKeyRange,vn(y)||w===nt||gn(y,m).put({name:w}).catch(z)),r()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u();break;case"VersionError":if(0<i)return i=0,u()}return ke.reject(e)})}var c,l=t.dbReadyResolve,d=null,h=!1;return ke.race([r,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(u)]).then(function(){return o(),t.onReadyBeingFired=[],ke.resolve(wn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,z);return t.onReadyBeingFired=[],ke.resolve(wn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{d&&d.abort()}catch(n){}return r===t.openCanceller&&e._close(),Je(n)}).finally(function(){t.openComplete=!0,l()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new _n(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new _n(-1/0,[[[]]])}),Lt(Ft).fire(t),Rn(t,!0)),e})}function In(e){function t(t){return e.next(t)}var n=i(t),r=i(function(t){return e.throw(t)});function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):a(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Un(e,t,n){for(var r=a(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Wn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,s={},a=[];function o(e,n,r){var i=Qt(e),u=s[i]=s[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=0<n;return l=t(t({},r),{name:l?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:l,keyTail:n,keyLength:c,extractKey:zt(e),unique:!l&&r.unique}),u.push(l),l.isPrimaryKey||a.push(l),1<c&&o(2===c?e[0]:e.slice(0,c-1),n+1,r),u.sort(function(e,t){return e.keyTail-t.keyTail}),l}n=o(i.primaryKey.keyPath,0,i.primaryKey),s[":id"]=[n];for(var u=0,c=i.indexes;u<c.length;u++){var l=c[u];o(l.keyPath,0,l)}function d(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Un(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Un(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:a,getIndexByKeyPath:function(e){return(e=s[Qt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,s=n.isVirtual,a=n.keyLength;return s?r.openCursor(d(t)).then(function(e){return e&&o(e)}):r.openCursor(t);function o(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Un(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Un(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}}})}})}};function Fn(e,t,n,r){return n=n||{},r=r||"",s(e).forEach(function(i){var s,a,o;l(t,i)?(s=e[i],a=t[i],"object"==typeof s&&"object"==typeof a&&s&&a?(o=C(s))!==C(a)?n[r+i]=t[i]:"Object"===o?Fn(s,a,n,r+i+"."):s!==a&&(n[r+i]=t[i]):s!==a&&(n[r+i]=t[i])):n[r+i]=void 0}),s(t).forEach(function(i){l(e,i)||(n[r+i]=t[i])}),n}function Kn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Ln={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=ve.trans,o=a.table(n).hook,u=o.deleting,c=o.creating,d=o.updating;switch(e.type){case"add":if(c.fire===z)break;return a._promise("readwrite",function(){return h(e)},!0);case"put":if(c.fire===z&&d.fire===z)break;return a._promise("readwrite",function(){return h(e)},!0);case"delete":if(u.fire===z)break;return a._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(u.fire===z)break;return a._promise("readwrite",function(){return function e(n,r,a){return i.query({trans:n,values:!1,query:{index:s,range:r},limit:a}).then(function(i){var s=i.result;return h({type:"delete",keys:s,trans:n}).then(function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):s.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:s[s.length-1],lowerOpen:!0}),a)})})}(e.trans,e.range,1e4)},!0)}return i.mutate(e);function h(e){var n,a,o,h=ve.trans,f=e.keys||Kn(s,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,o=f,("add"===(a=e).type?Promise.resolve([]):n.getMany({trans:a.trans,keys:o,cache:"immutable"})).then(function(t){var n=f.map(function(n,r){var i,a,o,f=t[r],p={onerror:null,onsuccess:null};return"delete"===e.type?u.fire.call(p,n,f,h):"add"===e.type||void 0===f?(i=c.fire.call(p,n,e.values[r],h),null==n&&null!=i&&(e.keys[r]=n=i,s.outbound||k(e.values[r],s.keyPath,n))):(i=Fn(f,e.values[r]),(a=d.fire.call(p,i,n,f,h))&&(o=e.values[r],Object.keys(a).forEach(function(e){l(o,e)?o[e]=a[e]:k(o,e,a[e])}))),p});return i.mutate(e).then(function(r){for(var i=r.failures,s=r.results,a=r.numFailures,o=(r=r.lastResult,0);o<f.length;++o){var u=(s||f)[o],c=n[o];null==u?c.onerror&&c.onerror(i[o]):c.onsuccess&&c.onsuccess("put"===e.type&&t[o]?e.values[o]:u)}return{failures:i,results:s,numFailures:a,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function $n(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)0===ct(t.keys[i],e[s])&&(r.push(n?P(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch(e){return null}}var Bn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=$n(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function qn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Hn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new _n(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ve.subscr&&"readonly"!==n)throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return e.transaction(t,n,r)},table:function(i){var o=e.table(i),u=o.schema,c=u.primaryKey,l=u.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&l.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),p=t(t({},o),{mutate:function(t){function s(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),m[e]||(m[e]=new _n)}var l,d,h,p=t.trans,m=t.mutatedParts||(t.mutatedParts={}),y=s(""),g=s(":dels"),v=t.type,w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Kn(c,t).filter(function(e){return e}),t.values]:[],b=w[0],_=w[1];return w=t.trans._cache,a(b)?(y.addKeys(b),(w="delete"===v||b.length===_.length?$n(b,w):null)||g.addKeys(b),(w||_)&&(l=s,d=w,h=_,u.indexes.forEach(function(e){var t=l(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&a(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||h).forEach(function(e,t){var i=d&&n(d[t]);0!==ct(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))})}))):b?(_={from:null!==(_=b.lower)&&void 0!==_?_:e.MIN_KEY,to:null!==(_=b.upper)&&void 0!==_?_:e.MAX_KEY},g.add(_),y.add(_)):(y.add(r),g.add(r),u.indexes.forEach(function(e){return s(e.name).add(r)})),o.mutate(t).then(function(e){return!b||"add"!==t.type&&"put"!==t.type||(y.addKeys(e.results),f&&f.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),i=n.keyPath.findIndex(function(e){return e===c.keyPath}),a=0,o=e.results.length;a<o;++a)r[a][i]=e.results[a];s(n.name).addKeys(r)})),p.mutatedParts=Mn(p.mutatedParts||{},m),e})}}),m=(l=function(t){t=(n=t.query).index;var n=n.range;return[t,new _n(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[c,new _n(e.key)]},getMany:function(e){return[c,(new _n).addKeys(e.keys)]},count:l,query:l,openCursor:l});return s(m).forEach(function(e){p[e]=function(s){var a=!!(p=ve.subscr),u=qn(ve,o)&&Hn(e,s)?s.obsSet={}:p;if(a){var c=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),u[e]||(u[e]=new _n)},l=c(""),f=c(":dels"),p=(a=(p=m[e](s))[0],p[1]);if(("query"===e&&a.isPrimaryKey&&!s.values?f:c(a.name||"")).add(p),!a.isPrimaryKey){if("count"!==e){var y="query"===e&&h&&s.values&&o.query(t(t({},s),{values:!1}));return o[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&s.values)return y.then(function(e){return e=e.result,l.addKeys(e),t});var n=s.values?t.result.map(d):t.result;(s.values?l:f).addKeys(n)}else if("openCursor"===e){var r=t,i=s.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return i&&l.addKey(r.primaryKey),r.value}}})}return t})}f.add(r)}}return o[e].apply(this,arguments)}}),p}})}};function Gn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),a(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&a(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function zn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function Zn(e,t,n,r,i,s){if(!n||0===n.length)return e;var o=t.query.index,u=o.multiEntry,c=t.query.range,l=r.schema.primaryKey.extractKey,d=o.extractKey,h=(o.lowLevelIndex||o).extractKey;return n=n.reduce(function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var s=new _n,o=n.values.length-1;0<=o;--o){var h,f=n.values[o],p=l(f);s.hasKey(p)||(h=d(f),(u&&a(h)?h.some(function(e){return zn(e,c)}):zn(h,c))&&(s.addKey(p),i.push(f)))}switch(n.type){case"add":var m=(new _n).addKeys(t.values?e.map(function(e){return l(e)}):e);r=e.concat(t.values?i.filter(function(e){return e=l(e),!m.hasKey(e)&&(m.addKey(e),!0)}):i.map(function(e){return l(e)}).filter(function(e){return!m.hasKey(e)&&(m.addKey(e),!0)}));break;case"put":var y=(new _n).addKeys(n.values.map(function(e){return l(e)}));r=e.filter(function(e){return!y.hasKey(t.values?l(e):e)}).concat(t.values?i:i.map(function(e){return l(e)}));break;case"delete":var g=(new _n).addKeys(n.keys);r=e.filter(function(e){return!g.hasKey(t.values?l(e):e)});break;case"deleteRange":var v=n.range;r=e.filter(function(e){return!zn(l(e),v)})}return r},e),n===e?e:(n.sort(function(e,t){return ct(h(e),h(t))||ct(l(e),l(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),s?Object.freeze(n):n)}function Jn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout(function(){0===r.subscribers.size&&R(i,r)},3e3))})}var er={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var s,a,o=e.transaction(t,r,i);return"readwrite"===r&&(a=(s=new AbortController).signal,i=function(i){return function(){if(s.abort(),"readwrite"===r){for(var a=new Set,u=0,c=t;u<c.length;u++){var l=c[u],d=En["idb://".concat(n,"/").concat(l)];if(d){var h=e.table(l),f=d.optimisticOps.filter(function(e){return e.trans===o});if(o._explicit&&i&&o.mutatedParts)for(var p=0,m=Object.values(d.queries.query);p<m.length;p++)for(var y=0,g=(b=m[p]).slice();y<g.length;y++)Pn((_=g[y]).obsSet,o.mutatedParts)&&(R(b,_),_.subscribers.forEach(function(e){return a.add(e)}));else if(0<f.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==o});for(var v=0,w=Object.values(d.queries.query);v<w.length;v++)for(var b,_,k,S=0,x=(b=w[v]).slice();S<x.length;S++)null!=(_=x[S]).res&&o.mutatedParts&&(i&&!_.dirty?(k=Object.isFrozen(_.res),k=Zn(_.res,_.req,f,h,_,k),_.dirty?(R(b,_),_.subscribers.forEach(function(e){return a.add(e)})):k!==_.res&&(_.res=k,_.promise=ke.resolve({result:k}))):(_.dirty&&R(b,_),_.subscribers.forEach(function(e){return a.add(e)})))}}}a.forEach(function(e){return e()})}}},o.addEventListener("abort",i(!1),{signal:a}),o.addEventListener("error",i(!1),{signal:a}),o.addEventListener("complete",i(!0),{signal:a})),o},table:function(r){var i=e.table(r),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=ve.trans;if(s.outbound||"disabled"===a.db._options.cache||a.explicit||"readwrite"!==a.idbtrans.mode)return i.mutate(e);var o=En["idb://".concat(n,"/").concat(r)];return o?(a=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Kn(s,e).some(function(e){return null==e}))?(o.optimisticOps.push(e),e.mutatedParts&&Yn(e.mutatedParts),a.then(function(t){0<t.numFailures&&(R(o.optimisticOps,e),(t=Gn(0,e,t))&&o.optimisticOps.push(t),e.mutatedParts&&Yn(e.mutatedParts))}),a.catch(function(){R(o.optimisticOps,e),e.mutatedParts&&Yn(e.mutatedParts)})):a.then(function(n){var r=Gn(0,t(t({},e),{values:e.values.map(function(e,r){var i;return n.failures[r]||k(e=null!==(i=s.keyPath)&&void 0!==i&&i.includes(".")?P(e):t({},e),s.keyPath,n.results[r]),e})}),n);o.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&Yn(e.mutatedParts)})}),a):i.mutate(e)},query:function(e){if(!qn(ve,i)||!Hn("query",e))return i.query(e);var t="immutable"===(null===(o=ve.trans)||void 0===o?void 0:o.db._options.cache),s=(c=ve).requery,a=c.signal,o=function(e,t,n,r){var i=En["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var s=t[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(n){case"query":var a=s.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Jn(e.req.query.range,r.query.range)});return a?[a,!0,i,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Qn(e.req.query.range,r.query.range)}),!1,i,s];case"count":return a=s.find(function(e){return Jn(e.req.query.range,r.query.range)}),[a,!!a,i,s]}}(n,r,"query",e),u=o[0],c=o[1],l=o[2],d=o[3];return u&&c?u.obsSet=e.obsSet:(c=i.query(e).then(function(e){var n=e.result;if(u&&(u.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=P(n);return e}).catch(function(e){return d&&u&&R(d,u),Promise.reject(e)}),u={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(u):(d=[u],(l=l||(En["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Xn(u,d,s,a),u.promise.then(function(n){return{result:Zn(n.result,e,null==l?void 0:l.optimisticOps,i,u,t)}})}})}})}};function tr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var nr=(rr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new H.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(sn),n.stores({}),this._state.autoSchema=!1,n)},rr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?e():new ke(function(e,n){if(t._state.openComplete)return n(new H.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new H.DatabaseClosed);t.open().catch(z)}t._state.dbReadyPromise.then(e,n)}).then(e)},rr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort(function(e,t){return e.level-t.level}),this},rr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},rr.prototype.open=function(){var e=this;return Ge(ge,function(){return Nn(e)})},rr.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new ke(function(t,n){e.cancelOpen=n}))},rr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new H.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new H.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},rr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new ke(function(i,s){function a(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Re(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,vn(r)||n===nt||gn(r,e).delete(n).catch(z),i()}),n.onerror=Ut(s),n.onblocked=t._fireOnBlocked}if(n)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})},rr.prototype.backendDB=function(){return this.idbdb},rr.prototype.isOpen=function(){return null!==this.idbdb},rr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},rr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},rr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(rr.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),rr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new H.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,D(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},rr.prototype._transaction=function(e,t,n){var r=this,i=ve.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,a,o=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)s=rt;else{if("rw"!=e&&e!=it)throw new H.InvalidArgument("Invalid transaction mode: "+e);s=it}if(i){if(i.mode===rt&&s===it){if(!o)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!o)throw new H.SubTransaction("Table "+e+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,function(e,t){t(n)}):Je(n)}var u=function e(t,n,r,i,s){return ke.resolve().then(function(){var a=ve.transless||ve,o=t._createTransaction(n,r,t._dbSchema,i);if(o.explicit=!0,a={trans:o,transless:a},i)o.idbtrans=i.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===B.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,s)})):Je(a)}var u,c=I(s);return c&&Le(),a=ke.follow(function(){var e;(u=s.call(o,o))&&(c?(e=$e.bind(null,null),u.then(e,e)):"function"==typeof u.next&&"function"==typeof u.throw&&(u=In(u)))},a),(u&&"function"==typeof u.then?ke.resolve(u).then(function(e){return o.active?e:Je(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):a.then(function(){return u})).then(function(e){return i&&o._resolve(),o._completion.then(function(){return e})}).catch(function(e){return o._reject(e),Je(e)})})}.bind(null,this,s,a,i,n);return i?i._promise(s,u,"lock"):ve.trans?Ge(ve.transless,function(){return r._whenReady(u)}):this._whenReady(u)},rr.prototype.table=function(e){if(!l(this._allTables,e))throw new H.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},rr);function rr(e,n){var r=this;this._middlewares={},this.verno=0;var i=rr.dependencies;this._options=n=t({addons:rr.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,a,o,u,c,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:z,dbReadyPromise:null,cancelOpen:z,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new ke(function(e){l.dbReadyResolve=e}),l.openCanceller=new ke(function(e,t){l.cancelOpen=t}),this._state=l,this.name=e,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[re,z]}),this.once=function(e,t){var n=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];r.on(e).unsubscribe(n),t.apply(r,i)};return r.on(e,n)},this.on.ready.subscribe=v(this.on.ready.subscribe,function(e){return function(t,n){rr.vip(function(){var i,s=r._state;s.openComplete?(s.dbOpenError||ke.resolve().then(t),n&&e(t)):s.onReadyBeingFired?(s.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e(function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,yt(Ot.prototype,function(e,t){this.db=s;var n=at,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==Z?e:null}})),this.Table=(a=this,yt(ft.prototype,function(e,t,n){this.db=a,this._tx=n,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:mt(null,{creating:[X,z],reading:[J,Z],updating:[te,z],deleting:[ee,z]})})),this.Transaction=(o=this,yt($t.prototype,function(e,t,n,r,i){var s=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=n[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=o,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Je(e)})})),this.Version=(u=this,yt(mn.prototype,function(e){this.db=u,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,yt(Nt.prototype,function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))}),this._maxKey=Gt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Bn),this.use(er),this.use(Vn),this.use(Wn),this.use(Ln);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return tr(r.table(e),d)};var i=Reflect.get(e,t,n);return i instanceof ft?tr(i,d):"tables"===t?i.map(function(e){return tr(e,d)}):"_createTransaction"===t?function(){return tr(i.apply(this,arguments),d)}:i}});this.vip=d,i.forEach(function(e){return e(r)})}U="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var ir,sr=(ar.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ar.prototype[U]=function(){return this},ar);function ar(e){this._subscribe=e}try{ir={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(O){ir={indexedDB:null,IDBKeyRange:null}}function or(e){var t,n=!1,r=new sr(function(r){var i,s=I(e),a=!1,o={},u={},c={get closed(){return a},unsubscribe:function(){a||(a=!0,i&&i.abort(),d&&Lt.storagemutated.unsubscribe(f))}};r.start&&r.start(c);var d=!1,h=function(){return Ze(p)},f=function(e){Mn(o,e),Pn(u,o)&&h()},p=function(){var c,p,m;!a&&ir.indexedDB&&(o={},c={},i&&i.abort(),i=new AbortController,m=function(t){var n=Ee();try{s&&Le();var r=Ke(e,t);return r=s?r.finally($e):r}finally{n&&Ce()}}(p={subscr:c,signal:i.signal,requery:h,querier:e,trans:null}),Promise.resolve(m).then(function(e){n=!0,t=e,a||p.signal.aborted||(o={},function(e){for(var t in e)if(l(e,t))return;return 1}(u=c)||d||(Lt(Ft,f),d=!0),Ze(function(){return!a&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||Ze(function(){a||r.error&&r.error(e)})}))};return setTimeout(h,0),c});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var ur=nr;function cr(e){var t=dr;try{dr=!0,Lt.storagemutated.fire(e),Rn(e,!0)}finally{dr=t}}d(ur,t(t({},G),{delete:function(e){return new ur(e,{addons:[]}).delete()},exists:function(e){return new ur(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=ur.dependencies).indexedDB,t=t.IDBKeyRange,(vn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==nt})}):gn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Je(new H.MissingAPI)}var t,n},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return ve.trans?Ge(ve.transless,e):e()},vip:wn,async:function(e){return function(){try{var t=In(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(t){return Je(t)}}},spawn:function(e,t,n){try{var r=In(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ke.resolve(r)}catch(e){return Je(e)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?ur.ignoreTransaction(e):e).timeout(t||6e4),ve.trans?ve.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ie},set:function(e){se(e)}},derive:p,extend:o,props:d,override:v,Events:mt,on:Lt,liveQuery:or,extendObservabilitySet:Mn,getByKeyPath:_,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,function(t){k(e,t,void 0)})},shallowClone:S,deepClone:P,getObjectDiff:Fn,cmp:ct,asap:b,minKey:-1/0,addons:[],connections:tt,errnames:B,dependencies:ir,cache:En,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),ur.maxKey=Gt(ur.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Lt(Ft,function(e){dr||(e=new CustomEvent(Kt,{detail:e}),dr=!0,dispatchEvent(e),dr=!1)}),addEventListener(Kt,function(e){e=e.detail,dr||cr(e)}));var lr,dr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(lr=new BroadcastChannel(Kt)).onmessage=function(e){return e.data&&cr(e.data)}})(),"function"==typeof lr.unref&&lr.unref(),Lt(Ft,function(e){dr||lr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!nr.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=lr&&lr.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!nr.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),hr(),cr({all:new _n(-1/0,[[]])}))})),ke.rejectionMapper=function(e,t){return!e||e instanceof F||e instanceof TypeError||e instanceof SyntaxError||!e.name||!V[e.name]?e:(t=new V[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},se(ie),t(nr,Object.freeze({__proto__:null,Dexie:nr,liveQuery:or,Entity:ut,cmp:ct,PropModification:xt,replacePrefix:function(e,t){return new xt({replacePrefix:[e,t]})},add:function(e){return new xt({add:e})},remove:function(e){return new xt({remove:e})},default:nr,RangeSet:_n,mergeRanges:Sn,rangesOverlap:xn}),{default:nr}),nr}()},2681:()=>{Number.prototype.pad=function(e){let t=String(this);for(;t.length<(e||2);)t=`0${t}`;return t};const e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","Febraury","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.prototype.isBetween=function(e,t){"number"!==typeof e&&(e=new Date(e).getTime()),"number"!==typeof t&&(t=new Date(t).getTime());const n=this.getTime();return e<=n&&n<=t},Date.prototype.format=function(s){const a=this.getFullYear(),o=this.getMonth()<9?`0${this.getMonth()+1}`:this.getMonth()+1,u=this.getDate()<10?`0${this.getDate()}`:this.getDate(),c=this.getHours()<10?`0${this.getHours()}`:this.getHours(),l=this.getMinutes()<10?`0${this.getMinutes()}`:this.getMinutes(),d=this.getSeconds()<10?`0${this.getSeconds()}`:this.getSeconds();return s?s.replace("yyyy",a).replace("yy",a).replace("MMMM",t[o-1]).replace("MMM",e[o-1]).replace("MM",o).replace("DDDD",i[this.getDay()]).replace("DDD",r[this.getDay()]).replace("dddd",i[this.getDay()]).replace("ddd",r[this.getDay()]).replace("DD",n[this.getDay()]).replace("dd",u).replace("HH",c).replace("H",c-0).replace("hh",c>12?(c-12).pad(2):c).replace("mm",l).replace("ss",d).replace("tt",c>=12?"PM":"AM"):"".concat(a).concat(o).concat(u).concat(c).concat(l).concat(d)},Date.prototype.toUTCDate=function(){const e=new Date(this.getTime());return e.setMinutes(e.getMinutes()+this.getTimezoneOffset()),e},Date.prototype.addDays=function(e){const t=new Date(this);return t.setDate(t.getDate()+e),t},String.prototype.format=function(...e){e&&1===e.length&&Array.isArray(e[0])&&(e=e[0]),e&&!Array.isArray(e)&&(e=[e]);let t=this;for(let n=0;n<e.length;n++)t=t.replace(new RegExp(`\\{${n}\\}`,"g"),e[n]);return t.toString()},String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.toLowerCase().indexOf(e.toLowerCase())}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.toLowerCase().lastIndexOf(e.toLowerCase())===this.length-e.length}),String.prototype.clearEnd||(String.prototype.clearEnd=function(e){let t=this;if(Array.isArray(e)){let n=!1;for(;t&&!n;){let r=!1;e.forEach(e=>{const n=t.clearEnd(e);t!==n&&(t=n,r=!0)}),n=!r}}else for(;t.endsWith(e);)t=t.substring(0,t.length-e.length);return t.toString()}),String.prototype.clearStart||(String.prototype.clearStart=function(e){let t=this;if(Array.isArray(e)){let n=!1;for(;t&&!n;){let r=!1;e.forEach(e=>{const n=t.clearStart(e);t!==n&&(t=n,r=!0)}),n=!r}}else for(;t.startsWith(e);)t=t.substring(e.length);return t.toString()})},9051:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Gn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(e){return null==e._pf&&(e._pf=m()),e._pf}function g(e){var t=null,r=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=y(e),r=n.call(t.parsedDateParts,function(e){return null!=e}),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function v(e){var t=p(NaN);return null!=e?f(y(t),e):y(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var w=r.momentProperties=[],b=!1;function _(e,t){var n,r,i,s=w.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=y(t)),c(t._locale)||(e._locale=t._locale),s>0)for(n=0;n<s;n++)c(i=t[r=w[n]])||(e[r]=i);return e}function k(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===b&&(b=!0,r.updateOffset(this),b=!1)}function S(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function x(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function D(e,t){var n=!0;return f(function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,s,a,u=[],c=arguments.length;for(s=0;s<c;s++){if(i="","object"===typeof arguments[s]){for(a in i+="\n["+s+"] ",arguments[0])o(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[s];u.push(i)}x(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var O,T={};function M(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),T[e]||(x(t),T[e]=!0)}function P(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e){var t,n;for(n in e)o(e,n)&&(P(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function C(e,t){var n,r=f({},e);for(n in t)o(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)o(e,n)&&!o(t,n)&&a(e[n])&&(r[n]=f({},r[n]));return r}function A(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,O=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var Y={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return P(r)?r.call(t,n):r}function j(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,I=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},W={};function F(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return j(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function K(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function L(e){var t,n,r=e.match(N);for(t=0,n=r.length;t<n;t++)W[r[t]]?r[t]=W[r[t]]:r[t]=K(r[t]);return function(t){var i,s="";for(i=0;i<n;i++)s+=P(r[i])?r[i].call(t,e):r[i];return s}}function $(e,t){return e.isValid()?(t=B(t,e.localeData()),U[t]=U[t]||L(t),U[t](e)):e.localeData().invalidDate()}function B(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(I.lastIndex=0;n>=0&&I.test(e);)e=e.replace(I,r),I.lastIndex=0,n-=1;return e}var q={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])}var V="Invalid date";function G(){return this._invalidDate}var z="%d",Z=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var Q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function X(e,t,n,r){var i=this._relativeTime[n];return P(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return P(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)o(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function se(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}var ae,oe=/\d/,ue=/\d\d/,ce=/\d{3}/,le=/\d{4}/,de=/[+-]?\d{6}/,he=/\d\d?/,fe=/\d\d\d\d?/,pe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ye=/\d{1,4}/,ge=/[+-]?\d{1,6}/,ve=/\d+/,we=/[+-]?\d+/,be=/Z|[+-]\d\d:?\d\d/gi,_e=/Z|[+-]\d\d(?::?\d\d)?/gi,ke=/[+-]?\d+(\.\d{1,3})?/,Se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xe=/^[1-9]\d?/,De=/^([1-9]\d|\d)/;function Oe(e,t,n){ae[e]=P(t)?t:function(e,r){return e&&n?n:t}}function Te(e,t){return o(ae,e)?ae[e](t._strict,t._locale):new RegExp(Me(e))}function Me(e){return Pe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Pe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ee(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ce(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Ee(t)),n}ae={};var Ae={};function Ye(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),l(t)&&(i=function(e,n){n[t]=Ce(e)}),r=e.length,n=0;n<r;n++)Ae[e[n]]=i}function Re(e,t){Ye(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function je(e,t,n){null!=t&&o(Ae,e)&&Ae[e](t,n._a,n,e)}function Ne(e){return e%4===0&&e%100!==0||e%400===0}var Ie=0,Ue=1,We=2,Fe=3,Ke=4,Le=5,$e=6,Be=7,qe=8;function He(e){return Ne(e)?366:365}F("Y",0,0,function(){var e=this.year();return e<=9999?j(e,4):"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),Oe("Y",we),Oe("YY",he,ue),Oe("YYYY",ye,le),Oe("YYYYY",ge,de),Oe("YYYYYY",ge,de),Ye(["YYYYY","YYYYYY"],Ie),Ye("YYYY",function(e,t){t[Ie]=2===e.length?r.parseTwoDigitYear(e):Ce(e)}),Ye("YY",function(e,t){t[Ie]=r.parseTwoDigitYear(e)}),Ye("Y",function(e,t){t[Ie]=parseInt(e,10)}),r.parseTwoDigitYear=function(e){return Ce(e)+(Ce(e)>68?1900:2e3)};var Ve,Ge=Ze("FullYear",!0);function ze(){return Ne(this.year())}function Ze(e,t){return function(n){return null!=n?(Qe(this,e,n),r.updateOffset(this,t),this):Je(this,e)}}function Je(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Qe(e,t,n){var r,i,s,a,o;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,a=e.month(),o=29!==(o=e.date())||1!==a||Ne(s)?o:28,i?r.setUTCFullYear(s,a,o):r.setFullYear(s,a,o)}}function Xe(e){return P(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=se(e=re(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(P(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Ne(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Oe("M",he,xe),Oe("MM",he,ue),Oe("MMM",function(e,t){return t.monthsShortRegex(e)}),Oe("MMMM",function(e,t){return t.monthsRegex(e)}),Ye(["M","MM"],function(e,t){t[Ue]=Ce(e)-1}),Ye(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Ue]=i:y(n).invalidMonth=e});var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),st=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,at=Se,ot=Se;function ut(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||st).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone}function ct(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[st.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ve.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ve.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ve.call(this._shortMonthsParse,a))||-1!==(i=Ve.call(this._longMonthsParse,a))?i:null:-1!==(i=Ve.call(this._longMonthsParse,a))||-1!==(i=Ve.call(this._shortMonthsParse,a))?i:null}function dt(e,t,n){var r,i,s;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ht(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=Ce(t);else if(!l(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ft(e){return null!=e?(ht(this,e),r.updateOffset(this,!0),this):Je(this,"Month")}function pt(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||gt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=at),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function yt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||gt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=ot),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gt(){function e(e,t){return t.length-e.length}var t,n,r,i,s=[],a=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r=Pe(this.monthsShort(n,"")),i=Pe(this.months(n,"")),s.push(r),a.push(i),o.push(i),o.push(r);s.sort(e),a.sort(e),o.sort(e),this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function vt(e,t,n,r,i,s,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,s,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,s,a),o}function wt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function bt(e,t,n){var r=7+t-n;return-(7+wt(e,0,r).getUTCDay()-t)%7+r-1}function _t(e,t,n,r,i){var s,a,o=1+7*(t-1)+(7+n-r)%7+bt(e,r,i);return o<=0?a=He(s=e-1)+o:o>He(e)?(s=e+1,a=o-He(e)):(s=e,a=o),{year:s,dayOfYear:a}}function kt(e,t,n){var r,i,s=bt(e.year(),t,n),a=Math.floor((e.dayOfYear()-s-1)/7)+1;return a<1?r=a+St(i=e.year()-1,t,n):a>St(e.year(),t,n)?(r=a-St(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function St(e,t,n){var r=bt(e,t,n),i=bt(e+1,t,n);return(He(e)-r+i)/7}function xt(e){return kt(e,this._week.dow,this._week.doy).week}F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),Oe("w",he,xe),Oe("ww",he,ue),Oe("W",he,xe),Oe("WW",he,ue),Re(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=Ce(e)});var Dt={dow:0,doy:6};function Ot(){return this._week.dow}function Tt(){return this._week.doy}function Mt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Pt(e){var t=kt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Et(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ct(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function At(e,t){return e.slice(t,7).concat(e.slice(0,t))}F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),Oe("d",he),Oe("e",he),Oe("E",he),Oe("dd",function(e,t){return t.weekdaysMinRegex(e)}),Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Oe("dddd",function(e,t){return t.weekdaysRegex(e)}),Re(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e}),Re(["d","e","E"],function(e,t,n,r){t[r]=Ce(e)});var Yt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Nt=Se,It=Se,Ut=Se;function Wt(e,t){var n=s(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?At(n,this._week.dow):e?n[e.day()]:n}function Ft(e){return!0===e?At(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Kt(e){return!0===e?At(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Lt(e,t,n){var r,i,s,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ve.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ve.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ve.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ve.call(this._weekdaysParse,a))||-1!==(i=Ve.call(this._shortWeekdaysParse,a))||-1!==(i=Ve.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ve.call(this._shortWeekdaysParse,a))||-1!==(i=Ve.call(this._weekdaysParse,a))||-1!==(i=Ve.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ve.call(this._minWeekdaysParse,a))||-1!==(i=Ve.call(this._weekdaysParse,a))||-1!==(i=Ve.call(this._shortWeekdaysParse,a))?i:null}function $t(e,t,n){var r,i,s;if(this._weekdaysParseExact)return Lt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Bt(e){if(!this.isValid())return null!=e?this:NaN;var t=Je(this,"Day");return null!=e?(e=Et(e,this.localeData()),this.add(e-t,"d")):t}function qt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ht(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ct(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Vt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Nt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Gt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=It),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Zt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ut),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Zt(){function e(e,t){return t.length-e.length}var t,n,r,i,s,a=[],o=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Pe(this.weekdaysMin(n,"")),i=Pe(this.weekdaysShort(n,"")),s=Pe(this.weekdays(n,"")),a.push(r),o.push(i),u.push(s),c.push(r),c.push(i),c.push(s);a.sort(e),o.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Qt(){return this.hours()||24}function Xt(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}F("H",["HH",2],0,"hour"),F("h",["hh",2],0,Jt),F("k",["kk",2],0,Qt),F("hmm",0,0,function(){return""+Jt.apply(this)+j(this.minutes(),2)}),F("hmmss",0,0,function(){return""+Jt.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Xt("a",!0),Xt("A",!1),Oe("a",en),Oe("A",en),Oe("H",he,De),Oe("h",he,xe),Oe("k",he,xe),Oe("HH",he,ue),Oe("hh",he,ue),Oe("kk",he,ue),Oe("hmm",fe),Oe("hmmss",pe),Oe("Hmm",fe),Oe("Hmmss",pe),Ye(["H","HH"],Fe),Ye(["k","kk"],function(e,t,n){var r=Ce(e);t[Fe]=24===r?0:r}),Ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Ye(["h","hh"],function(e,t,n){t[Fe]=Ce(e),y(n).bigHour=!0}),Ye("hmm",function(e,t,n){var r=e.length-2;t[Fe]=Ce(e.substr(0,r)),t[Ke]=Ce(e.substr(r)),y(n).bigHour=!0}),Ye("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Fe]=Ce(e.substr(0,r)),t[Ke]=Ce(e.substr(r,2)),t[Le]=Ce(e.substr(i)),y(n).bigHour=!0}),Ye("Hmm",function(e,t,n){var r=e.length-2;t[Fe]=Ce(e.substr(0,r)),t[Ke]=Ce(e.substr(r))}),Ye("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Fe]=Ce(e.substr(0,r)),t[Ke]=Ce(e.substr(r,2)),t[Le]=Ce(e.substr(i))});var nn=/[ap]\.?m?\.?/i,rn=Ze("Hours",!0);function sn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,on={calendar:Y,longDateFormat:q,invalidDate:V,ordinal:z,dayOfMonthOrdinalParse:Z,relativeTime:Q,months:rt,monthsShort:it,week:Dt,weekdays:Yt,weekdaysMin:jt,weekdaysShort:Rt,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,s=0;s<e.length;){for(t=(i=dn(e[s]).split("-")).length,n=(n=dn(e[s+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}s++}return an}function fn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&fn(t))try{n=an._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){un[t]=null}return un[t]}function mn(e,t){var n;return e&&((n=c(t)?vn(e):yn(e,t))?an=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function yn(e,t){if(null!==t){var n,r=on;if(t.abbr=e,null!=un[e])M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new A(C(r,t)),cn[e]&&cn[e].forEach(function(e){yn(e.name,e.config)}),mn(e),un[e]}return delete un[e],null}function gn(e,t){if(null!=t){var n,r,i=on;null!=un[e]&&null!=un[e].parentLocale?un[e].set(C(un[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=C(i,t),null==r&&(t.abbr=e),(n=new A(t)).parentLocale=un[e],un[e]=n),mn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===mn()&&mn(e)):null!=un[e]&&delete un[e]);return un[e]}function vn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!s(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function wn(){return O(un)}function bn(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[Ue]<0||n[Ue]>11?Ue:n[We]<1||n[We]>nt(n[Ie],n[Ue])?We:n[Fe]<0||n[Fe]>24||24===n[Fe]&&(0!==n[Ke]||0!==n[Le]||0!==n[$e])?Fe:n[Ke]<0||n[Ke]>59?Ke:n[Le]<0||n[Le]>59?Le:n[$e]<0||n[$e]>999?$e:-1,y(e)._overflowDayOfYear&&(t<Ie||t>We)&&(t=We),y(e)._overflowWeeks&&-1===t&&(t=Be),y(e)._overflowWeekday&&-1===t&&(t=qe),y(e).overflow=t),e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,xn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Dn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],On=/^\/?Date\((-?\d+)/i,Tn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Pn(e){var t,n,r,i,s,a,o=e._i,u=_n.exec(o)||kn.exec(o),c=xn.length,l=Dn.length;if(u){for(y(e).iso=!0,t=0,n=c;t<n;t++)if(xn[t][1].exec(u[1])){i=xn[t][0],r=!1!==xn[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(Dn[t][1].exec(u[3])){s=(u[2]||" ")+Dn[t][0];break}if(null==s)return void(e._isValid=!1)}if(!r&&null!=s)return void(e._isValid=!1);if(u[4]){if(!Sn.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(s||"")+(a||""),Kn(e)}else e._isValid=!1}function En(e,t,n,r,i,s){var a=[Cn(e),it.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&a.push(parseInt(s,10)),a}function Cn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function An(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Yn(e,t,n){return!e||Rt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(y(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Rn(e,t,n){if(e)return Mn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function jn(e){var t,n=Tn.exec(An(e._i));if(n){if(t=En(n[4],n[3],n[2],n[5],n[6],n[7]),!Yn(n[1],t,e))return;e._a=t,e._tzm=Rn(n[8],n[9],n[10]),e._d=wt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function Nn(e){var t=On.exec(e._i);null===t?(Pn(e),!1===e._isValid&&(delete e._isValid,jn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function In(e,t,n){return null!=e?e:null!=t?t:n}function Un(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Wn(e){var t,n,r,i,s,a=[];if(!e._d){for(r=Un(e),e._w&&null==e._a[We]&&null==e._a[Ue]&&Fn(e),null!=e._dayOfYear&&(s=In(e._a[Ie],r[Ie]),(e._dayOfYear>He(s)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=wt(s,0,e._dayOfYear),e._a[Ue]=n.getUTCMonth(),e._a[We]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Fe]&&0===e._a[Ke]&&0===e._a[Le]&&0===e._a[$e]&&(e._nextDay=!0,e._a[Fe]=0),e._d=(e._useUTC?wt:vt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Fe]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Fn(e){var t,n,r,i,s,a,o,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(s=1,a=4,n=In(t.GG,e._a[Ie],kt(zn(),1,4).year),r=In(t.W,1),((i=In(t.E,1))<1||i>7)&&(u=!0)):(s=e._locale._week.dow,a=e._locale._week.doy,c=kt(zn(),s,a),n=In(t.gg,e._a[Ie],c.year),r=In(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+s,(t.e<0||t.e>6)&&(u=!0)):i=s),r<1||r>St(n,s,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=_t(n,r,i,s,a),e._a[Ie]=o.year,e._dayOfYear=o.dayOfYear)}function Kn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],y(e).empty=!0;var t,n,i,s,a,o,u,c=""+e._i,l=c.length,d=0;for(u=(i=B(e._f,e._locale).match(N)||[]).length,t=0;t<u;t++)s=i[t],(n=(c.match(Te(s,e))||[])[0])&&((a=c.substr(0,c.indexOf(n))).length>0&&y(e).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),d+=n.length),W[s]?(n?y(e).empty=!1:y(e).unusedTokens.push(s),je(s,n,e)):e._strict&&!n&&y(e).unusedTokens.push(s);y(e).charsLeftOver=l-d,c.length>0&&y(e).unusedInput.push(c),e._a[Fe]<=12&&!0===y(e).bigHour&&e._a[Fe]>0&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Fe]=Ln(e._locale,e._a[Fe],e._meridiem),null!==(o=y(e).era)&&(e._a[Ie]=e._locale.erasConvertYear(o,e._a[Ie])),Wn(e),bn(e)}else jn(e);else Pn(e)}function Ln(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function $n(e){var t,n,r,i,s,a,o=!1,u=e._f.length;if(0===u)return y(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<u;i++)s=0,a=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Kn(t),g(t)&&(a=!0),s+=y(t).charsLeftOver,s+=10*y(t).unusedTokens.length,y(t).score=s,o?s<r&&(r=s,n=t):(null==r||s<r||a)&&(r=s,n=t,a&&(o=!0));f(e,n||t)}function Bn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Wn(e)}}function qn(e){var t=new k(bn(Hn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Hn(e){var t=e._i,n=e._f;return e._locale=e._locale||vn(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new k(bn(t)):(d(t)?e._d=t:s(n)?$n(e):n?Kn(e):Vn(e),g(e)||(e._d=null),e))}function Vn(e){var t=e._i;c(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Nn(e):s(t)?(e._a=h(t.slice(0),function(e){return parseInt(e,10)}),Wn(e)):a(t)?Bn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Gn(e,t,n,r,i){var o={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&u(e)||s(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,qn(o)}function zn(e,t,n,r){return Gn(e,t,n,r,!1)}r.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r.ISO_8601=function(){},r.RFC_2822=function(){};var Zn=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=zn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()}),Jn=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=zn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()});function Qn(e,t){var n,r;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return zn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Xn(){return Qn("isBefore",[].slice.call(arguments,0))}function er(){return Qn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(o(e,t)&&(-1===Ve.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==Ce(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function sr(){return Mr(NaN)}function ar(e){var t=re(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*o*60*60,this._days=+a+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=vn(),this._bubble()}function or(e){return e instanceof ar}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&Ce(e[r])!==Ce(t[r]))&&a++;return a+s}function lr(e,t){F(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}lr("Z",":"),lr("ZZ",""),Oe("Z",_e),Oe("ZZ",_e),Ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=hr(_e,e)});var dr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+Ce(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(S(e)||d(e)?e.valueOf():zn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):zn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var i,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(_e,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),s!==e&&(!t||this._changeInProgress?Yr(this,Mr(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:pr(this)}function yr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gr(e){return this.utcOffset(0,e)}function vr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function wr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(be,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function br(e){return!!this.isValid()&&(e=e?zn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function kr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),(t=Hn(t))._a?(e=t._isUTC?p(t._a):zn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function xr(){return!!this.isValid()&&this._isUTC}function Dr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Or=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Tr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Mr(e,t){var n,r,i,s=e,a=null;return or(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(a=Or.exec(e))?(n="-"===a[1]?-1:1,s={y:0,d:Ce(a[We])*n,h:Ce(a[Fe])*n,m:Ce(a[Ke])*n,s:Ce(a[Le])*n,ms:Ce(ur(1e3*a[$e]))*n}):(a=Tr.exec(e))?(n="-"===a[1]?-1:1,s={y:Pr(a[2],n),M:Pr(a[3],n),w:Pr(a[4],n),d:Pr(a[5],n),h:Pr(a[6],n),m:Pr(a[7],n),s:Pr(a[8],n)}):null==s?s={}:"object"===typeof s&&("from"in s||"to"in s)&&(i=Cr(zn(s.from),zn(s.to)),(s={}).ms=i.milliseconds,s.M=i.months),r=new ar(s),or(e)&&o(e,"_locale")&&(r._locale=e._locale),or(e)&&o(e,"_isValid")&&(r._isValid=e._isValid),r}function Pr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Er(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Cr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Er(e,t):((n=Er(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Ar(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(M(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Yr(this,Mr(n,r),e),this}}function Yr(e,t,n,i){var s=t._milliseconds,a=ur(t._days),o=ur(t._months);e.isValid()&&(i=null==i||i,o&&ht(e,Je(e,"Month")+o*n),a&&Qe(e,"Date",Je(e,"Date")+a*n),s&&e._d.setTime(e._d.valueOf()+s*n),i&&r.updateOffset(e,a||o))}Mr.fn=ar.prototype,Mr.invalid=sr;var Rr=Ar(1,"add"),jr=Ar(-1,"subtract");function Nr(e){return"string"===typeof e||e instanceof String}function Ir(e){return S(e)||d(e)||Nr(e)||l(e)||Wr(e)||Ur(e)||null===e||void 0===e}function Ur(e){var t,n,r=a(e)&&!u(e),i=!1,s=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=s.length;for(t=0;t<c;t+=1)n=s[t],i=i||o(e,n);return r&&i}function Wr(e){var t=s(e),n=!1;return t&&(n=0===e.filter(function(t){return!l(t)&&Nr(e)}).length),t&&n}function Fr(e){var t,n,r=a(e)&&!u(e),i=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<s.length;t+=1)n=s[t],i=i||o(e,n);return r&&i}function Kr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Lr(e,t){1===arguments.length&&(arguments[0]?Ir(arguments[0])?(e=arguments[0],t=void 0):Fr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||zn(),i=fr(n,this).startOf("day"),s=r.calendarFormat(this,i)||"sameElse",a=t&&(P(t[s])?t[s].call(this,n):t[s]);return this.format(a||this.localeData().calendar(s,this,zn(n)))}function $r(){return new k(this)}function Br(e,t){var n=S(e)?e:zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function qr(e,t){var n=S(e)?e:zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Hr(e,t,n,r){var i=S(e)?e:zn(e),s=S(t)?t:zn(t);return!!(this.isValid()&&i.isValid()&&s.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(s,n):!this.isAfter(s,n))}function Vr(e,t){var n,r=S(e)?e:zn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Gr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function zr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Zr(e,t,n){var r,i,s;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":s=Jr(this,r)/12;break;case"month":s=Jr(this,r);break;case"quarter":s=Jr(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Ee(s)}function Jr(e,t){if(e.date()<t.date())return-Jr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Qr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Xr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?$(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):P(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",$(n,"Z")):$(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",s="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=s+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=$(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(S(e)&&e.isValid()||zn(e).isValid())?Mr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(zn(),e)}function ii(e,t){return this.isValid()&&(S(e)&&e.isValid()||zn(e).isValid())?Mr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function si(e){return this.to(zn(),e)}function ai(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function ui(){return this._locale}var ci=1e3,li=60*ci,di=60*li,hi=3506328*di;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function yi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*li),di);break;case"minute":t=this._d.valueOf(),t-=fi(t,li);break;case"second":t=this._d.valueOf(),t-=fi(t,ci)}return this._d.setTime(t),r.updateOffset(this,!0),this}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-fi(t+(this._isUTC?0:this.utcOffset()*li),di)-1;break;case"minute":t=this._d.valueOf(),t+=li-fi(t,li)-1;break;case"second":t=this._d.valueOf(),t+=ci-fi(t,ci)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(){return this._d.valueOf()-6e4*(this._offset||0)}function wi(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function _i(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ki(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Si(){return this.isValid()?this.toISOString():null}function xi(){return g(this)}function Di(){return f({},y(this))}function Oi(){return y(this).overflow}function Ti(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Mi(e,t){var n,i,s,a=this._eras||vn("en")._eras;for(n=0,i=a.length;n<i;++n)switch("string"===typeof a[n].since&&(s=r(a[n].since).startOf("day"),a[n].since=s.valueOf()),typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":s=r(a[n].until).startOf("day").valueOf(),a[n].until=s.valueOf()}return a}function Pi(e,t,n){var r,i,s,a,o,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(s=u[r].name.toUpperCase(),a=u[r].abbr.toUpperCase(),o=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[r];break;case"NNNN":if(s===e)return u[r];break;case"NNNNN":if(o===e)return u[r]}else if([s,a,o].indexOf(e)>=0)return u[r]}function Ei(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Ci(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Ai(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Yi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ri(){var e,t,n,i,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,i=this.clone().startOf("day").valueOf(),s[e].since<=i&&i<=s[e].until||s[e].until<=i&&i<=s[e].since)return(this.year()-r(s[e].since).year())*n+s[e].offset;return this.year()}function ji(e){return o(this,"_erasNameRegex")||Li.call(this),e?this._erasNameRegex:this._erasRegex}function Ni(e){return o(this,"_erasAbbrRegex")||Li.call(this),e?this._erasAbbrRegex:this._erasRegex}function Ii(e){return o(this,"_erasNarrowRegex")||Li.call(this),e?this._erasNarrowRegex:this._erasRegex}function Ui(e,t){return t.erasAbbrRegex(e)}function Wi(e,t){return t.erasNameRegex(e)}function Fi(e,t){return t.erasNarrowRegex(e)}function Ki(e,t){return t._eraYearOrdinalRegex||ve}function Li(){var e,t,n,r,i,s=[],a=[],o=[],u=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=Pe(c[e].name),r=Pe(c[e].abbr),i=Pe(c[e].narrow),a.push(n),s.push(r),o.push(i),u.push(n),u.push(r),u.push(i);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}function $i(e,t){F(0,[e,e.length],0,t)}function Bi(e){return Zi.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function qi(e){return Zi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Hi(){return St(this.year(),1,4)}function Vi(){return St(this.isoWeekYear(),1,4)}function Gi(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function zi(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function Zi(e,t,n,r,i){var s;return null==e?kt(this,r,i).year:(t>(s=St(e,r,i))&&(t=s),Ji.call(this,e,t,n,r,i))}function Ji(e,t,n,r,i){var s=_t(e,t,n,r,i),a=wt(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Qi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}F("N",0,0,"eraAbbr"),F("NN",0,0,"eraAbbr"),F("NNN",0,0,"eraAbbr"),F("NNNN",0,0,"eraName"),F("NNNNN",0,0,"eraNarrow"),F("y",["y",1],"yo","eraYear"),F("y",["yy",2],0,"eraYear"),F("y",["yyy",3],0,"eraYear"),F("y",["yyyy",4],0,"eraYear"),Oe("N",Ui),Oe("NN",Ui),Oe("NNN",Ui),Oe("NNNN",Wi),Oe("NNNNN",Fi),Ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?y(n).era=i:y(n).invalidEra=e}),Oe("y",ve),Oe("yy",ve),Oe("yyy",ve),Oe("yyyy",ve),Oe("yo",Ki),Ye(["y","yy","yyy","yyyy"],Ie),Ye(["yo"],function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ie]=n._locale.eraYearOrdinalParse(e,i):t[Ie]=parseInt(e,10)}),F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),$i("gggg","weekYear"),$i("ggggg","weekYear"),$i("GGGG","isoWeekYear"),$i("GGGGG","isoWeekYear"),Oe("G",we),Oe("g",we),Oe("GG",he,ue),Oe("gg",he,ue),Oe("GGGG",ye,le),Oe("gggg",ye,le),Oe("GGGGG",ge,de),Oe("ggggg",ge,de),Re(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=Ce(e)}),Re(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)}),F("Q",0,"Qo","quarter"),Oe("Q",oe),Ye("Q",function(e,t){t[Ue]=3*(Ce(e)-1)}),F("D",["DD",2],"Do","date"),Oe("D",he,xe),Oe("DD",he,ue),Oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Ye(["D","DD"],We),Ye("Do",function(e,t){t[We]=Ce(e.match(he)[0])});var Xi=Ze("Date",!0);function es(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}F("DDD",["DDDD",3],"DDDo","dayOfYear"),Oe("DDD",me),Oe("DDDD",ce),Ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Ce(e)}),F("m",["mm",2],0,"minute"),Oe("m",he,De),Oe("mm",he,ue),Ye(["m","mm"],Ke);var ts=Ze("Minutes",!1);F("s",["ss",2],0,"second"),Oe("s",he,De),Oe("ss",he,ue),Ye(["s","ss"],Le);var ns,rs,is=Ze("Seconds",!1);for(F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Oe("S",me,oe),Oe("SS",me,ue),Oe("SSS",me,ce),ns="SSSS";ns.length<=9;ns+="S")Oe(ns,ve);function ss(e,t){t[$e]=Ce(1e3*("0."+e))}for(ns="S";ns.length<=9;ns+="S")Ye(ns,ss);function as(){return this._isUTC?"UTC":""}function os(){return this._isUTC?"Coordinated Universal Time":""}rs=Ze("Milliseconds",!1),F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var us=k.prototype;function cs(e){return zn(1e3*e)}function ls(){return zn.apply(null,arguments).parseZone()}function ds(e){return e}us.add=Rr,us.calendar=Lr,us.clone=$r,us.diff=Zr,us.endOf=gi,us.format=ti,us.from=ni,us.fromNow=ri,us.to=ii,us.toNow=si,us.get=Xe,us.invalidAt=Oi,us.isAfter=Br,us.isBefore=qr,us.isBetween=Hr,us.isSame=Vr,us.isSameOrAfter=Gr,us.isSameOrBefore=zr,us.isValid=xi,us.lang=oi,us.locale=ai,us.localeData=ui,us.max=Jn,us.min=Zn,us.parsingFlags=Di,us.set=et,us.startOf=yi,us.subtract=jr,us.toArray=_i,us.toObject=ki,us.toDate=bi,us.toISOString=Xr,us.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(us[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),us.toJSON=Si,us.toString=Qr,us.unix=wi,us.valueOf=vi,us.creationData=Ti,us.eraName=Ci,us.eraNarrow=Ai,us.eraAbbr=Yi,us.eraYear=Ri,us.year=Ge,us.isLeapYear=ze,us.weekYear=Bi,us.isoWeekYear=qi,us.quarter=us.quarters=Qi,us.month=ft,us.daysInMonth=pt,us.week=us.weeks=Mt,us.isoWeek=us.isoWeeks=Pt,us.weeksInYear=Gi,us.weeksInWeekYear=zi,us.isoWeeksInYear=Hi,us.isoWeeksInISOWeekYear=Vi,us.date=Xi,us.day=us.days=Bt,us.weekday=qt,us.isoWeekday=Ht,us.dayOfYear=es,us.hour=us.hours=rn,us.minute=us.minutes=ts,us.second=us.seconds=is,us.millisecond=us.milliseconds=rs,us.utcOffset=mr,us.utc=gr,us.local=vr,us.parseZone=wr,us.hasAlignedHourOffset=br,us.isDST=_r,us.isLocal=Sr,us.isUtcOffset=xr,us.isUtc=Dr,us.isUTC=Dr,us.zoneAbbr=as,us.zoneName=os,us.dates=D("dates accessor is deprecated. Use date instead.",Xi),us.months=D("months accessor is deprecated. Use month instead",ft),us.years=D("years accessor is deprecated. Use year instead",Ge),us.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yr),us.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",kr);var hs=A.prototype;function fs(e,t,n,r){var i=vn(),s=p().set(r,t);return i[n](s,e)}function ps(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return fs(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fs(e,r,n,"month");return i}function ms(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,s=vn(),a=e?s._week.dow:0,o=[];if(null!=n)return fs(t,(n+a)%7,r,"day");for(i=0;i<7;i++)o[i]=fs(t,(i+a)%7,r,"day");return o}function ys(e,t){return ps(e,t,"months")}function gs(e,t){return ps(e,t,"monthsShort")}function vs(e,t,n){return ms(e,t,n,"weekdays")}function ws(e,t,n){return ms(e,t,n,"weekdaysShort")}function bs(e,t,n){return ms(e,t,n,"weekdaysMin")}hs.calendar=R,hs.longDateFormat=H,hs.invalidDate=G,hs.ordinal=J,hs.preparse=ds,hs.postformat=ds,hs.relativeTime=X,hs.pastFuture=ee,hs.set=E,hs.eras=Mi,hs.erasParse=Pi,hs.erasConvertYear=Ei,hs.erasAbbrRegex=Ni,hs.erasNameRegex=ji,hs.erasNarrowRegex=Ii,hs.months=ut,hs.monthsShort=ct,hs.monthsParse=dt,hs.monthsRegex=yt,hs.monthsShortRegex=mt,hs.week=xt,hs.firstDayOfYear=Tt,hs.firstDayOfWeek=Ot,hs.weekdays=Wt,hs.weekdaysMin=Kt,hs.weekdaysShort=Ft,hs.weekdaysParse=$t,hs.weekdaysRegex=Vt,hs.weekdaysShortRegex=Gt,hs.weekdaysMinRegex=zt,hs.isPM=tn,hs.meridiem=sn,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Ce(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=D("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=D("moment.langData is deprecated. Use moment.localeData instead.",vn);var _s=Math.abs;function ks(){var e=this._data;return this._milliseconds=_s(this._milliseconds),this._days=_s(this._days),this._months=_s(this._months),e.milliseconds=_s(e.milliseconds),e.seconds=_s(e.seconds),e.minutes=_s(e.minutes),e.hours=_s(e.hours),e.months=_s(e.months),e.years=_s(e.years),this}function Ss(e,t,n,r){var i=Mr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function xs(e,t){return Ss(this,e,t,1)}function Ds(e,t){return Ss(this,e,t,-1)}function Os(e){return e<0?Math.floor(e):Math.ceil(e)}function Ts(){var e,t,n,r,i,s=this._milliseconds,a=this._days,o=this._months,u=this._data;return s>=0&&a>=0&&o>=0||s<=0&&a<=0&&o<=0||(s+=864e5*Os(Ps(o)+a),a=0,o=0),u.milliseconds=s%1e3,e=Ee(s/1e3),u.seconds=e%60,t=Ee(e/60),u.minutes=t%60,n=Ee(t/60),u.hours=n%24,a+=Ee(n/24),o+=i=Ee(Ms(a)),a-=Os(Ps(i)),r=Ee(o/12),o%=12,u.days=a,u.months=o,u.years=r,this}function Ms(e){return 4800*e/146097}function Ps(e){return 146097*e/4800}function Es(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ms(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ps(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Cs(e){return function(){return this.as(e)}}var As=Cs("ms"),Ys=Cs("s"),Rs=Cs("m"),js=Cs("h"),Ns=Cs("d"),Is=Cs("w"),Us=Cs("M"),Ws=Cs("Q"),Fs=Cs("y"),Ks=As;function Ls(){return Mr(this)}function $s(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Bs(e){return function(){return this.isValid()?this._data[e]:NaN}}var qs=Bs("milliseconds"),Hs=Bs("seconds"),Vs=Bs("minutes"),Gs=Bs("hours"),zs=Bs("days"),Zs=Bs("months"),Js=Bs("years");function Qs(){return Ee(this.days()/7)}var Xs=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function na(e,t,n,r){var i=Mr(e).abs(),s=Xs(i.as("s")),a=Xs(i.as("m")),o=Xs(i.as("h")),u=Xs(i.as("d")),c=Xs(i.as("M")),l=Xs(i.as("w")),d=Xs(i.as("y")),h=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=r,ta.apply(null,h)}function ra(e){return void 0===e?Xs:"function"===typeof e&&(Xs=e,!0)}function ia(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))}function sa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,s=ea;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(s=Object.assign({},ea,t),null!=t.s&&null==t.ss&&(s.ss=t.s-1)),r=na(this,!i,s,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var aa=Math.abs;function oa(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,s,a,o,u=aa(this._milliseconds)/1e3,c=aa(this._days),l=aa(this._months),d=this.asSeconds();return d?(e=Ee(u/60),t=Ee(e/60),u%=60,e%=60,n=Ee(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",s=oa(this._months)!==oa(d)?"-":"",a=oa(this._days)!==oa(d)?"-":"",o=oa(this._milliseconds)!==oa(d)?"-":"",i+"P"+(n?s+n+"Y":"")+(l?s+l+"M":"")+(c?a+c+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+r+"S":"")):"P0D"}var ca=ar.prototype;return ca.isValid=ir,ca.abs=ks,ca.add=xs,ca.subtract=Ds,ca.as=Es,ca.asMilliseconds=As,ca.asSeconds=Ys,ca.asMinutes=Rs,ca.asHours=js,ca.asDays=Ns,ca.asWeeks=Is,ca.asMonths=Us,ca.asQuarters=Ws,ca.asYears=Fs,ca.valueOf=Ks,ca._bubble=Ts,ca.clone=Ls,ca.get=$s,ca.milliseconds=qs,ca.seconds=Hs,ca.minutes=Vs,ca.hours=Gs,ca.days=zs,ca.weeks=Qs,ca.months=Zs,ca.years=Js,ca.humanize=sa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=ai,ca.localeData=ui,ca.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=oi,F("X",0,0,"unix"),F("x",0,0,"valueOf"),Oe("x",we),Oe("X",ke),Ye("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),Ye("x",function(e,t,n){n._d=new Date(Ce(e))}),r.version="2.30.1",i(zn),r.fn=us,r.min=Xn,r.max=er,r.now=tr,r.utc=p,r.unix=cs,r.months=ys,r.isDate=d,r.locale=mn,r.invalid=v,r.duration=Mr,r.isMoment=S,r.weekdays=vs,r.parseZone=ls,r.localeData=vn,r.isDuration=or,r.monthsShort=gs,r.weekdaysMin=bs,r.defineLocale=yn,r.updateLocale=gn,r.locales=wn,r.weekdaysShort=ws,r.normalizeUnits=ne,r.relativeTimeRounding=ra,r.relativeTimeThreshold=ia,r.calendarFormat=Kr,r.prototype=us,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e=navigator.userAgent.toLowerCase(),t="undefined"!==typeof opr&&!!opr.addons||navigator.userAgent.indexOf(" OPR/")>=0,r="undefined"!==typeof InstallTrigger||e.indexOf("firefox")>0&&-1===e.indexOf("chrome"),i=!r&&"undefined"!==typeof chrome&&(!!chrome.webstore||!!chrome.runtime),s=i&&-1!==navigator.userAgent.indexOf("Edg"),a={isChrome:i,isFirefox:r,isEdge:s,isOpera:t};var o=n(9051),u=n.n(o);function c(e){e&&"string"!==typeof e&&(e=e.toString());let t=new URL(e).origin;if(t&&"null"!==t)return t.endsWith("/")||(t+="/"),t}function l(e){if(!e)return e;if(e instanceof Date)return e;if("string"===typeof e&&e.indexOf("/Date(")>-1)return new Date(parseInt(e.replace("/Date(","").replace(")/",""),10));{const t=u()(e);if(t.isValid())return t.toDate()}}function d(e,t,n){return n||(e={value:e},t&&("number"===typeof t&&t>0?e.expires=o().add(t,"days").toDate():t instanceof Date?e.expires=t:o.isMoment(t)&&(e.expires=t.toDate())),e=p(e)),"object"===typeof e&&(e=p(e)),e}function h(e,t){if(t)return e;if("string"===typeof e){if(n=e,(e=JSON.parse(n,(e,t)=>t&&"string"===typeof t&&t.startsWith("/Date(")?l(t):t)).expires){o(e.expires).isBefore(new Date)&&(e.value=null)}e=e.value}var n;return e}const f=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;function p(e){return JSON.stringify(e,(e,t)=>t&&t instanceof Date?`/Date(${t.getTime()})/`:t&&"string"===typeof t&&f.test(t)?`/Date(${l(t).getTime()})/`:t)}"undefined"!==typeof chrome?chrome:"undefined"!==typeof browser&&browser;class m{constructor(e){this.$browser=e;const t={"Content-Type":"application/json"};(a.isFirefox||a.isEdge)&&(t["User-Agent"]="Chrome"),this.httpOptions={headers:t}}async execute(e,t,n,r){let i=n;"GET"===(e||"GET").toUpperCase()?i=void 0:n=void 0;const{withCredentials:s,needsPermission:a,json:o,...u}=r||{};!1===a||!1===s||await this.$browser.requestPermission(null,t)||console.warn(`Permission not granted for ${t}.`);const c={...this.httpOptions.headers,...u};!1!==o&&(c["Content-Type"]="application/json");try{const n={method:e,body:JSON.stringify(i),headers:c,credentials:!1!==s&&!1!==a?"include":"omit",referrerPolicy:"no-referrer"};{const e=await this.httpFetch(t,n);return this._processResult(e)}}catch(l){return console.error(l),Promise.reject({status:0,statusText:l.message,error:l})}}httpFetch(e,t){return fetch(e,t)}async _processResult(e){if(!e.ok){const{status:t,statusText:n,headers:r}=e,i=r.get("content-type");let s;return null!==i&&void 0!==i&&i.includes("json")&&(s=await e.json()),Promise.reject({status:t,statusText:n,error:s})}try{if(204===e.status)return{};const t=await e.text();if(!t)return{};try{return JSON.parse(t)}catch{return t}}catch(t){return Promise.reject({status:-1,statusText:t.message,error:t})}}}m.availableMethods=["execute"],m.dependencies=["AppBrowserService"];var y=n(170);const g=Symbol.for("Dexie"),v=globalThis[g]||(globalThis[g]=y);if(y.semVer!==v.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${y.semVer} and ${v.semVer}`);const{liveQuery:w,mergeRanges:b,rangesOverlap:_,RangeSet:k,cmp:S,Entity:x,PropModification:D,replacePrefix:O,add:T,remove:M,DexieYProvider:P}=v,E=v,C="https://chrome.google.com/webstore/detail/jira-assistant/momjbjbjpbcbnepbgkkiaofkgimihbii",A="https://addons.mozilla.org/en-US/firefox/addon/jira-assistant/",Y="https://microsoftedge.microsoft.com/addons/detail/aoenpdbabcjnjbjpegeenodfknllmaoi";const R=function(){const e={},t=[];for(let n=0;n<256;n++)t[n]=(n<16?"0":"")+n.toString(16);return e.generate=function(){const e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return`${t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]}-${t[255&n]}${t[n>>8&255]}-${t[n>>16&15|64]}${t[n>>24&255]}-${t[63&r|128]}${t[r>>8&255]}-${t[r>>16&255]}${t[r>>24&255]}${t[255&i]}${t[i>>8&255]}${t[i>>16&255]}${t[i>>24&255]}`},e}();new Date(parseInt("1756527907120"));const j="Instance actions",N="SYST",I="GNRL",U="ADVN",W="DBORD",F="PSET",K={openTicketsJQL:"assignee=currentUser() AND resolution=Unresolved and status != Closed",jiraUpdatesJQL:"(comment ~ currentUser() or summary ~ currentUser() or description ~ currentUser() or assignee = currentUser() or reporter = currentUser()) and updatedDate >= $date$ and (lastViewed is null or lastViewed <= $date$) order by lastViewed"};class L extends E{constructor(e,t){super("JiraAssist"),this.$message=t,this.$analytics=e,"undefined"!==typeof window&&(window.addEventListener?(window.addEventListener("unhandledrejection",e=>this.handleError(e)),window.addEventListener("rejectionhandled",e=>this.handleError(e)),window.addEventListener("error",e=>{const{error:t,filename:n,lineno:r,colno:i,message:s}=e||{},{stack:a}=t||{};this.reportError(s,n,r,i,a),this.$message.error("An unknown error occurred while processing your request","Unhandled error",!0),console.error("Global handler:-",e)})):window.onerror=(e,t,n,r,i)=>{const{stack:s}=i||{};this.reportError(e,t,n,r,s),this.$message.error("An unknown error occurred while processing your request","Unhandled error",!0),console.error(e,t,n,r,i)}),this.initDatabase()}initDatabase(){this.on("populate",this.populateSystemSettings.bind(this)),this.on("ready",this.loadSettings.bind(this)),this.version(2).stores({users:"++id,jiraUrl,userId",savedFilters:"++id,queryName,createdBy",appSettings:"[userId+category+name],[userId+category]",worklogs:"++id,createdBy,isUploaded,dateStarted,worklogId,ticketNo",events:"++id,createdBy,name,ticketNo,startTime,isEnabled,source,sourceId"}),this.open().catch(e=>{this.$analytics.trackError(e,!0),console.error(e)})}async loadSettings(){if(!this._initialized){console.log("Loading system settings");try{const t=await this.appSettings.get([1,N,"instId"]),n=await this.appSettings.get([1,U,"enableAnalyticsLogging"]),r=await this.appSettings.get([1,U,"enableExceptionLogging"]);let i=null===t||void 0===t?void 0:t.value;var e;if(!i)i=null===(e=await this.users.get(1))||void 0===e?void 0:e.instId;this.$analytics.setUserId(i),this.$analytics.setIfEnabled(!1!==(null===n||void 0===n?void 0:n.value),!1!==(null===r||void 0===r?void 0:r.value)),this._initialized=!0,console.log("Completed loading system settings")}catch(t){console.error("Error loading settings:",t)}}}async populateSystemSettings(e){console.log("Populating system settings");try{const t=R.generate();await e.users.add({id:1,jiraUrl:"SystemUser",userId:"SystemUser",dateCreated:new Date,instId:t}),await e.appSettings.add({userId:1,category:N,name:"instId",value:t}),this.$analytics.setUserId(t),this.$analytics.trackEvent("New installation",j),console.log("Completed populating system settings")}catch(t){this.reportError(t.message,"database-service.js",103,0,t.stack),console.error("Unable to initialize the database:-",t)}}reportError(e,t,n,r,i){this.$analytics.trackError({msg:e,url:t,line:n,col:r,stack:i},!0)}handleError(e){var t;const n=e.detail||e;this.$analytics.trackError(n,!1);const r=n.reason||e.reason,i=null===r||void 0===r||null===(t=r.error)||void 0===t?void 0:t.errorMessages;let s="One or more of the actions failed. Look at console for more details.";i&&Array.isArray(i)&&i.length>0&&(s=i.join(",\n")),this.$message.error(s,"Action error",!0),console.error("Unhandled rejection (promise: ",n.promise||e.promise,", reason: ",r,").")}}L.dependencies=["AnalyticsService","MessageService"];const $=L;class B{constructor(){this.handler=()=>{}}onNewMessage(e){this.handler=e}show(e,t,n,r=5e3){e&&this.handler({life:r,summary:t,detail:e,severity:n})}success(e,t){this.show(e,t,"success",4e3)}info(e,t){this.show(e,t,"info")}warning(e,t){this.show(e,t,"warn")}error(e,t,n){const r=(new Date).getTime();n&&this.lastErrorTime+500>r||(this.lastErrorTime=r,this.show(e,t,"error",6e3))}}const q={workingDays:[1,2,3,4,5],dateFormat:"dd-MMM-yyyy",timeFormat:" HH:mm:ss",minHours:8,maxHours:8,commentLength:5,startOfDay:"10:00",endOfDay:"19:00"};class H{constructor(e){this.getAllSettings=async(e,t)=>(await this.$storage.filterSettings({userId:e,category:t})).reduce((e,t)=>(e[t.name]=t.value,e),{}),this.getSetting=async(e,t,n)=>{const r=await this.$storage.getSetting(e,t,n);return null===r||void 0===r?void 0:r.value},this.getGeneralSettings=async e=>{const t=await this.getAllSettings(e,I),n={...await this.getAllSettings(1,I),...t};return n.hasGoogleCredentials=!!n.dataStore,n.hasOutlookCredentials=!!n.OLBT,n},this.getAdvancedSettings=async e=>{const t=await this.getAllSettings(e,U);let n={};1!==e&&(n=await this.getAllSettings(1,U));return{...n,...t}},this.getGeneralSetting=async(e,t)=>{let n=await this.getSetting(e,I,t);return void 0===n&&(n=await this.getSetting(1,I,t)),n||q[t]},this.getPageSettings=(e,t)=>this.getAllSettings(e,F,t),this.getDashboards=async e=>{let t=await this.$storage.filterSettings({userId:e,category:W});return t.length&&(t=t.map(({value:e})=>e).filter(Boolean)),t.length||(t=[{isQuickView:!0,layout:1,name:"Default",icon:"fa fa-tachometer",widgets:[{name:"myOpenTickets"},{name:"myBookmarks"},{name:"dateWiseWorklog"},{name:"pendingWorklog"}]}]),t},this.deleteDashboard=(e,t)=>this.$storage.deleteSetting(e,W,t),this.saveSetting=async(e,t,n,r)=>void 0===r||null===r?await this.$storage.deleteSetting(e,t,n):await this.$storage.addOrUpdateSetting({userId:e,category:t,name:n,value:r}),this.saveGeneralSetting=(e,t,n)=>this.saveSetting(e,I,t,n),this.savePageSetting=(e,t,n)=>this.saveSetting(e,F,t,n),this.set=(e,t)=>this.saveSetting(1,N,e,t),this.get=e=>this.getSetting(1,N,e),this.$storage=e}}H.dependencies=["StorageService"];const V=H;class G{constructor(e){this.$db=e}getPendingWorlogByUserId(e){return this.$db.worklogs.where("createdBy").equals(e).and(e=>!e.isUploaded).toArray()}getWorklogsWithIds(e){return this.$db.worklogs.where("id").anyOf(e).toArray()}getSingleWorklogWithId(e){return this.$db.worklogs.where("id").equals(parseInt(e)).first()}getWorklogsBetween(e,t,n){return this.$db.worklogs.where("dateStarted").between(e,t,!0,!0).and(e=>e.createdBy===n).toArray()}filterWorklogs(e){return this.$db.worklogs.where(e).toArray()}async addOrUpdateWorklog(e){return z(e),await this.$db.worklogs.put(e)}async addWorklog(e){return z(e),await this.$db.worklogs.add(e)}deleteWorklog(e){return this.$db.worklogs.delete(e)}_getReportsWithIds(e){return this.$db.savedFilters.where("id").anyOf(e)}getReportsWithIds(e){return this._getReportsWithIds(e).toArray()}getReportsByUserId(e){return this.$db.savedFilters.where("createdBy").equals(e).toArray()}getSingleReportById(e){return this.$db.savedFilters.where("id").equals(parseInt(e)).first()}filterReports(e){return this.$db.savedFilters.where(e).toArray()}getReportByNameForValidation(e,t,n){const r=(n=parseInt(n))>0?e=>e.createdBy===t&&n!==e.id:e=>e.createdBy===t;return this.$db.savedFilters.where("queryName").equals(e).and(r).first()}async addOrUpdateReport(e){return z(e),await this.$db.savedFilters.put(e)}async addReport(e){return z(e),await this.$db.savedFilters.add(e)}deleteReportsWithIds(e){return this._getReportsWithIds(e).delete()}getAllUsers(){return this.$db.users.toArray()}getUser(e){return this.$db.users.get(e)}getUserWithNameAndJiraUrl(e,t){return t=t.toLowerCase(),this.$db.users.where("userId").equalsIgnoreCase(e).and(e=>e.jiraUrl.toLowerCase()===t).first()}getUserWithEmailAndJiraUrl(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),this.$db.users.filter(n=>(n.email||"").toLowerCase()===e&&n.jiraUrl.toLowerCase()===t).first()}filterUsers(e){return this.$db.users.where(e).toArray()}async addUser(e){return z(e),await this.$db.users.add(e)}async addOrUpdateUser(e){return z(e),await this.$db.users.put(e)}async deleteUser(e){return await this.$db.users.delete(e)}filterSettings(e){return this.$db.appSettings.where(e).toArray()}getSetting(e,t,n){return this.$db.appSettings.get([e,t,n])}addOrUpdateSetting(e){return z(e),this.$db.appSettings.put(e)}bulkPutSettings(e,t){return!1!==t&&z(e),this.$db.appSettings.bulkPut(e)}deleteSetting(e,t,n){return this.$db.appSettings.delete([e,t,n])}deleteAllSettingsWithUserId(e){return this.$db.appSettings.where({userId:e}).delete()}}function z(e,t){Array.isArray(e)?e.forEach(e=>z(e,(new Date).getTime())):e._ts=t||(new Date).getTime()}G.availableMethods="getPendingWorlogByUserId,getWorklogsWithIds,getSingleWorklogWithId,getWorklogsBetween,filterWorklogs,addOrUpdateWorklog,addWorklog,deleteWorklog,getReportsWithIds,getReportsByUserId,getSingleReportById,filterReports,getReportByNameForValidation,addOrUpdateReport,addReport,deleteReportsWithIds,getAllUsers,getUser,getUserWithNameAndJiraUrl,getUserWithEmailAndJiraUrl,filterUsers,addUser,addOrUpdateUser,deleteUser,filterSettings,getSetting,addOrUpdateSetting,bulkPutSettings,deleteSetting,deleteAllSettingsWithUserId",G.dependencies=["DatabaseService"];class Z{}class J extends Z{constructor(e,t){super(),this.$storage=e,this.$settings=t}async getCurrentTimer(){const e=await this.$settings.get("WLTimer");return this.validateIFDayPast(e)}async validateIFDayPast(e){if(!e)return;const t=o().startOf("day"),{created:n}=e,r=o(n);if(!r.isBefore(t))return e;const{userId:i,key:s,description:a,started:u}=e,c=Q(await this.$settings.getGeneralSetting(i,"endOfDay")),l=o(r).set(c);if(await this.stopTimerAndCreateWorklog(e,l.toDate().getTime()),!u)return;const d=Q(await this.$settings.getGeneralSetting(i,"startOfDay"));let h=o().set(d).toDate().getTime();const f=(new Date).getTime();h=h>f?f:h;const p={userId:i,key:s,description:a,lapse:0,started:h,created:h};return await this.$settings.set("WLTimer",p),p}async startTimer(e,t,n,r){let i=await this.getCurrentTimer();if(i&&r)await this.stopTimer(i.userId,i.key);else if(i)return{isActive:!0,entry:i};const s=(new Date).getTime();return i={userId:e,key:t,created:s,started:s,lapse:0,description:n},await this.$settings.set("WLTimer",i),i}async editTrackerInfo(e,t,n){var r;e=null===(r=e)||void 0===r?void 0:r.trim().toUpperCase();const i=await this.getCurrentTimer(),s=o().startOf("day");return t=t&&o(t).isBetween(s,new Date,void 0,"[]")?t.getTime():void 0,i.key=e||i.key,i.created=t||i.created,i.description=n||i.description,await this.$settings.set("WLTimer",i),i}async pauseTimer(e){const t=await this.getCurrentTimer();if(null===t||void 0===t||!t.started)return!1;const{started:n}=t,r=(new Date).getTime();if(n>=r)throw new Error("Time mismatch: System time has changed since timer has started");const i=r-n;return t.lapse+=i,delete t.started,e&&(t.autoPaused=!0),await this.$settings.set("WLTimer",t),t}async resumeTimer(e){const t=await this.getCurrentTimer();return!(!t||t.started||e&&!t.autoPaused)&&(t.started=(new Date).getTime(),delete t.autoPaused,await this.$settings.set("WLTimer",t),t)}async stopTimer(e,t){const n=await this.getCurrentTimer();return!!n&&(e&&t&&(n.userId!==e||n.key!==t)?{invalidEntry:!0,entry:n}:this.stopTimerAndCreateWorklog(n,(new Date).getTime()))}async stopTimerAndCreateWorklog(e,t){const{started:n}=e;if(n>0){if(n>=t){if(n>=(new Date).getTime())throw await this.$settings.set("WLTimer",null),new Error("Time mismatch: System time has changed since timer has started");t=o(n).endOf("day").toDate().getTime()}const r=t-n;e.lapse+=r,delete e.started}let r=parseInt(Math.round(e.lapse/6e4));if(r>=function(e){const t=Q(e);if(!t)return 0;return 60*t.hour+t.minute}(await this.$settings.get("TR_MinTime"))){const t=await this.$settings.get("TR_RoundTime")||5,n=await this.$settings.get("TR_RoundOpr");if(n&&Math[n]&&(r=parseInt(Math.max(1,Math[n](r/t))*t)),r>=1){const t=Math.floor(r/60),n=Math.floor(r%60),i=`${t.pad(2)}:${n.pad(2)}`;await this.$storage.addWorklog({timeSpent:i,ticketNo:e.key,isUploaded:!1,createdBy:e.userId,dateStarted:new Date(e.created),description:e.description})}}return await this.$settings.set("WLTimer",null),!0}}function Q(e){if(!e)return;const t=e.split(":");return{hour:parseInt(t[0]),minute:parseInt(t[1]),second:0,millisecond:0}}J.dependencies=["StorageService","SettingsService"];const X=function(){const e={},t={isSingleton:!0,retain:!1},n={getRef:function(t){if(!t)throw Error("Service name is required to resolve it");if("string"!==typeof t)throw Error("Service name must be a string");t=t.trim();let n=e[t];if(n||-1!==t.indexOf("Service")||(n=e[`${t}Service`]),!n)throw Error(`'${t}' is not a known service`);return n},resolve:function(e,t,r){const i=n.getRef(e);if(i.isSingleton&&i.instance)return i.instance;if(r&&!i.isSingleton)throw new Error(`"${e}" is not a singleton service. Source: ${t[t.length-1]}`);let s=null;if(i.dependency){const e=i.dependency.length,r=new Array(e+1);r[0]=i.type;for(let s=0;s<e;s++){const e=i.dependency[s],a=t?[...t,e]:[e];if(t&&t.indexOf(e)>-1)throw new Error(`Circular dependency not supported. Error resolving: ${a.join("->")}`);r[s+1]=n.resolve(e,a,i.isSingleton)}s=new(i.type.bind.apply(i.type,r))}else s=new i.type;return i.isSingleton&&(i.instance=s),s},injectable:function(e,t,r,i){return n.addService(t,e,r,e.dependencies,i),e},inject:function(e,t){t.forEach(t=>{const r=n.getRef(t);e[r.defaultName]=n.resolve(t)})},clearInstances:function(){Object.keys(e).forEach(t=>delete e[t].instance)},addService:function(n,r,i,s,a){var o;if(!n)throw Error("Service name is required to resolve it");if("string"!==typeof n)throw Error("Service name must be a string");if(s=s||r.dependencies){if(!Array.isArray(s))throw Error("Dependencies must be an array with the name of services");0===s.length&&(s=null)}n=n.trim(),a={...t,...a};const u=null===(o=e[n])||void 0===o?void 0:o.instance;if(e[n]={isSingleton:a.isSingleton,retain:a.retain,type:r,instance:null,dependency:s,name:n,defaultName:i},u){const t=Object.keys(e);for(const n of t){const t=e[n];t.instance&&!t.retain&&delete t.instance}}}};return n}();function ee(e,t,n,r){return X.injectable(e,t,n,r)}function te(e,...t){return"string"===typeof e&&(t.splice(0,0,e),e={}),!t.length&&Array.isArray(e)&&(t=e,e={}),e||(e={}),X.inject(e,t),e}class ne{async requestPermission(){return!0}getPermissionObj(e,...t){e||(e=["tabs"]);const n={permissions:e};return t&&t.length&&(n.origins=t.map(c)),n}async hasPermission(){return!0}async getLaunchUrl(){return""}persistBackground(){}connectAndKeepAlive(){}}ne.availableMethods="getCurrentUrl,getCurrentTab,hasPermission,requestPermission,getPermissionObj,replaceTabUrl,getAuthToken,getRedirectUrl,getLaunchUrl,launchWebAuthFlow,removeAuthTokken,extractAccessToken";const re=ne;class ie extends re{constructor(){super(),this.attachToClient=e=>{if(e&&this.activePorts){const t=this.activePorts.indexOf(e);~t&&this.activePorts.splice(t)}},this.chrome=chrome}async getCurrentUrl(){return await this.hasPermission({permissions:["activeTab"]})?new Promise((e,t)=>{this.chrome.tabs.query({active:!0,lastFocusedWindow:!0},n=>{n&&n[0]&&n[0].url?e(n[0].url):t("Unable to fetch the url")})}):(console.log("Jira Assistant do not have access to retrive the current url"),"")}async getCurrentTab(){return await this.hasPermission({permissions:["activeTab"]})?new Promise((e,t)=>{this.chrome.tabs.query({active:!0,lastFocusedWindow:!0},n=>{n&&n[0]?e(n[0]):t("Unable to fetch the tab")})}):(console.log("Jira Assistant do not have access to retrive current tab"),null)}hasPermission(e){return new Promise(t=>{this.chrome.permissions.contains(e,t)})}async requestPermission(e,...t){try{const n=this.getPermissionObj(e,...t);return!!await this.hasPermission(n)||(console.log("Requesting permission for: ",n),new Promise(e=>{this.chrome.permissions.request(n,e)}))}catch(n){return Promise.reject(n)}}async registerContentScripts(e,t,n){return await this.chrome.scripting.registerContentScripts([{id:e,js:t,matches:n,runAt:"document_end",allFrames:!0}])}replaceTabUrl(e){return this.getCurrentTab().then(t=>this.chrome.tabs.update(t.id,{url:e})).catch(()=>this.openTab(e))}openTab(e,t,n){window.open(e,t,n)}getAuthToken(e){return new Promise((t,n)=>{this.chrome.identity.getAuthToken(e,e=>{this.chrome.runtime.lastError||!e?(console.error("GCalendar intergation failed",e,this.chrome.runtime.lastError.message),n({error:this.chrome.runtime.lastError,tokken:e})):t(e)})})}getRedirectUrl(e){return this.chrome.identity.getRedirectURL(e)}launchWebAuthFlow(e){return new Promise(t=>{this.chrome.identity.launchWebAuthFlow(e,t)})}removeAuthTokken(e){this.chrome.identity.removeCachedAuthToken({token:e},()=>{})}getStoreUrl(e){return C+(e?"/reviews":"")}extractAccessToken(e){const t=e.match(/[#?](.*)/);if(!t||t.length<1)return null;return new URLSearchParams(t[1].split("#")[0]).get("access_token")}getLaunchUrl(e){return Promise.resolve(this.chrome.runtime.getURL(e))}persistBackground(e){try{e&&(this.activePorts=this.activePorts||[],this.listeningForPorts||(this.listeningForPorts=!0,chrome.runtime.onConnect.addListener(e=>{var t;this.activePorts.push(e),console.log("New client connected. Total Alive:",null===(t=this.activePorts)||void 0===t?void 0:t.length),e.onMessage.addListener(e=>{console.log("Message on port:",e)}),e.onDisconnect.addListener(this.attachToClient),console.log("Attached keep-alive listener",this.listeningForPorts,this.activePorts)}),this.attachToClient()))}catch(t){console.error("Error trying to persist background pages:",t)}}connectAndKeepAlive(e){try{this.clientPort&&(this.clientPort.disconnect(),this.clientPort=null);const t=chrome.runtime.connect({name:"keep-alive"});t.onMessage.addListener(()=>{e&&e()}),this.clientPort=t,t.postMessage("keep-alive"),t.onDisconnect.addListener(()=>setTimeout(()=>this.connectAndKeepAlive(e),2e4)),console.log("Keeping SW alive",new Date)}catch(t){console.log("Unable to keep-alive",t)}}}class se extends re{constructor(){super(),this.chrome=chrome,this.browser=browser}getCurrentUrl(){return new Promise((e,t)=>{this.chrome.tabs.query({active:!0,lastFocusedWindow:!0},n=>{n&&n[0]&&n[0].url?e(n[0].url):t("Unable to fetch the url")})})}getCurrentTab(){return new Promise((e,t)=>{this.chrome.tabs.query({active:!0,lastFocusedWindow:!0},n=>{n&&n[0]?e(n[0]):t("Unable to fetch the tab")})})}async registerContentScripts(e,t,n){return await this.browser.scripting.registerContentScripts([{id:e,js:t,matches:n,persistAcrossSessions:!1,runAt:"document_end",allFrames:!0}])}replaceTabUrl(e){return this.getCurrentTab().then(t=>this.chrome.tabs.update(t.id,{url:e})).catch(()=>this.openTab(e))}openTab(e,t,n){t?window.open(e,t,n):this.browser.tabs.create({url:e})}getAuthToken(e){const t=this.browser.identity.getRedirectURL(),n=`https://accounts.google.com/o/oauth2/auth?client_id=692513716183-jm587gc534dvsere4qhnk5bj68pql3p9.apps.googleusercontent.com&response_type=token&redirect_uri=${encodeURIComponent(t)}&scope=${encodeURIComponent(["https://www.googleapis.com/auth/calendar.readonly"].join(" "))}`;return this.browser.identity.launchWebAuthFlow({interactive:e.interactive,url:n}).then(e=>this.extractAccessToken(e))}getRedirectUrl(e){return this.chrome.identity.getRedirectURL(e)}launchWebAuthFlow(e){return new Promise(t=>{this.chrome.identity.launchWebAuthFlow(e,t)})}removeAuthTokken(e){this.browser.identity.removeCachedAuthToken({token:e},()=>{})}getStoreUrl(e){return A}extractAccessToken(e){const t=e.match(/[#?](.*)/);if(!t||t.length<1)return null;return new URLSearchParams(t[1].split("#")[0]).get("access_token")}getLaunchUrl(e){return Promise.resolve(this.browser.runtime.getURL(e))}}class ae extends ie{getStoreUrl(){return Y}}class oe{setIfEnabled(){}trackEvent(){}trackError(){}setUserId(){}trackPageView(){}}const ue={AjaxRequestService:"$request",AppBrowserService:"$jaBrowserExtn",StorageService:"$storage",WorklogTimerService:"$wltimer",SettingsService:"$settings"};n(2681);const ce=["SELF","WorklogTimerService","SettingsService"];a.isEdge?(console.log("Edge Browser service injected"),ee(ae,"AppBrowserService","$jaBrowserExtn",{isSingleton:!0})):a.isFirefox?(console.log("Firefox Browser service injected"),ee(se,"AppBrowserService","$jaBrowserExtn",{isSingleton:!0})):(console.log("Chrome Browser service injected"),ee(ie,"AppBrowserService","$jaBrowserExtn",{isSingleton:!0})),ee(m,"AjaxRequestService","$request",{isSingleton:!0}),ee($,"DatabaseService","$db",{isSingleton:!0}),ee(B,"MessageService","$message",{isSingleton:!0}),ee(V,"SettingsService","$settings",{isSingleton:!0}),ee(G,"StorageService","$storage",{isSingleton:!0}),ee(J,"WorklogTimerService","$wltimer",{isSingleton:!0}),ee(oe,"AnalyticsService","$analytics",{isSingleton:!0});const le={};function de(e,t,n){const r={sender:t,message:e};he("Received request from ",r);let i=t.origin;if(!i&&t.url&&(i=new URL(t.url).origin),i=i.toLowerCase(),i.endsWith(".jiraassistant.com")||ce.includes(e.svcName))return async function(e,t,n){const r={messages:[]};n.response=r;try{const{svcName:t,action:n}=e,i=h(e.args);if("SELF"===t)switch(n){case"VERSION":r.success=await Promise.resolve(2.62);break;case"IS_INTEGRATED":const{$storage:e}=le,{value:t}=await e.getSetting(1,N,"CurrentUserId")||{};r.success=t>0;break;case"RELOAD":me();break;case"GET_CS_SETTINGS":r.success=await async function(e){const t={},n=await le.$storage.filterUsers({jiraUrl:e});1===n.length&&(t.userId=n[0].id,t.jiraUrl=n[0].jiraUrl);const r=await le.$wltimer.getCurrentTimer();r&&r.userId===t.userId&&(t.timerKey=r.key,t.timerStarted=r.started,t.timerLapse=r.lapse);return t.attachDelay=1e3*parseInt(await le.$settings.get("TR_CSDelay"))||2e3,t.showTimer=!1!==await le.$settings.get("TR_ShowTimer"),t.keepAlive=pe.TR_PauseOnLock||pe.TR_PauseOnIdle,t}(i[0]);break;default:throw new Error(`Unsupported command: ${n}`)}else{const{$message:e,[ue[t]]:s}=le;e.onNewMessage(e=>r.messages.push(e)),r.success=d(await s[n].apply(s,i))}}catch(i){const{message:e,status:t,statusText:n,error:s}=i;r.error=d({message:e,status:t,statusText:n,error:s}),function(){console.error(...arguments)}(i)}t(r),n.sent=!0}(e,n,r),!0;he("Denied to serve request from unknown origin: ",e,t.origin)}function he(){console.log(...arguments)}te(le,"AjaxRequestService","AppBrowserService","StorageService","SettingsService","MessageService","WorklogTimerService"),function(){chrome.runtime.onMessageExternal.addListener(de),"undefined"!==typeof browser&&browser.runtime?browser.runtime.onMessage.addListener(de):chrome.runtime.onMessage.addListener(de);me(),console.log("Started listening for incomming requests",new Date)}();let fe=!1;const pe={};async function me(){if(chrome.idle){const e=await le.$settings.get("TR_PauseOnLock"),t=await le.$settings.get("TR_PauseOnIdle");pe.TR_PauseOnLock=e,pe.TR_PauseOnIdle=t,e||t?fe||(chrome.idle.onStateChanged.addListener(ye),fe=!0,he("Listening for system state changes")):fe&&(chrome.idle.onStateChanged.removeListener(ye),fe=!1,he("Deregistered listening to system state")),le.$jaBrowserExtn.persistBackground(t||e)}if(chrome.scripting){if(!1!==await le.$settings.get("TR_AttachCS")){const e=await le.$storage.getAllUsers(),t=(await Promise.all(e.map(async e=>{if(1===e.id)return null;const t=`${e.jiraUrl.clearEnd("/")}/*`;return await le.$jaBrowserExtn.hasPermission(le.$jaBrowserExtn.getPermissionObj(null,t))?t:void 0}))).filter(Boolean);await chrome.scripting.unregisterContentScripts(),t.length&&(he("Attaching CS for ",t),await le.$jaBrowserExtn.registerContentScripts("jira-plugin",["/static/js/jira_cs.js"],t))}else await chrome.scripting.unregisterContentScripts()}}async function ye(e){switch(he("System state changed to ",e),null===e||void 0===e?void 0:e.toLowerCase()){case"idle":pe.TR_PauseOnIdle&&await le.$wltimer.pauseTimer(!0);break;case"locked":pe.TR_PauseOnLock&&await le.$wltimer.pauseTimer(!0);break;case"active":await le.$wltimer.resumeTimer(!0);break;default:console.warning("Unknown system state received:-",e)}}})()})();