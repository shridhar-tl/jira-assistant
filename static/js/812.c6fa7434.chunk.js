"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[431,812],{1427:(e,t,s)=>{s.d(t,{VP:()=>m,QC:()=>g,ew:()=>h,vc:()=>u,D1:()=>p,lO:()=>x});var i=s(9950),n=s(8738),a=s.n(n),l=s(8981),r=s(4414);const o=(0,i.createContext)({}),d="sortChanged",c="dataChanged";class h extends i.PureComponent{constructor(e){super(e),this.sharedProps={getData:()=>this.state.dataset,sortBy:e=>{let{isDesc:t}=this.state;if(t=e===this.state.sortBy&&!t,!e)return this.state.sortBy;{let{dataset:s}=this.state;if(s){let i=!1;this.props.onSort&&(i=this.props.onSort(e,t)),i||(s=s.sortBy(e,t),this.setState({dataset:s,sortBy:e,isDesc:t}),this.eventEmitter.emit(d,e,t))}}},getSortedField:()=>{const{sortBy:e,isDesc:t}=this.state;return{sortBy:e,isDesc:t}},onDataChanged:e=>(this.eventEmitter.on(c,e),()=>this.eventEmitter.off(c,e)),onSortFieldChanged:e=>(this.eventEmitter.on(d,e),()=>this.eventEmitter.off(d,e)),getScrollTop:()=>{var e;return(null===(e=this.container)||void 0===e?void 0:e.scrollTop)||0}},this.setContainer=e=>this.container=e,this.eventEmitter=new l.EventEmitter,this.eventEmitter.setMaxListeners(400),this.actualDataset=e.dataset,this.state={dataset:e.dataset,sortBy:e.sortBy,isDesc:e.isDesc}}UNSAFE_componentWillReceiveProps(e){const{dataset:t,sortBy:s,isDesc:i}=e;t!==this.actualDataset&&(this.actualDataset=t,this.setState({dataset:t,sortBy:s,isDesc:i}),this.eventEmitter.emit(c,e.dataset)),s===this.state.sortBy&&i===this.state.isDesc||(this.setState({dataset:t,sortBy:s,isDesc:i}),this.eventEmitter.emit(d,s,i))}render(){const{className:e,style:t,children:s,exportable:i,exportSheetName:n,height:l,containerStyle:d}=this.props;return(0,r.jsx)("div",{className:a()("scroll-table-container",e),style:d||{height:l},ref:this.setContainer,children:(0,r.jsx)(o.Provider,{value:this.sharedProps,children:(0,r.jsx)("table",{ref:e=>this.table=e,"export-sheet-name":n,className:a()("scroll-table",e,!1!==i?"exportable":null),style:t,children:s})})})}}class p extends i.PureComponent{constructor(...e){super(...e),this.state={},this.setRef=e=>this.el=e}componentDidMount(){this.componentDidUpdate()}componentDidUpdate(){this.el.querySelectorAll("tr:not(:first-child)").forEach((e,t)=>{const s=e.querySelectorAll("th");this.setScrollTop(s,31*(t+1))})}setScrollTop(e,t){const s=this.context.getScrollTop();e.forEach(e=>{const i=e.offsetTop&&s&&e.offsetTop>s?e.offsetTop-s:e.offsetTop;e.style.top=`${i||t}px`})}render(){const{className:e,style:t,children:s}=this.props;return(0,r.jsx)("thead",{ref:this.setRef,className:e,style:t,exportignore:this.props.exportIgnore||void 0,children:s})}}p.contextType=o;class u extends i.PureComponent{componentDidMount(){this.cleanup=this.context.onSortFieldChanged((e,t)=>{this.setState({sortBy:e,isDesc:t})})}componentWillUnmount(){this.cleanup()}render(){const{children:e,className:t,style:s}=this.props,i=this.context.getData();let n=null;return i&&0===i.length?null:(n="function"===typeof e?i&&i.length>0&&i.map(e):e,(0,r.jsx)("tbody",{className:t,style:s,children:n}))}}u.contextType=o;class g extends i.PureComponent{constructor(...e){super(...e),this.state={hasRows:!1}}componentDidMount(){const e=this.context.getData();this.setState({hasRows:!(!e||!e.length)}),this.cleanup=this.context.onDataChanged(e=>this.setState({hasRows:!(!e||!e.length)}))}componentWillUnmount(){this.cleanup()}render(){if(this.state.hasRows)return null;const{children:e,span:t}=this.props;return(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:t,children:e})})})}}g.contextType=o;class x extends i.PureComponent{render(){return(0,r.jsx)("tr",{...this.props})}}x.contextType=o;class m extends i.PureComponent{constructor(...e){super(...e),this.state={},this.onClick=e=>{this.context.sortBy(this.props.sortBy)}}componentDidMount(){this.setState(this.context.getSortedField()),this.cleanup=this.context.onSortFieldChanged((e,t)=>{this.setState({sortBy:e,isDesc:t})})}componentWillUnmount(){this.cleanup()}render(){const{sortBy:e,isDesc:t}=this.state,{style:s,sortBy:i,children:n,noExport:a,rowSpan:l,colSpan:o,dragConnector:d}=this.props;let{className:c}=this.props;return c||(c=""),i&&(c+=" sortable"),(0,r.jsxs)("th",{ref:d,className:c,style:s,onClick:this.onClick,"no-export":a?"true":null,rowSpan:l,colSpan:o,children:[n," ",i?i===e?(0,r.jsx)("i",{className:"fa fa-sort-"+(t?"desc":"asc")}):(0,r.jsx)("i",{className:"fa fa-sort"}):null]})}}m.contextType=o},2812:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var i,n,a=s(9950),l=s(8738),r=s.n(l),o=s(9786),d=s(1427),c=s(5006),h=s(1219),p=s(6778),u=s(4922),g=s(4190),x=s(8615),m=s(5620),f=s(4414);const j=!1!==o.A.features.header.devUpdates,y=!1!==o.A.features.common.analytics,v=!1!==o.A.features.common.allowWebVersion,S=!1!==(null===(i=o.A.features)||void 0===i||null===(n=i.header)||void 0===n?void 0:n.jiraUpdates);class b extends a.PureComponent{constructor(e){super(e),this.setValue=(e,t,s)=>{let{users:i,intgUsers:n}=this.state;i=[...i];const a=i.indexOf(s);s={...s},i[a]=s,a>0&&(n=[...n],n[a-1]=s),"string"===typeof e&&(e="jiraUrl"===t?e.trim().clearEnd("/"):e.trim()||void 0),s[t]=e,void 0===s[t]&&delete s[t],this.setState({users:i,intgUsers:n})},this.saveSettings=()=>{const{users:e}=this.state;this.$user.saveGlobalSettings(e).then(()=>{this.loadSettings(),this.$message.success("Settings saved successfully. Some changes will reflect only after you refresh the page.")})},this.toggleDelete=e=>{e.deleted?this.setValue(!1,"deleted",e):x.A.confirmDelete((0,f.jsxs)(f.Fragment,{children:["Are you sure to delete the selected integration? ",(0,f.jsx)("br",{}),(0,f.jsx)("br",{}),"This would also delete all the associated data like local Worklogs, Custom Reports, etc."]}),"Confirm delete integration",void 0,{waitFor:8}).then(()=>this.setValue(!0,"deleted",e))},(0,c.WQ)(this,"UserService","SettingsService","MessageService"),this.state={users:[],intgUsers:[]}}componentDidMount(){this.loadSettings()}async loadSettings(){let e=await this.$user.getAllUsers();e=await Promise.all(e.map(async e=>{const{id:t,userId:s,jiraUrl:i,email:n,lastLogin:a}=e;return{id:t,userId:s,jiraUrl:i,email:n,lastLogin:a,...await this.$settings.getAllSettings(e.id,u.wh.Advanced)}})),e[0].useWebVersion=await this.$settings.get("useWebVersion"),this.setState({users:e,intgUsers:e.slice(1)})}render(){const{state:{users:e,intgUsers:t}}=this;return(0,f.jsxs)("div",{className:"global-settings",children:[(0,f.jsxs)(d.ew,{children:[(0,f.jsx)("caption",{children:"Advanced settings"}),(0,f.jsxs)(d.D1,{children:[(0,f.jsxs)(d.lO,{children:[(0,f.jsx)(d.VP,{rowSpan:2,children:"Settings"}),(0,f.jsx)(d.VP,{colSpan:e.length,children:"Instances"})]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)(d.VP,{children:"Default"}),t.map(e=>(0,f.jsxs)(d.VP,{children:[(0,h.UW)(e.jiraUrl),!m.mx&&(0,f.jsx)("span",{className:r()("fa float-end delete-account",e.deleted?"fa-undo":"fa-trash"),title:e.deleted?"Undo delete":"Delete this integration",onClick:()=>this.toggleDelete(e)})]},e.id))]})]}),(0,f.jsxs)(d.vc,{children:[(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Integrated on"}),(0,f.jsx)("td",{children:"N/A"}),t.map(e=>(0,f.jsx)("td",{children:e.lastLogin.format("dd-MMM-yyyy HH:mm:ss")},e.id))]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Jira Server Url"}),(0,f.jsx)("td",{children:"N/A"}),t.map(e=>{var t;return(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{placeholder:"e.g. https://jira.companysite.com",value:null===(t=e.jiraUrl)||void 0===t?void 0:t.toString(),args:e,field:"jiraUrl",onChange:this.setValue,disabled:e.deleted})},e.id)})]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Jira User id"}),(0,f.jsx)("td",{children:"N/A"}),t.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{placeholder:"User id of Jira",value:e.userId,args:e,field:"userId",onChange:this.setValue,disabled:e.deleted})},e.id))]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Email id"}),(0,f.jsx)("td",{children:"N/A"}),t.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{placeholder:"Email id of Jira",value:e.email,args:e,field:"email",onChange:this.setValue,disabled:e.deleted})},e.id))]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Open tickets JQL"}),e.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{multiline:!0,placeholder:u.L6.openTicketsJQL,readOnly:e.id===g.gq,value:e.id===g.gq?u.L6.openTicketsJQL:e.openTicketsJQL||"",args:e,field:"openTicketsJQL",onChange:this.setValue,disabled:e.deleted})},e.id))]}),(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Ticket suggestions JQL"}),(0,f.jsx)("td",{children:"N/A"}),t.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{multiline:!0,placeholder:"Provide custom JQL used to filter issues for picker",value:e.suggestionJQL||"",args:e,field:"suggestionJQL",onChange:this.setValue,disabled:e.deleted})},e.id))]}),S&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Disable Jira issue updates"}),e.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.Sc,{checked:e.disableJiraUpdates,args:e,field:"disableJiraUpdates",onChange:this.setValue,disabled:e.deleted,label:"Disable Jira issue updates",title:"Do not show updates about changes for any issues happend in Jira"})},e.id))]}),S&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Jira updates JQL (used to fetch updates from Jira)"}),e.map(e=>(0,f.jsx)("td",{children:(0,f.jsx)(p.fI,{multiline:!0,placeholder:u.L6.jiraUpdatesJQL,readOnly:e.id===g.gq,disabled:e.disableJiraUpdates||e.deleted,value:e.id===g.gq?u.L6.jiraUpdatesJQL:e.jiraUpdatesJQL||"",args:e,field:"jiraUpdatesJQL",onChange:this.setValue})},e.id))]}),v&&!!e[0]&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Use Jira Assistant Web version"}),(0,f.jsx)("td",{colSpan:t.length+1,children:(0,f.jsx)(p.Sc,{checked:e[0].useWebVersion,args:e[0],field:"useWebVersion",onChange:this.setValue,label:"Opt to always use Web build with latest updates and fixes"})})]}),y&&!!e[0]&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Enable tracking user actions (Anonymous, Google Analytics)"}),(0,f.jsx)("td",{colSpan:t.length+1,children:(0,f.jsx)(p.Sc,{checked:!1!==e[0].enableAnalyticsLogging,args:e[0],field:"enableAnalyticsLogging",onChange:this.setValue,label:"Help developers to identify what features are being used much"})})]}),y&&!!e[0]&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Enable tracking exceptions (Anonymous)"}),(0,f.jsx)("td",{colSpan:t.length+1,children:(0,f.jsx)(p.Sc,{checked:!1!==e[0].enableExceptionLogging,args:e[0],field:"enableExceptionLogging",onChange:this.setValue,label:"Help developers to identify what errors occur for users and would help in fixing it soon"})})]}),j&&!!e[0]&&(0,f.jsxs)(d.lO,{children:[(0,f.jsx)("td",{children:"Disable notifications from developer"}),(0,f.jsx)("td",{colSpan:t.length+1,children:(0,f.jsx)(p.Sc,{checked:e[0].disableDevNotification,args:e[0],field:"disableDevNotification",onChange:this.setValue,label:"Do not show important information's and bug notifications from developer"})})]})]})]}),(0,f.jsxs)("div",{className:"footer",children:[(0,f.jsx)(p.$n,{className:"float-end",icon:"fa fa-save",label:"Save settings",type:"primary",onClick:this.saveSettings}),(0,f.jsx)("strong",{children:"Important Note:"}),(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"In the table, the JQL under the 1st (Default) column is non-editable and serves as default information. You can modify the JQL for each integration, starting from the second column onward."}),(0,f.jsx)("li",{children:"Changing these settings may have consequences for application stability or data integrity. Please exercise caution when making adjustments."}),(0,f.jsx)("li",{children:"Some settings may require a refresh or reopening of Jira Assistant to take effect."})]})]})]})}}const D=b}}]);