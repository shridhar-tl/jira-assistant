"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[671],{3052:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Ce});var n=i(9950),s=i(2591),l=i(9786),a=i(5006),r=i(9779),o=i(6778),u=i(4922),c=i(4414);const d=["Su","Mo","Tu","We","Th","Fr","Sa"];function h({field:e,value:t,onChange:i}){const n=t||h.defaultSelection||[];return(0,c.jsx)("div",{className:"days-in-week",children:d.map(((t,s)=>{return(0,c.jsx)("div",{className:(l=s,n.includes(l)?"day day-on":"day"),onClick:()=>(t=>{let s=n;s=s.includes(t)?s.filter((e=>e!==t)):s.concat(t).sort(),i(s,e)})(s),children:t},t);var l}))})}const m=h;h.defaultSelection=u.K3;var p=i(1219);class g extends n.PureComponent{constructor(e){super(e),this.saveSetting=(e,t)=>this.props.onSave(e,t),this.saveIntSetting=(e,t)=>{e=parseInt(e),isNaN(e)||this.saveSetting(e,t)},(0,a.WQ)(this,"SettingsService","SessionService")}}const f=g;var v=i(5620);const x=[{val:0,label:"Default"},{val:1,label:"Sunday"},{val:2,label:"Monday"},{val:3,label:"Tuesday"},{val:4,label:"Wednesday"},{val:5,label:"Thursday"},{val:6,label:"Friday"},{val:7,label:"Saturday"}];const b=class extends f{constructor(e){super(e),this.setStartOfweek=(e,t)=>{e=parseInt(e),this.saveSetting(e,t),(0,p.Yz)(e)},this.toggleDonateMenu=(e,t)=>{const i=this.$session.CurrentUser;i.hideDonateMenu=this.props.noDonations||e,this.saveSetting(e,t),i.hideDonateMenu?document.body.classList.add("no-donation"):document.body.classList.remove("no-donation")},(0,a.WQ)(this,"UtilsService"),this.state={settings:e.settings};const t=new Date;this.dateFormats=u.zg.map((e=>({format:e,text:this.$utils.formatDate(t,e)}))),this.timeFormats=u.gv.map((e=>({format:e,text:this.$utils.formatDate(t,e)})))}render(){const{dateFormats:e,timeFormats:t,props:{noDonations:i,settings:n}}=this;return(0,c.jsxs)("div",{className:"form-horizontal",children:[(0,c.jsx)("div",{className:"form-label ui-g-12",children:(0,c.jsx)("strong",{children:"Display Date and Time format"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{className:"form-control select",dataset:e,value:n.dateFormat,valueField:"format",displayField:"text",field:"dateFormat",onChange:this.saveSetting,style:{width:"180px",display:"inline-block"}}),(0,c.jsx)(o.aL,{className:"form-control select",dataset:t,value:n.timeFormat,valueField:"format",displayField:"text",field:"timeFormat",onChange:this.saveSetting,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Select your preferred date and time format to be displayed throughout the application"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Displayed hours"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(r.N,{mask:"99:99",value:n.startOfDayDisp,onChange:e=>this.saveSetting(e.value,"startOfDayDisp"),placeholder:u.je,maxLength:5,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)(r.N,{mask:"99:99",value:n.endOfDayDisp,onChange:e=>this.saveSetting(e.value,"endOfDayDisp"),placeholder:u.qU,maxLength:5,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Select your displayed hours range for calendar between 00:00 to 23:00 (24 hours format)"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Working hours"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(r.N,{mask:"99:99",value:n.startOfDay,onChange:e=>this.saveSetting(e.value,"startOfDay"),placeholder:u.je,maxLength:5,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)(r.N,{mask:"99:99",value:n.endOfDay,onChange:e=>this.saveSetting(e.value,"endOfDay"),placeholder:u.qU,maxLength:5,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Select your working hours range between 00:00 to 23:00 (24 hours format)"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Working days"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(m,{value:n.workingDays,field:"workingDays",onChange:this.saveSetting}),(0,c.jsx)("span",{className:"help-block",children:"Select the days in week you would be working"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Start of week"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{dataset:x,className:"form-control select",valueField:"val",displayField:"label",value:n.startOfWeek,field:"startOfWeek",onChange:this.setStartOfweek,style:{width:180,display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Select the starting day of your week. If nothing is selected then default will be taken"})]})}),!i&&(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Donate / contribute to us"})}),!i&&(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("div",{children:(0,c.jsx)(o.Sc,{checked:n.hideDonateMenu,field:"hideDonateMenu",onChange:this.saveSetting,label:"Hide Donate button in header"})}),(0,c.jsx)("div",{children:(0,c.jsx)("a",{href:v.zM?`/${this.props.userId}/contribute`:`/index.html#/${this.props.userId}/contribute`,title:"Would you like to contribute / compensate us for the effort we put in development of this tool? Click to know more",children:(0,c.jsx)("img",{src:"/assets/donate.png",width:145,className:"Donate us",alt:"Donate us"})})}),(0,c.jsx)("span",{className:"help-block",children:"You have the option to hide the donation button/menu within the tool. However, we kindly encourage you to consider making a voluntary contribution of your choice before choosing to hide it"})]})})]})}};var y=i(8874),j=i(2593),S=i(7698);const k=!v.mx&&(!v.zM||"1"===localStorage.getItem("authType")),w=[{value:"5",label:"5 Minutes"},{value:"10",label:"10 Minutes"},{value:"15",label:"15 Minutes"},{value:"30",label:"30 Minutes"},{value:"60",label:"1 Hour"}],N=[{value:"",label:"No Rounding"},{value:"round",label:"Closest value"},{value:"ceil",label:"Upper bound"},{value:"floor",label:"Lower bound"}];const C=class extends f{constructor(e){super(e),this.saveSettingAndReload=async(e,t)=>{await this.saveSetting(e,t);try{await(0,j.LQ)("SELF","RELOAD",[],this.$message)}catch(i){this.$message.error("This settings would work only with JA extension v2.41 or above.","Unsupported Settings"),console.log("Error reloading settings:",i)}},this.saveSetting=async(e,t)=>{this.setState({[t]:e}),await this.$settings.set(t,e)},(0,y.WQ)(this,"SettingsService","AppBrowserService","MessageService"),this.state={},this.loadSettings()}async loadSettings(){const e=await this.$settings.get("TR_PauseOnLock"),t=await this.$settings.get("TR_PauseOnIdle"),i=await this.$settings.get("TR_MinTime"),n=await this.$settings.get("TR_RoundTime"),s=await this.$settings.get("TR_RoundOpr");let l=await this.$settings.get("TR_AttachCS"),a=await this.$settings.get("TR_ShowTimer");!1!==l&&(l=!0),!1!==a&&(a=!0);const r=await this.$settings.get("TR_CSDelay");this.setState({TR_PauseOnLock:e,TR_PauseOnIdle:t,TR_MinTime:i,TR_RoundTime:n,TR_RoundOpr:s,TR_AttachCS:l,TR_CSDelay:r,TR_ShowTimer:a})}render(){const{TR_PauseOnLock:e,TR_PauseOnIdle:t,TR_MinTime:i,TR_RoundTime:n,TR_RoundOpr:s,TR_AttachCS:l,TR_CSDelay:a,TR_ShowTimer:u}=this.state;return(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Minimum time spent (HH:MM)"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(r.N,{mask:"99:99",value:i,onChange:e=>this.saveSetting(e.value,"TR_MinTime"),placeholder:"00:05",maxLength:5,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Minimum time required to generate worklog. Tracker stopped with time lesser than this setting would be ignored"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Round tracked time"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{className:"form-control select",dataset:N,value:s||"",field:"TR_RoundOpr",onChange:this.saveSetting,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)(o.aL,{className:"form-control select",dataset:w,value:n||"5",field:"TR_RoundTime",onChange:this.saveSetting,style:{width:"150px",display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Round the tracked time to x minute as selected"})]})}),k&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"System Events"})}),(0,c.jsxs)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:e,field:"TR_PauseOnLock",onChange:this.saveSettingAndReload,label:"Pause time tracker when system is locked"}),(0,c.jsx)("span",{className:"help-block",children:"Timer will be paused when system is locked and it would be resumed when unlocked"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:t,field:"TR_PauseOnIdle",onChange:this.saveSettingAndReload,label:"Pause time tracker when system is idle"}),(0,c.jsx)("span",{className:"help-block",children:"Timer will be paused when system goes to idle state and resumed when active"})]})]}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Show tracker functionality within Jira"})}),(0,c.jsxs)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:l,field:"TR_AttachCS",onChange:this.saveSettingAndReload,onClick:this.requestPermission,label:"Attach tracker functionality within Jira"}),(0,c.jsx)("span",{className:"help-block",children:"Enabling this would inject tracking functionality in some pages of Jira from where you can control time tracking"})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:u,disabled:!l,field:"TR_ShowTimer",onChange:this.saveSetting,label:"Show timer in Jira"}),(0,c.jsx)("span",{className:"help-block",children:"Enabling this would show running timer in Jira"})]}),(0,c.jsxs)("div",{className:"form-group",children:["Delay attaching functionality for",(0,c.jsx)(S.Y,{maxFractionDigits:0,value:a,onChange:e=>this.saveSetting(e.value,"TR_CSDelay"),placeholder:2,min:1,max:20,step:1,allowEmpty:!1,style:{width:"35px",display:"inline-block",marginLeft:"3px"}}),"seconds",(0,c.jsx)("span",{className:"help-block",children:"Increase it if your JIRA response time is slow and you do not see tracker functionality in any pages"})]})]})]})]})}};var I=i(9051),O=i.n(I);const D=[13,14,15,16,17,18,19,20,21,22,23],F=({value:e,mode:t="number",className:i="",disabled:s=!1,placeholder:l="Choose time",disabledHours:a=D,hideDisabledHours:r=!0,onChange:o,field:u})=>{const[d,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),[v,x]=(0,n.useState)(null),b=(0,n.useRef)();(0,n.useEffect)((()=>{if(void 0!==e)if("string"===t)h(null);else if(null!==e&&void 0!==e){const t=Math.floor(e),i=Math.round(60*(e-t)),n=O()().set({hour:t,minute:i,second:0,millisecond:0});h(n),f(t),x(i)}else h(null),f(null),x(null)}),[e,t]),(0,n.useEffect)((()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&p(!1)};return m?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[m]);const y=(e,t)=>{const i=O()().set({hour:e,minute:t,second:0,millisecond:0});h(i);o&&o(e+t/60,u),p(!1)};return(0,c.jsxs)("div",{className:`time-picker-wrapper ${i}`,ref:b,children:[(0,c.jsx)("input",{type:"text",className:"time-picker-input",value:d?d.format("HH:mm"):"",onClick:()=>{s||p((e=>!e))},readOnly:!0,disabled:s,placeholder:l}),m&&(0,c.jsxs)("div",{className:"time-picker-popover",children:[(0,c.jsx)("div",{className:"time-picker-list hours",children:(()=>{const e=[];for(let t=0;t<24;t++){const i=a.includes(t);r&&i||e.push((0,c.jsx)("div",{className:`time-picker-option ${i?"disabled":""} ${g===t?"selected":""}`,onClick:()=>{var e;i||(f(e=t),null!==v&&y(e,v))},children:t.toString().padStart(2,"0")},t))}return e})()}),(0,c.jsx)("div",{className:"time-picker-list minutes",children:(()=>{const e=[];for(let t=0;t<60;t++)e.push((0,c.jsx)("div",{className:"time-picker-option "+(v===t?"selected":""),onClick:()=>{return x(e=t),void(null!==g&&y(g,e));var e},children:t.toString().padStart(2,"0")},t));return e})()})]})]})},{googleCalendar:T,outlookCalendar:L}=l.A.features.integrations,E=!1!==L||!1!==T;const P=class extends f{render(){const{settings:e,isAtlasCloud:t}=this.props;return(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Min & Max hours to log (HH:mm)"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(F,{value:e.minHours,field:"minHours",onChange:this.saveSetting,placeholder:"Choose min hours"}),(0,c.jsx)("span",{children:" - "}),(0,c.jsx)(F,{value:e.maxHours,field:"maxHours",onChange:this.saveSetting,placeholder:"Choose max hours"}),(0,c.jsx)("span",{className:"help-block",children:"Specify the minimum and maximum number of hours to be logged per day"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Default time spent (hh:mm)"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(F,{value:e.defaultTimeSpent||1,field:"defaultTimeSpent",onChange:this.saveSetting}),(0,c.jsx)("span",{className:"help-block",children:"Specify the default value for time spent while adding worklog"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Auto upload worklog"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:e.autoUpload,field:"autoUpload",onChange:this.saveSetting,label:"Enable auto upload by default"}),(0,c.jsx)("span",{className:"help-block",children:"All the worklogs will be automatically uploaded when created"})]})}),t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Notify users on worklog"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:!1!==e.notifyUsers,field:"notifyUsers",onChange:this.saveSetting,label:"Enable worklog notification"}),(0,c.jsx)("span",{className:"help-block",children:"Enable whether users watching the issue are notified by email"})]})})]}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Worklog for closed tickets"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:e.allowClosedTickets,field:"allowClosedTickets",onChange:this.saveSetting,label:"Allow logging work on closed tickets"}),(0,c.jsx)("span",{className:"help-block",children:"This feature will work only if your Jira server is configured to allow it"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Min length for worklog comments"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.fI,{className:"form-control",value:e.commentLength,field:"commentLength",onChange:this.saveIntSetting,keyfilter:"int",maxLength:3,style:{width:150,display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Provide the minimum count of characters to be used for worklog comments"})]})}),E&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Default meeting ticket for worklog"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(A,{value:e.meetingTicket,field:"meetingTicket",onChange:this.saveSetting}),(0,c.jsx)("span",{className:"help-block",children:"Provide the list of meeting tickets separated by ',' for which you would add worklog"})]})})]}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Worklog JQL suffix while pulling worklogs"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.fI,{value:e.worklogJQLSuffix,field:"worklogJQLSuffix",maxLength:150,style:{width:"100%",maxWidth:"500px"},onChange:this.saveSetting}),(0,c.jsxs)("span",{className:"help-block",children:["Appends this custom JQL while pulling issues list for worklog information.",(0,c.jsx)("br",{}),'For some Jira Cloud users, adding "ORDER BY updatedDate DESC" may solve performance issue while pulling worklogs.',(0,c.jsx)("br",{}),(0,c.jsx)("strong",{children:"Note:"})," Do not use this field unless you know what exactly you are doing."]})]})})]})}};class A extends n.PureComponent{constructor(e){super(e),this.setValue=e=>this.setState({value:e}),this.endEdit=async()=>{const e=await this.validateTicket();"string"===typeof e&&this.props.onChange(e,this.props.field)},this.oldValue=e.value,this.state={value:e.value},(0,a.WQ)(this,"MessageService","TicketService")}UNSAFE_componentWillReceiveProps(e){this.oldValue!==e.value&&(this.oldValue=e.value,this.setState({value:e.value}))}validateTicket(){let{value:e}=this.state,t=(e||"").trim();return t?(t=t.replace(";",",").replace(" ",","),t=t.split(",").map((e=>e.trim()||null)),e=t.join(),this.setState({value:e}),this.$ticket.getTicketDetails(t).then((e=>{const i=t.map((t=>e[t.toUpperCase()]||t)),n=i.filter((e=>"string"===typeof e));return n.length>0?(this.$message.warning(`Invalid default ticket number(s) specified for meetings: ${n.join()}`),!1):i.map((e=>e.key)).join()}),(e=>(((e.error||{}).errorMessages||[]).some((e=>e.toLowerCase().indexOf("'key' is invalid")>-1||e.toLowerCase().indexOf("does not exist")>-1))&&this.$message.warning("Invalid default ticket number specified for meetings!"),!1)))):Promise.resolve(e)}render(){return(0,c.jsx)(o.fI,{value:this.state.value,className:"form-control",maxLength:100,style:{width:150,display:"inline-block"},onChange:this.setValue,onBlur:this.endEdit})}}const M=class extends f{constructor(e){super(e),this.searchRapidView=e=>{e=(e||"").toLowerCase();const{rapidViews:t}=this.state,{settings:i}=this.props;return t.filter((t=>(t.name.toLowerCase().indexOf(e)>=0||t.id.toString().startsWith(e))&&(!i.rapidViews||!i.rapidViews.some((e=>e.id===t.id)))))},this.searchProject=e=>{e=(e||"").toLowerCase();const{projects:t}=this.state,{settings:i}=this.props;return t.filter((t=>(t.name.toLowerCase().indexOf(e)>=0||t.key.toLowerCase().startsWith(e)||t.id.toString().startsWith(e))&&(!i.projects||!i.projects.some((e=>e.id===t.id)))))},(0,a.WQ)(this,"JiraService"),this.state={},this.loadData()}async loadData(){this.$jira.getRapidViews().then((e=>{e=e.orderBy((e=>e.name)).map((e=>({name:e.name,id:e.id}))),this.setState({rapidViews:e})})),this.$jira.getProjects().then((e=>{e=e.map((({name:e,id:t,key:i})=>({name:e,id:t,key:i}))).orderBy((e=>e.name)),this.setState({projects:e})})),this.$jira.getCustomFields().then((e=>{const t=e.filter((e=>e.custom&&"number"===e.schema.type)).map((e=>({id:e.id,name:e.name,clauseNames:e.clauseNames}))).orderBy((e=>e.name)),i=e.filter((e=>e.custom&&("any"===e.schema.type||"string"===e.schema.type))).map((e=>({id:e.id,name:e.name,clauseNames:e.clauseNames}))).orderBy((e=>e.name));this.setState({numericFields:t,stringFields:i}),this.setDefaultValues(t,i)}))}setDefaultValues(e,t){const{settings:i}=this.props,{storyPointField:n,epicNameField:s}=i;if(!n){const t=e.first((e=>"story points"===e.name.toLowerCase()));t||e.first((e=>{const t=e.name.toLowerCase();return t.indexOf("story")>-1&&~t.indexOf("points")>-1})),t&&this.saveSetting(t,"storyPointField")}if(!s){const e=t.first((e=>"epic link"===e.name.toLowerCase()));e||t.first((e=>{const t=e.name.toLowerCase();return t.indexOf("epic")>-1&&~t.indexOf("link")>-1})),e&&this.saveSetting(e,"epicNameField")}}render(){const{state:{numericFields:e,stringFields:t,projects:i,rapidViews:n},props:{settings:s}}=this;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Projects"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.j9,{value:s.projects,field:"projects",onChange:this.saveSetting,dataset:this.searchProject,dropdown:!0,multiple:!0,displayField:"name",placeholder:"start typing the project name here",size:35,maxlength:25,className:"autocomplete-350",scrollHeight:"300px",disabled:!i||0===i.length}),(0,c.jsx)("span",{className:"help-block",children:"Add one or more projects which you are interested in"})]})})]}),(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Agile boards"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.j9,{value:s.rapidViews,field:"rapidViews",onChange:this.saveSetting,dataset:this.searchRapidView,dropdown:!0,multiple:!0,displayField:"name",placeholder:"start typing the board name here",size:35,maxLength:25,styleclass:"autocomplete-350",scrollHeight:"300px",disabled:!n||0===n.length}),(0,c.jsx)("span",{className:"help-block",children:"Add one or more Agile boards which you are interested in"})]})})]}),(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Story Points field"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{dataset:e,value:s.storyPointField,field:"storyPointField",onChange:this.saveSetting,style:{width:"200px"},placeholder:"Choose a storypoint field",disabled:!e,displayField:"name",filterPlaceholder:"Type the field name to filter"}),(0,c.jsx)("span",{className:"help-block",children:"Story points field is a custom field in each jira instance and for some functionality to work, you will have to select appropriate field."})]})})]}),(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Epic name field"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{dataset:t,value:s.epicNameField,field:"epicNameField",onChange:this.saveSetting,style:{width:"200px"},placeholder:"Choose a epic name field",disabled:!t,displayField:"name",filterPlaceholder:"Type the field name to filter"}),(0,c.jsx)("span",{className:"help-block",children:"Epic name field is a custom field in each jira instance and for some functionality to work, you will have to select appropriate field."})]})})]})]})}};var R=i(9518),B=i(8615);const $=[{value:5,label:"Every 5 minutes"},{value:10,label:"Every 10 minutes"},{value:15,label:"Every 15 minutes"},{value:20,label:"Every 20 minutes"},{value:30,label:"Every 30 minutes"},{value:45,label:"Every 45 minutes"},{value:60,label:"Every 60 minutes"}],V=[{value:0,label:"Disable notification"},{value:1,label:"Before 1 minute"},{value:2,label:"Before 2 minutes"},{value:3,label:"Before 3 minutes"},{value:4,label:"Before 4 minutes"},{value:5,label:"Before 5 minutes"},{value:10,label:"Before 10 minutes"},{value:15,label:"Before 15 minutes"}],_=[{value:0,label:"Never launch"},{value:1,label:"Before 1 minute"},{value:2,label:"Before 2 minutes"},{value:3,label:"Before 3 minutes"},{value:4,label:"Before 4 minutes"},{value:5,label:"Before 5 minutes"},{value:10,label:"Before 10 minutes"}],{googleCalendar:G,outlookCalendar:K}=l.A.features.integrations;const U=class extends f{constructor(e){super(e),this.intgStatusChanged=e=>this.setState({removedIntg:e}),this.enableGIntegration=e=>this.enableIntegration("googleIntegration",e),this.enableOIntegration=e=>this.saveSetting(e,"outlookIntegration"),this.googleSignIn=()=>{this.$calendar.authenticate(!0).then((()=>{this.saveSetting(!0,"hasGoogleCredentials"),this.$session.CurrentUser.hasGoogleCredentials=!0,this.$analytics.trackEvent("Signedin to Google Calendar"),this.$message.success("Successfully integrated with google account.")}),(e=>{this.$message.warning("Unable to integrate with Google Calendar!"),console.error("Unable to integrate with Google Calendar!",e)}))},this.outlookSignIn=()=>{this.$outlook.authenticate(!0).then((()=>{this.$session.CurrentUser.hasOutlookCredentials=!0,this.$analytics.trackEvent("Signedin to Outlook Calendar"),this.$message.success("Successfully integrated with outlook account."),this.props.onChange("hasOutlookCredentials",!0)}),(e=>{console.error("Outlook integration failed with error:",e),this.$message.warning("Unable to integrate with Outlook Calendar!")}))},this.removeIntegration=()=>{this.saveSetting(!1,"hasGoogleCredentials"),this.props.intgStatusChanged(!0)},this.undoSignout=()=>{this.saveSetting(!0,"hasGoogleCredentials"),this.props.intgStatusChanged(!1)},this.removeOutlookIntegration=()=>{B.A.confirmDelete((0,c.jsxs)(c.Fragment,{children:["Are you sure to remove Outlook Integration?",(0,c.jsx)("br",{}),(0,c.jsx)("br",{}),"To use it again, you will have to reintegrate with MS Outlook."]}),"Remove Integration").then((()=>{this.$settings.saveGeneralSetting(this.props.userId,"OLBT",null),this.$settings.saveGeneralSetting(this.props.userId,"OLRT",null),this.saveSetting(!1,"hasOutlookCredentials")}))},this.state={},(0,a.WQ)(this,"CalendarService","AnalyticsService","MessageService","SessionService","OutlookService","AppBrowserService")}enableIntegration(e,t){t?this.$jaBrowserExtn.requestPermission(["identity"]).then((i=>{i?this.saveSetting(t,e):this.$message.warning("Permission was not granted to enable this integration. Please grant permission to enable it.","Permission not granted")})):this.saveSetting(t,e)}assignCalendarSettingsToUser(e,t){if(!t.hasGoogleCredentials&&e.dataStore){const t=e.dataStore.access_token;t&&this.$ajax.get(R.f.googleLogoutUrl,t).then((()=>{this.$jaBrowserExtn.removeAuthTokken(t)})),delete e.dataStore}}render(){const{removedIntg:e,settings:t}=this.props;return(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"This page allows you to integrate your calendar from external sources like Outlook & Google. Worklog will be automatically created for the events in your calendar based on your preferences"}),(0,c.jsxs)("div",{className:"d-block",children:[!1!==K&&(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{children:(0,c.jsx)("h4",{children:"Outlook Calendar"})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Enable Outlook calendar"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:t.outlookIntegration,onChange:this.enableOIntegration,label:"Allow integration"}),(0,c.jsx)("span",{className:"help-block",children:"Select this checkbox if you would wish to view meetings in your outlook calendar"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Integration Status"})}),(0,c.jsxs)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:[!t.hasOutlookCredentials&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"link",onClick:this.outlookSignIn,children:"Click here to sign in with your microsoft account"}),(0,c.jsx)("span",{className:"help-block",children:"You will have to sign-in to with your microsoft account to use the calendar."})]}),t.hasOutlookCredentials&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"(Already integrated with an account)"}),(0,c.jsx)("label",{className:"link margin-l-5",onClick:this.removeOutlookIntegration,children:"Remove integration"})]})]})]}),!1!==G&&(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("h4",{children:"Google Calendar"}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Enable Google calendar"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.Sc,{checked:t.googleIntegration,onChange:this.enableGIntegration,label:"Allow integration"}),(0,c.jsx)("span",{className:"help-block",children:"Select this checkbox if you would wish to view meetings in your calendar"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Integration Status"})}),(0,c.jsxs)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:[!t.hasGoogleCredentials&&!e&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"link",onClick:this.googleSignIn,children:"Click here to sign in with your google account"}),(0,c.jsx)("span",{className:"help-block",children:"You will have to sign-in to chrome with your google account to use the calendar."})]}),t.hasGoogleCredentials&&!e&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"(Already integrated with an account)"}),(0,c.jsx)("label",{className:"link",onClick:this.removeIntegration,children:"Remove integration"})]}),e&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"(You will be signed out from Google once you save your changes)"}),(0,c.jsx)("label",{className:"link",onClick:this.undoSignout,children:" Undo signout"}),(0,c.jsx)("span",{className:"help-block",children:"Note: You will have to authenticate with google again to use the calendar"})]})]})]}),!1!==G&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h4",{children:"General settings"}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Check for updates"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{className:"form-control select",value:t.checkUpdates,dataset:$,valueField:"value",field:"checkUpdates",onChange:this.saveSetting,style:{width:180,display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Refresh the meeting invites for notification regularly in given interval"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Show meeting notification"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{className:"form-control select",value:t.notifyBefore,dataset:V,valueField:"value",field:"notifyBefore",onChange:this.saveSetting,style:{width:180,display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Show notification before the selected time of meeting"})]})}),(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Auto launch hangout"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.aL,{className:"form-control select",value:t.autoLaunch,field:"autoLaunch",onChange:this.saveSetting,dataset:_,valueField:"value",style:{width:180,display:"inline-block"}}),(0,c.jsx)("span",{className:"help-block",children:"Automatically launch hangout Url before the selected time of meeting"})]})})]})]})]})}};var H=i(8535),W=i(9311),J=i(3103),q=i(4967),Q=i(7323),z=i(2739),Y=i(5744),X=i(3927),Z=i(233);function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},ee.apply(this,arguments)}function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ie(e){var t=function(e,t){if("object"!==te(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===te(t)?t:String(t)}function ne(e,t,i){return(t=ie(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function le(e,t){if(e){if("string"===typeof e)return se(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?se(e,t):void 0}}function ae(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,l,a,r=[],o=!0,u=!1;try{if(l=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;o=!1}else for(;!(o=(n=l.call(i)).done)&&(r.push(n.value),r.length!==t);o=!0);}catch(e){u=!0,s=e}finally{try{if(!o&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(u)throw s}}return r}}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe={itemGroup:"p-listbox-item-group",emptyMessage:"p-listbox-empty-message",list:"p-listbox-list",wrapper:function(e){var t=e.props;return(0,Q.xW)("p-listbox-list-wrapper",t.listClassName)},root:function(e){var t=e.props;return(0,Q.xW)("p-listbox p-component",{"p-disabled":t.disabled,"p-invalid":t.invalid},t.className)},item:function(e){var t=e.props;return(0,Q.xW)("p-listbox-item",{"p-highlight":t.selected,"p-focus":t.focusedOptionIndex===t.index,"p-disabled":t.disabled},t.option.className)},filterContainer:"p-listbox-filter-container",filterIcon:"p-listbox-filter-icon",filterInput:"p-listbox-filter",header:"p-listbox-header"},ue={itemGroup:function(e){var t=e.scrollerOptions;return{height:t.props?t.props.itemSize:void 0}},list:function(e){var t=e.options;return e.props.virtualScrollerOptions?t.style:void 0}},ce=W.x.extend({defaultProps:{__TYPE:"ListBox",className:null,dataKey:null,disabled:null,emptyFilterMessage:null,emptyMessage:null,filter:!1,filterIcon:null,filterBy:null,filterInputProps:null,filterLocale:void 0,filterMatchMode:"contains",filterPlaceholder:null,filterTemplate:null,filterValue:null,focusOnHover:!0,id:null,itemTemplate:null,invalid:!1,listClassName:null,listStyle:null,metaKeySelection:!1,selectOnFocus:!1,autoOptionFocus:!1,multiple:!1,onChange:null,onFilterValueChange:null,optionDisabled:null,optionGroupChildren:null,optionGroupLabel:null,optionGroupTemplate:null,optionLabel:null,optionValue:null,options:null,style:null,tabIndex:0,tooltip:null,tooltipOptions:null,value:null,virtualScrollerOptions:null,children:void 0},css:{classes:oe,styles:"\n@layer primereact {\n    .p-listbox-list-wrapper {\n        overflow: auto;\n    }\n    \n    .p-listbox-list {\n        list-style-type: none;\n        margin: 0;\n        padding: 0;\n    }\n    \n    .p-listbox-item {\n        cursor: pointer;\n        position: relative;\n        overflow: hidden;\n        outline: none;\n    }\n    \n    .p-listbox-filter-container {\n        position: relative;\n    }\n    \n    .p-listbox-filter-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -.5rem;\n    }\n    \n    .p-listbox-filter {\n        width: 100%;\n    }\n}\n",inlineStyles:ue}});function de(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function he(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?de(Object(i),!0).forEach((function(t){ne(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):de(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var me=n.memo((function(e){var t=(0,J.qV)(),i=e.ptCallbacks,s=i.ptm,l=i.cx,a=function(t,i){return s(t,he({hostName:e.hostName},i))},r={filter:function(e){return o(e)},reset:function(){return e.resetFilter()}},o=function(t){e.onFilter&&e.onFilter({originalEvent:t,value:t.target.value})},u=function(){var i=t({className:l("filterIcon")},a("filterIcon")),u=e.filterIcon||n.createElement(Y.W,i),c=Q.Hj.getJSXIcon(u,he({},i),{props:e}),d=t({className:l("header")},a("header")),h=t({className:l("filterContainer")},a("filterContainer")),m=n.createElement("div",h,n.createElement(X.S,ee({type:"text",value:e.filter,onChange:o,className:l("filterInput"),disabled:e.disabled,placeholder:e.filterPlaceholder},e.filterInputProps,{pt:s("filterInput"),unstyled:e.unstyled,__parentMetadata:{parent:e.metaData}})),c);if(e.filterTemplate){var p={className:"p-listbox-filter-container",element:m,filterOptions:r,filterInputChange:o,filterIconClassName:"p-dropdown-filter-icon",props:e};m=Q.BF.getJSXElement(e.filterTemplate,p)}return n.createElement("div",d,m)}();return n.createElement(n.Fragment,null,u)}));me.displayName="ListBoxHeader";var pe=n.memo((function(e){var t=re(n.useState(!1),2),i=t[0],s=t[1],l=(0,J.qV)(),a=e.ptCallbacks,r=a.ptm,o=a.cx,u=e.template?Q.BF.getJSXElement(e.template,e.option):e.label,c=l({id:e.id,className:o("item",{props:e}),style:e.style,onClick:function(t){return e.onClick(t,e.option,e.index)},onTouchEnd:function(t){e.onTouchEnd&&e.onTouchEnd({originalEvent:t,option:e.option})},onFocus:function(e){s(!0)},onBlur:function(e){s(!1)},tabIndex:"-1",onMouseDown:function(t){return e.onOptionMouseDown(t,e.index)},onMouseMove:function(t){return e.onOptionMouseMove(t,e.index)},"aria-label":e.label,role:"option","aria-selected":e.selected,"aria-disabled":e.disabled,"data-p-disabled":e.disabled},r("item",{hostName:e.hostName,context:{selected:e.selected,disabled:e.disabled,focused:i,focusedOptionIndex:e.focusedOptionIndex}}));return n.createElement("li",ee({},c,{key:e.optionKey}),u,n.createElement(Z.n,null))}));function ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function fe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(i),!0).forEach((function(t){ne(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ge(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ve(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xe(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,r=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){r=!0,l=e},f:function(){try{a||null==i.return||i.return()}finally{if(r)throw l}}}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}pe.displayName="ListBoxItem";var be=n.memo(n.forwardRef((function(e,t){var i=(0,J.qV)(),s=n.useContext(H.UM),l=ce.getProps(e,s),a=re(n.useState(null),2),r=a[0],o=a[1],u=n.useRef(null),c=n.useRef(null),d=n.useRef(null),h=re(n.useState(-1),2),m=h[0],p=h[1],g=re(n.useState(!1),2),f=g[0],v=g[1],x=re(n.useState(""),2),b=x[0],y=x[1],j=re(n.useState(""),2),S=j[0],k=j[1],w=n.useRef(null),N=n.useRef(null),C=n.useRef(null),I=n.useRef(null),O=n.useRef(!1),D=(l.onFilterValueChange?l.filterValue:b)||"",F=D&&D.trim().length>0,T={props:l,state:{filterValue:D}},L=ce.setMetaData(T);(0,W.j)(ce.css.styles,L.isUnstyled,{name:"listbox"});var E=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;l.disabled||Ie(t)||(l.multiple?B(e.originalEvent,t):R(e.originalEvent,t),O.current=!1,-1!==i&&o(i))},P=function(e,t){se(e,t)},A=function(e,t){l.focusOnHover&&f&&se(e,t)},M=function(){l.disabled||(O.current=!0)},R=function(e,t){var i=we(t),n=!1,s=null;if(!O.current&&l.metaKeySelection){var a=e.metaKey||e.ctrlKey;i?a&&(s=null,n=!0):(s=Ce(t),n=!0)}else s=i?null:Ce(t),n=!0;n&&be(e,s)},B=function(e,t){var i=we(t),n=!1,s=null;if(!O&&l.metaKeySelection){var a=e.metaKey||e.ctrlKey;i?(s=a?ye(t):[Ce(t)],n=!0):(s=a&&l.value||[],s=[].concat(ae(s),[Ce(t)]),n=!0)}else s=i?ye(t):[].concat(ae(l.value||[]),[Ce(t)]),n=!0;n&&l.onChange({originalEvent:e,value:s,stopPropagation:function(){null===e||void 0===e||e.stopPropagation()},preventDefault:function(){null===e||void 0===e||e.preventDefault()},target:{name:l.name,id:l.id,value:s}})},$=function(){return Q.BF.isNotEmpty(l.value)},V=function(e){return Q.BF.isNotEmpty(e)&&!(Ie(e)||function(e){return l.optionGroupLabel&&e.optionGroup&&e.group}(e))},_=function(e){return V(e)&&we(e)},G=function(){return Ae.findIndex((function(e){return V(e)}))},K=function(){return Q.BF.findLastIndex(Ae,(function(e){return V(e)}))},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=-1;return $()&&(i=t?-1===(i=Z(e))?X(e):i:-1===(i=X(e))?Z(e):i),i>-1?i:e},Y=function(e){var t;return V(e)&&(null===(t=Ne(e))||void 0===t?void 0:t.toLocaleLowerCase(l.filterLocale).startsWith(S.toLocaleLowerCase(l.filterLocale)))},X=function(e){var t=$()&&e<Ae.length-1?Ae.slice(e+1).findIndex((function(e){return _(e)})):-1;return t>-1?t+e+1:-1},Z=function(e){var t=$()&&e>0?Q.BF.findLastIndex(Ae.slice(0,e),(function(e){return _(e)})):-1;return t>-1?t:-1},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===t&&(t=U(i,!0)),-1===i&&(i=U(t)),-1!==t&&-1!==i){var n=Math.min(t,i),s=Math.max(t,i),l=Ae.slice(n,s+1).filter((function(e){return V(e)})).map((function(e){return Ce(e)}));be(e,l)}},ie=function(){var e=$()?Ae.findIndex((function(e){return _(e)})):-1;return e<0?G():e},ne=function(){var e=$()?Q.BF.findLastIndex(Ae,(function(e){return _(e)})):-1;return e<0?K():e},se=function(e,t){r!==t&&(o(t),he(),e&&l.selectOnFocus&&!l.multiple&&E(e,Ae[t]))},le=function(e){var t=-1!==r?function(e){var t=e<Ae.length-1?Ae.slice(e+1).findIndex((function(e){return V(e)})):-1;return t>-1?t+e+1:e}(r):ie();l.multiple&&e.shiftKey&&te(e,m,t),se(e,t),e.preventDefault()},oe=function(e){var t=-1!==r?function(e){var t=e>0?Q.BF.findLastIndex(Ae.slice(0,e),(function(e){return V(e)})):-1;return t>-1?t:e}(r):ne();l.multiple&&e.shiftKey&&te(e,t,m),se(e,t),e.preventDefault()},ue=function(e){!function(e){-1!==r&&(l.multiple&&e.shiftKey?te(e,r):E(e,Ae[r])),e.preventDefault()}(e)},de=function(e){var t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":le(e);break;case"ArrowUp":oe(e);break;case"Home":!function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])e.currentTarget.setSelectionRange(0,0),o(-1);else{var t=e.metaKey||e.ctrlKey,i=G();l.multiple&&e.shiftKey&&t&&te(e,i,m),se(e,i)}e.preventDefault()}(e);break;case"End":!function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var t=e.currentTarget,i=t.value.length;t.setSelectionRange(i,i),o(-1)}else{var n=e.metaKey||e.ctrlKey,s=K();l.multiple&&e.shiftKey&&n&&te(e,m,s),se(e,s)}e.preventDefault()}(e);break;case"PageDown":!function(e){he(Ae.length-1),e.preventDefault()}(e);break;case"PageUp":!function(e){he(0),e.preventDefault()}(e);break;case"Enter":case"NumpadEnter":case"Space":ue(e),e.preventDefault();break;case"Tab":break;case"ShiftLeft":case"ShiftRight":p(r);break;default:if(l.multiple&&"a"===e.key&&t){var i=Ae.filter((function(e){return V(e)})).map((function(e){return Ce(e)}));be(e,i),e.preventDefault();break}!t&&Q.BF.isPrintableCharacter(e.key)&&(!function(e,t){k((S||"")+t);var i=-1;Q.BF.isNotEmpty(S)&&(-1===(i=-1!==r?-1===(i=Ae.slice(r).findIndex((function(e){return Y(e)})))?Ae.slice(0,r).findIndex((function(e){return Y(e)})):i+r:Ae.findIndex((function(e){return Y(e)})))&&-1===r&&(i=ie()),-1!==i&&se(e,i)),u.current&&clearTimeout(u.current),u.current=setTimeout((function(){k(""),u.current=null}),500)}(e,e.key),e.preventDefault())}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;setTimeout((function(){if(I.current){var t=-1!==e?"".concat(C.current,"_").concat(e):-1!==r?"".concat(C.current,"_").concat(r):null,i=I.current.querySelector('li[id="'.concat(t,'"]'));i?i.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}):l.virtualScrollerOptions&&N.current&&N.current.scrollToIndex(-1!==e?e:r)}}),0)},ge=function(e){N.current&&N.current.scrollToIndex(0);var t=e.originalEvent,i=e.value;l.onFilterValueChange?l.onFilterValueChange({originalEvent:t,value:i}):y(i)},xe=function(){y(""),l.onFilter&&l.onFilter({filter:""})},be=function(e,t){l.onChange&&l.onChange({originalEvent:e,value:t,stopPropagation:function(){null===e||void 0===e||e.stopPropagation()},preventDefault:function(){null===e||void 0===e||e.preventDefault()},target:{name:l.name,id:l.id,value:t}})},ye=function(e){return l.value.filter((function(t){return!Q.BF.equals(t,Ce(e),l.dataKey)}))},je=function(){return l.optionValue?null:l.dataKey},Se=function(e,t){var i=je();return t.findIndex((function(t){return Q.BF.equals(e,Ce(t),i)}))},ke=function(e,t){return Q.BF.equals(e,t,je())},we=function(e){var t=Ce(e);return l.multiple?(l.value||[]).some((function(e){return ke(e,t)})):ke(l.value,t)},Ne=function(e){return l.optionLabel?Q.BF.resolveFieldData(e,l.optionLabel):e&&void 0!==e.label?e.label:e},Ce=function(e){return l.optionValue?Q.BF.resolveFieldData(e,l.optionValue):e&&void 0!==e.value?e.value:e},Ie=function(e){return l.optionDisabled?Q.BF.isFunction(l.optionDisabled)?l.optionDisabled(e):Q.BF.resolveFieldData(e,l.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},Oe=function(){v(!0),o(-1!==r?r:l.autoOptionFocus?ie():function(){if($()){if(!l.multiple)return Ae.findIndex((function(e){return _(e)}));for(var e,t=function(){var e=l.value[i],t=Ae.findIndex((function(t){return _(t)&&ke(e,Ce(t))}));if(t>-1)return{v:t}},i=l.value.length-1;i>=0;i--)if(e=t())return e.v}return-1}()),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;if(l.selectOnFocus&&l.autoOptionFocus&&!$()&&!l.multiple&&e){var t=ie();E(null,Ae[t]),o(t)}}(!0)},De=function(){v(!1),o(-1),p(-1),k("")},Fe=function(e){return Q.BF.resolveFieldData(e,l.optionGroupChildren)},Te=function(e){return(e||[]).reduce((function(e,t,i){e.push({optionGroup:t,group:!0,index:i,code:t.code,label:t.label});var n=Fe(t);return n&&n.forEach((function(t){return e.push(t)})),e}),[])},Le=function(){if(N.current){var e=function(){if(null!=l.value&&Ae){if(!l.optionGroupLabel)return Se(l.value,Ae);for(var e=0;e<Ae.length;e++){var t=Se(l.value,Fe(Ae[e]));if(-1!==t)return{group:e,option:t}}}return-1}();-1!==e&&setTimeout((function(){return N.current.scrollToIndex(e)}),0)}};n.useImperativeHandle(t,(function(){return{props:l,focus:function(){return Q.DV.focusFirstElement(w.current)},getElement:function(){return w.current},getVirtualScroller:function(){return N.current}}})),(0,J.uU)((function(){Le(),C.current=(0,Q._Y)()}));var Ee=function(e,t){var s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={height:a.props?a.props.itemSize:void 0};if(e.group&&e.optionGroup&&l.optionGroupLabel){var u=l.optionGroupTemplate?Q.BF.getJSXElement(l.optionGroupTemplate,e,t):(s=e,Q.BF.resolveFieldData(s,l.optionGroupLabel)),c=t+"_"+function(e){return Q.BF.resolveFieldData(e,l.optionGroupLabel)}(e),d=i({className:L.cx("itemGroup"),style:L.sx("itemGroup",{scrollerOptions:a}),role:"group"},L.ptm("itemGroup"));return n.createElement("li",ee({},d,{key:c}),u)}var h=Ne(e),m=t+"_"+function(e){return l.dataKey?Q.BF.resolveFieldData(e,l.dataKey):Ne(e)}(e),p=Ie(e);return n.createElement(pe,{id:C.current+"_"+t,hostName:"ListBox",optionKey:m,key:m,label:h,index:t,onOptionMouseDown:P,onOptionMouseMove:A,focusedOptionIndex:r,option:e,style:o,template:l.itemTemplate,selected:we(e),onClick:E,onTouchEnd:M,disabled:p,ptCallbacks:L,metaData:T})},Pe=function(e,t){var s=i({className:L.cx("emptyMessage")},L.ptm("emptyMessage")),a=Q.BF.getJSXElement(e,l)||(0,H.WP)(t?"emptyFilterMessage":"emptyMessage");return n.createElement("li",s,a)},Ae=function(){var e=l.optionGroupLabel?Te(l.options):l.options;if(F){var t=D.trim().toLocaleLowerCase(l.filterLocale),i=l.filterBy?l.filterBy.split(","):[l.optionLabel||"label"];if(l.optionGroupLabel){var n,s=[],a=ve(l.options);try{for(a.s();!(n=a.n()).done;){var r=n.value,o=H.E.filter(Fe(r),i,t,l.filterMatchMode,l.filterLocale);o&&o.length&&s.push(fe(fe({},r),{items:o}))}}catch(u){a.e(u)}finally{a.f()}return Te(s)}return H.E.filter(e,i,t,l.filterMatchMode,l.filterLocale)}return e}(),Me=Q.BF.isNotEmpty(l.tooltip),Re=ce.getOtherProps(l),Be=Q.BF.reduceKeys(Re,Q.DV.ARIA_PROPS),$e=function(){if(l.virtualScrollerOptions){var e=fe(fe({},l.virtualScrollerOptions),{items:Ae,onLazyLoad:function(e){return l.virtualScrollerOptions.onLazyLoad(fe(fe({},e),{filter:Ae}))},itemTemplate:function(e,t){return e&&Ee(e,t.index,t)},contentTemplate:function(e){var t=i(fe({ref:I,style:L.sx("list",{options:e}),className:L.cx("list",{options:e}),role:"listbox",tabIndex:"-1","aria-multiselectable":l.multiple,onFocus:Oe,onBlur:De,onKeyDown:de},Be),L.ptm("list"));return n.createElement("ul",t,e.children)}});return n.createElement(z.w,ee({ref:N},e,{pt:L.ptm("virtualScroller")}))}var t=Q.BF.isNotEmpty(Ae)?Ae.map(Ee):F?Pe(l.emptyFilterMessage,!0):Pe(l.emptyMessage),s=i(fe({ref:I,className:L.cx("list"),role:"listbox","aria-multiselectable":l.multiple,tabIndex:"-1",onFocus:Oe,onBlur:De,onKeyDown:de},Be),L.ptm("list"));return n.createElement("ul",s,t)}(),Ve=l.filter?n.createElement(me,{hostName:"ListBox",filter:D,filterIcon:l.filterIcon,onFilter:ge,resetFilter:xe,filterTemplate:l.filterTemplate,disabled:l.disabled,filterPlaceholder:l.filterPlaceholder,filterInputProps:l.filterInputProps,ptCallbacks:L,metaData:T}):null,_e=i({className:L.cx("wrapper"),style:l.listStyle},L.ptm("wrapper")),Ge=i({ref:w,id:l.id,className:L.cx("root"),style:l.style},ce.getOtherProps(l),L.ptm("root")),Ke=i({ref:c,role:"presentation","aria-hidden":"true",className:"p-hidden-accessible p-hidden-focusable",tabIndex:l.disabled?-1:l.tabIndex,onFocus:function(){Q.DV.focus(I.current);var e=Q.DV.getFirstFocusableElement(w.current,':not([data-p-hidden-focusable="true"])');d.current.tabIndex=Q.DV.isElement(e)?void 0:-1,c.current.tabIndex=-1,se(null,0)},"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},L.ptm("hiddenFirstFocusableEl")),Ue=i({ref:d,role:"presentation","aria-hidden":"true",className:"p-hidden-accessible p-hidden-focusable",tabIndex:l.disabled?-1:l.tabIndex,onFocus:function(e){if(e.relatedTarget===I.current){var t=Q.DV.getFirstFocusableElement(w.current,':not([data-p-hidden-focusable="true"])');Q.DV.focus(t),c.current.tabIndex=void 0}else Q.DV.focus(c.current);d.current.tabIndex=-1},"data-p-hidden-accessible":!0,"data-p-hidden-focusable":!0},L.ptm("hiddenLastFocusableEl"));return n.createElement(n.Fragment,null,n.createElement("div",Ge,n.createElement("span",Ke),Ve,n.createElement("div",_e,$e),n.createElement("span",Ue)),Me&&n.createElement(q.m,ee({target:w,content:l.tooltip,pt:L.ptm("tooltip")},l.tooltipOptions)))})));be.displayName="ListBox";var ye=i(975);const je=class extends f{constructor(e){super(e),this.saveSettings=()=>{const{menuAction:e}=this.state,t={action:parseInt(e)},i={action:t.action};switch(e){case 1:i.menus=this.menus.filter((e=>e.selected&&!e.isHead)).map((e=>({name:e.name,url:e.url}))),t.selectedMenu=this.state.selectedMenu;break;case 2:if(this.state.selectedLaunchPage){const e=this.menus.first((e=>e.id===this.state.selectedLaunchPage));e&&(i.url=e.url,t.autoLaunch=this.state.selectedLaunchPage)}break;case 3:this.state.selectedDashboard&&(i.index=parseInt((this.state.selectedDashboard||"0").replace("D-","")),t.quickIndex=this.state.selectedDashboard)}this.$settings.set("menuAction",i,!1,!0),this.saveSetting(t,"launchAction")},this.menuOptionSelected=()=>{const e=this.menus.filter((e=>e.selected&&!e.isHead)).map((e=>e.id));this.setState({menuAction:1,selectedMenu:e},this.saveSettings)},this.menuTemplate=e=>e.isHead?(0,c.jsxs)("div",{onClick:t=>this.menuSelected(e,t),children:[(0,c.jsx)(o.Sc,{checked:e.selected}),(0,c.jsx)("span",{children:e.name})]}):e.isHead?void 0:(0,c.jsxs)("div",{style:{marginLeft:20},onClick:t=>this.menuSelected(e,t),children:[(0,c.jsx)(o.Sc,{checked:e.selected}),(0,c.jsx)("span",{children:e.name})]}),this.menuSelected=(e,t)=>{t&&t.stopPropagation(),e.selected=!e.selected,e.isHead&&this.selectSubMenus(e),this.menuOptionSelected()},this.autoLaunchOptionSelected=()=>{var e,t,i;const n=null===(e=this.launchMenus.first())||void 0===e||null===(t=e.items)||void 0===t||null===(i=t.first())||void 0===i?void 0:i.value;n?this.launchPageChanged(n):this.setState({menuAction:2})},this.launchPageChanged=e=>this.setState({menuAction:2,selectedLaunchPage:e},this.saveSettings),this.quickViewOptionSelected=()=>{const e=this.$dashboard.getQuickViewBoardIndex()||0;this.dashboardChanged(`D-${e}`)},this.dashboardChanged=e=>{this.setState({menuAction:3,selectedDashboard:e},this.saveSettings);const t=parseInt((e||"0").replace("D-",""))||0;this.$dashboard.setQuickViewBoardIndex(t)},(0,a.WQ)(this,"DashboardService","SettingsService");const{settings:t}=e;t.launchAction||(t.launchAction={});const i=this.$dashboard.getQuickViewBoardIndex();t.launchAction.quickIndex=`D-${i}`;const{launchAction:{action:n,autoLaunch:s,quickIndex:l}}=t;this.state={settings:t,launchMenus:[],menuAction:n||1,selectedLaunchPage:s,selectedDashboard:l},this.fillMenus()}fillMenus(){const e=[],t=this.state.settings.launchAction.selectedMenu||["D-0","R-WL","R-SP","R-CG","CAL","S-GE"],i=this.$dashboard.getDashboards(),n=[];i.forEach(((i,s)=>{const l=`D-${s}`,a=`/dashboard/${s}`;e.push({id:l,name:i.name,icon:i.icon,url:a,selected:t.indexOf(l)>-1}),n.push({value:l,label:i.name,icon:i.icon})}));const s=ye.A.map((i=>{const{id:s,name:l}=i,a={id:s,name:l,isHead:!0};i.isDashboard?e.splice(0,0,a):e.push(a);return{label:l,items:i.isDashboard?n:i.items.map((i=>(e.push({id:i.id,isHead:i.title,name:i.name,icon:i.icon,url:i.url,selected:t.indexOf(i.id)>-1}),{value:i.id,label:i.name,icon:i.icon})))}}));this.menus=e,this.launchMenus=s,this.dashboardMenus=n}selectSubMenus(e){const{menus:t}=this;for(let i=t.indexOf(e)+1;i<t.length;i++){const n=t[i];if(n.isHead)return;n.selected=e.selected}}render(){const{launchMenus:e,dashboardMenus:t,menus:i,state:{selectedDashboard:n,selectedLaunchPage:s,menuAction:l}}=this;return(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:"This page allows you to set what is displayed when you click on JA icon in your browser"}),(0,c.jsx)("div",{className:"d-block",children:(0,c.jsxs)("div",{className:"ui-g ui-fluid",children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"What should happen when clicking on JA icon?"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(o.a,{value:l,onChange:this.menuOptionSelected,defaultValue:1,label:"Show menus"}),(0,c.jsx)(o.a,{value:l,onChange:this.autoLaunchOptionSelected,defaultValue:2,label:"Auto launch"}),(0,c.jsx)(o.a,{value:l,onChange:this.quickViewOptionSelected,defaultValue:3,label:"Show quickview dashboard"}),(0,c.jsx)("span",{className:"help-block",children:"Select appropriate option what you would expect to happen when you click on JA icon"})]})}),1===l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Menus to display"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)(be,{options:i,optionValue:"id",optionLabel:"id",multiple:!0,style:{width:"300px"},listStyle:{maxHeight:"250px"},itemTemplate:this.menuTemplate}),(0,c.jsx)("span",{className:"help-block",children:"Choose the list of menus you would like to be displayed"})]})})]}),2===l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Auto launch page"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)(o.aL,{dataset:e,value:s,onChange:this.launchPageChanged,valueField:"value",style:{width:"200px"},group:!0,children:[e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:`fa ${e.icon}`}),(0,c.jsx)("span",{style:{marginLeft:"4px"},children:e.label})]}),(e,t)=>(0,c.jsx)("strong",{children:e.label},t)]}),(0,c.jsx)("span",{className:"help-block",children:"Select the page to be launched when clicking on the JA icon"})]})})]}),3===l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"form-label ui-g-12 ui-md-3 ui-lg-3 ui-xl-2",children:(0,c.jsx)("strong",{children:"Quick view board"})}),(0,c.jsx)("div",{className:"ui-g-12 ui-md-9 ui-lg-9 ui-xl-10",children:(0,c.jsx)("div",{className:"form-group",children:(0,c.jsx)(o.aL,{dataset:t,value:n,onChange:this.dashboardChanged,style:{width:"200px"},valueField:"value",children:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("i",{className:`fa ${e.icon}`}),(0,c.jsx)("span",{style:{verticalAlign:"middle"},children:e.label})]})})})})]})]})})]})}},{googleCalendar:Se,outlookCalendar:ke}=l.A.features.integrations,we=!1!==Se||!1!==ke;class Ne extends n.PureComponent{constructor(e){super(e),this.tabChanged=e=>this.setState({currentTabIndex:e.index}),this.saveSetting=(e,t)=>{this.stateChanged(t,e),this.$settings.saveGeneralSetting(this.userId,t,e);this.$session.CurrentUser[t]=e},this.stateChanged=(e,t)=>{let{settings:i}=this.state;i={...i},i[e]=t,this.setState({settings:i})},(0,a.WQ)(this,"SessionService","SettingsService"),this.state={settings:{}},this.noDonations=this.$session.CurrentUser.noDonations,this.userId=this.$session.CurrentUser.userId,this.isAtlasCloud=this.$session.CurrentUser.isAtlasCloud,this.settings={},this.spaceInfo={},this.state={},v.zM&&(this.isExtnConnected="1"===localStorage.getItem("authType"))}componentDidMount(){this.$settings.getGeneralSettings(this.userId).then((e=>this.setState({settings:{autoLaunch:0,notifyBefore:0,checkUpdates:15,...e}})))}render(){const{noDonations:e,state:{settings:t,currentTabIndex:i}}=this;return t?(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(s.J,{activeindex:i,onChange:this.tabChanged,children:[(0,c.jsx)(s.K,{header:"General",leftIcon:"fa fa-cogs",selected:"true",children:(0,c.jsx)(b,{settings:t,userId:this.userId,noDonations:e,onSave:this.saveSetting})}),(0,c.jsx)(s.K,{header:"Time tracker",leftIcon:"fa fa-clock",children:(0,c.jsx)(C,{})}),(0,c.jsx)(s.K,{header:"Worklog",leftIcon:"fa fa-clock",children:(0,c.jsx)(P,{settings:t,userId:this.userId,onSave:this.saveSetting,isAtlasCloud:this.isAtlasCloud})}),(0,c.jsx)(s.K,{header:"Default values",leftIcon:"fa fa-list",children:(0,c.jsx)(M,{settings:t,userId:this.userId,onSave:this.saveSetting})}),we&&(0,c.jsx)(s.K,{header:"Meetings",leftIcon:"fa fa-calendar",children:(0,c.jsx)(U,{settings:t,userId:this.userId,onSave:this.saveSetting,onChange:this.stateChanged})}),(!v.zM||this.isExtnConnected)&&!v.mx&&(0,c.jsx)(s.K,{header:"Menu options",leftIcon:"fa fa-bars",children:(0,c.jsx)(je,{settings:t,userId:this.userId,onSave:this.saveSetting})})]})}):null}}const Ce=Ne}}]);