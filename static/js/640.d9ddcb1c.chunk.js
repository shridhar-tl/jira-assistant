"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[640],{1857:(e,t,s)=>{s.d(t,{Z:()=>k});var o=s(7313),n=s(6123),r=s.n(n),l=s(816),i=s(1485),a=s(1329),u=s(6417);const c=(0,u.jsx)("div",{className:"empty-group-msg",children:"Drag and drop column here to group data"}),d=(0,u.jsx)("span",{children:"Drag and drop more columns here"});class p extends o.PureComponent{constructor(...e){super(...e),this.toggleSort=(e,t)=>{const{groupBy:s,foldable:o,onChange:n}=this.props,r=[...s];r[e]={...r[e],sortDesc:t},n(r,o,"sort")},this.changeSettings=(e,t)=>{const{groupBy:s,foldable:o,onChange:n}=this.props,r=[...s];r[e]={...r[e],settings:t},n(r,o,"settings")},this.removeGroup=e=>{const{groupBy:t,foldable:s,onChange:o}=this.props,n=[...t];n.splice(e,1),o(n,s,"remove")},this.toggleMode=e=>{const{groupBy:t,foldable:s,onChange:o}=this.props;!!s!==e&&o(t,e,"mode")},this.columnReordered=e=>{const{foldable:t,onChange:s}=this.props;s(e,t,"rearrange")}}render(){const{groupBy:e,foldable:t,toggleColumns:s,showColumns:o,allColumns:n,displayColumns:r}=this.props;let l=null;return r&&r.length<(null===n||void 0===n?void 0:n.length)?l=`${r.length} (${n.length})`:null!==n&&void 0!==n&&n.length&&(l=null===n||void 0===n?void 0:n.length),(0,u.jsxs)("div",{className:"group-bar",children:[(0,u.jsx)("span",{className:"fa group-mode-icon fa-columns"+(o?" active":""),onClick:s,title:"Click to choose what column to display",children:l&&(0,u.jsx)("span",{className:"badge badge-warning visible-cols",children:l})}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-th-list"+(t?"":" active"),onClick:()=>this.toggleMode(!1),title:"Display group values in columns"}),e.length>0&&(0,u.jsx)("span",{className:"fa group-mode-icon fa-indent"+(t?" active":""),onClick:()=>this.toggleMode(!0),title:"Display group values in foldable row"}),(0,u.jsx)("span",{className:"group-label",children:"Group by:"}),(0,u.jsx)("div",{className:"group-list-container",children:(0,u.jsx)(i.bt,{className:"group-list",items:e,itemType:"column",onChange:this.columnReordered,accepts:["column"],placeholder:e.length?d:c,children:(e,t,s)=>(0,u.jsx)(g,{group:e,index:t,toggleSort:this.toggleSort,removeGroup:this.removeGroup,settingsChanged:this.changeSettings,dropProps:s},t)})})]})}}const h=p;class g extends o.PureComponent{constructor(...e){super(...e),this.removeGroup=()=>this.props.removeGroup(this.props.index),this.sortAsc=()=>this.props.toggleSort(this.props.index,!1),this.sortDesc=()=>this.props.toggleSort(this.props.index,!0),this.setRef=e=>{this.el=e;const{dropProps:{dropConnector:t}={}}=this.props;t&&t(e)},this.changeSettings=({prop:e,type:t,value:s,default:o,aggregate:n})=>{const{settingsChanged:r,group:l,index:i}=this.props;let{settings:a}=l;if(a=a?{...a}:{},"check"===t){const t=void 0===a[e]?o:a[e];a[e]=!t}else a[e]=s;r(i,a)},this.showMenu=e=>{const{group:{groupOptions:t,settings:s}}=this.props,o=t.map((e=>{if(e.separator)return{separator:!0};const{label:t,type:o,prop:n,value:r="check"===o,default:l}=e,i=null===s||void 0===s?void 0:s[n];return{label:t,icon:`${"fa fa-"+(i===r||void 0===i&&l?"check-":"")}${"check"===o?"square":"circle"}`,command:()=>this.changeSettings(e)}}));(0,i.pT)(e,o)}}render(){var e,t;const{group:s}=this.props;return(0,u.jsxs)("div",{ref:this.setRef,className:"group-list-item",onContextMenu:null!==(e=s.groupOptions)&&void 0!==e&&e.length?this.showMenu:void 0,children:[!s.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-asc sort-icon",onClick:this.sortDesc,title:"Click to sort desc"}),!!s.sortDesc&&(0,u.jsx)("span",{className:"fa fa-sort-amount-desc sort-icon",onClick:this.sortAsc,title:"Click to sort asc"}),s.displayText,!(null===(t=s.groupOptions)||void 0===t||!t.length)&&(0,u.jsx)("span",{className:"fa fa-wrench margin-l-5 pointer",onClick:this.showMenu,title:"Click to change settings"}),(0,u.jsx)("span",{className:"fa fa-times",onClick:this.removeGroup})]})}}var m=s(2725);class v extends o.PureComponent{constructor(e){super(e),this.hideColumns=()=>{let{columns:e}=this.state,t=e.filter((e=>e.selected));t=t.length===e.length?null:t.map((e=>e.id)),e=null,this.props.onChange(t)},this.selectionChanged=(e,t)=>{let{columns:s}=this.state;s=[...s],s[e]={...s[e],selected:t},this.setState({columns:s})},this.state=this.getState(e)}getState(e){const{displayColumns:t}=e;return{columns:this.props.columns.map((({id:e,displayText:s})=>({id:e,displayText:s,selected:!t||!!~t.indexOf(e)})))}}render(){const{columns:e}=this.state;return(0,u.jsx)("div",{className:"columns-list-container",children:(0,u.jsxs)("div",{className:"columns-list",children:[(0,u.jsxs)("div",{className:"column-list-title",children:[(0,u.jsx)("span",{className:"fa fa-times",onClick:this.hideColumns}),(0,u.jsx)("span",{children:"Choose Columns"})]}),(0,u.jsx)("div",{className:"columns-list-items",children:e.map(((e,t)=>(0,u.jsx)("div",{className:"column-list-item",children:(0,u.jsx)(m.XZ,{label:e.displayText,checked:e.selected,onChange:e=>this.selectionChanged(t,e)})},t)))})]})})}}const y=v;var x=s(2805),C=s(4616);const f=["column"];class j extends o.PureComponent{constructor(e){super(e),this.getGroupColumnRenderer=e=>(t,s)=>(0,u.jsx)("th",{rowSpan:e?2:void 0,className:"group-header foldable"},s),this.renderTableBody=(e,t)=>t&&t.length?this.getGroupRenderer(e,t):this.getRowRenderer(e),this.getCellRenderer=e=>(t,s)=>{if(!t.visible)return null;const{field:o,hasPath:n,format:r,type:l,viewComponent:i,props:a}=t;let c=n?(0,x.aM)(e,o):e[o];return r&&"function"===typeof r&&(c=r(c,e,o)),i?(0,u.jsx)(i,{value:c,...a},s):(0,u.jsx)("td",{exportType:l,children:c},s)},this.toggleGroupVisibility=e=>{},this.sortColumnChanged=(e,t)=>{const{groupBy:s,state:{groupFoldable:o,data:n},props:{displayColumns:r}}=this,l={groupFoldable:o},i=null===s||void 0===s?void 0:s.length;return i&&(l.data=this.sortGroupedData(n,s,e,t)),this.setState(l),this.props.onChange({groupBy:s,groupFoldable:o,displayColumns:r,sortField:e,isDesc:t}),i?l.data:void 0},this.onGroupChanged=(e,t,s)=>{const{data:o}=this.state,n={data:o,groupFoldable:t},{displayColumns:r,sortField:l,isDesc:i,groupBy:a}=this.props;"sort"===s&&(n.data=this.sortGroupedData(o,e,l,i)),e="mode"!==s?e.map((({id:e,field:t,fieldKey:s,sortDesc:o,settings:n})=>({id:e,field:t,fieldKey:s,sortDesc:o,settings:n}))):a,this.setState(n),this.props.onChange({groupBy:e,displayColumns:r,groupFoldable:t,sortField:l,isDesc:i})},this.toggleColumns=()=>{this.setState({showColumns:!this.state.showColumns})},this.columnSelectionChanged=e=>{const{groupBy:t,groupFoldable:s,sortField:o,isDesc:n}=this.props;this.setState({showColumns:null},(()=>this.props.onChange({groupBy:t,displayColumns:e,groupFoldable:s,sortField:o,isDesc:n})))},(0,C.f3)(this,"UtilsService"),this.convertDate=this.$utils.convertDate,this.state=this.getNewState(e)}UNSAFE_componentWillReceiveProps(e){this.setState(this.getNewState(e))}getNewState(e){const{groupBy:t,columns:s,displayColumns:o,dataset:n,groupFoldable:r,sortField:l,isDesc:i}=e,a={...this.state,groupFoldable:r};this.columns===s&&o===this.displayColumns||(a.allColumns=this.getColumnSchema(e),a.columns=a.allColumns,this.columns=s,this.displayColumns=o);const u=this.groupBy!==t;if(u)if(a.groupBy=this.getGroupedColumnSchema(t,a.allColumns),this.groupBy=t,t&&t.length){const e=t.map((e=>"string"===typeof e?e:e.id||e.field));a.columns=a.allColumns.filter((t=>t.visible&&!~e.indexOf(t.id)))}else a.columns=a.allColumns.filter((e=>e.visible));return(u||this.isDesc!==i||this.sortField!==l||this.dataset!==n)&&(a.data=this.prepareDataForRendering(n,a.groupBy,l,i),this.dataset=n,this.sortField=l,this.isDesc=i),a}getGroupedColumnSchema(e,t){let s=null;return Array.isArray(e)&&e.length&&(t=t.reduce(((e,t)=>(e[t.id]=t,e)),{}),s=e.map((e=>{let s,o=e,n=e,r=o,l=!1;if("object"===typeof e&&(o=e.field,n=e.id||o,r=e.fieldKey||e.groupKey||o,l=e.sortDesc,s=e.settings),!(e=t[n]))return null;const{displayText:i,allowSorting:a,groupOptions:u,type:c,viewComponent:d}=e;return{id:n,field:o,viewComponent:d,fieldKey:r,displayText:i,allowSorting:a,groupOptions:u,sortDesc:l,visible:!0,settings:s,type:c}})).filter(Boolean),s.length||(s=null)),s}getColumnSchema(e){const{columns:t,allowSorting:s=!0,allowGrouping:o=!0}=e;let{displayColumns:n}=e;Array.isArray(n)||(n=null);const r=!!n&&n.some((e=>e.startsWith("-")));return t.map((e=>{const{field:t,fieldKey:l=t,allowSorting:i=s,groupText:a,allowGrouping:u=o,groupOptions:c,format:d,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}=e,y=e.id||t;return{id:y,field:e.field,fieldKey:l,hasPath:(null===t||void 0===t?void 0:t.indexOf("."))>0,displayText:e.displayText||t,visible:!n||(r?!n.includes(`-${y}`):n.includes(y)),allowSorting:i,groupText:a,allowGrouping:u,groupOptions:c,format:d,type:p,viewComponent:h,props:g,sortValueFun:m,groupValueFunc:v}}))}prepareDataForRendering(e,t,s,o){return t&&t.length&&Array.isArray(e)&&e.length?this.groupData(e,t,s,o):s?e.sortBy(s,o):e}groupData(e,t,s,o,n){var r;if(n=n?`${n}_`:"",!t.length)return s?e.sortBy(s,o):e;const{0:{field:i,fieldKey:a,sortDesc:u,settings:c,type:d}}=t;t=t.slice(1);const p=a&&a!==i,h=(t,s=null)=>e.groupBy(t,null,p?i:s);let g=null===c||void 0===c?void 0:c.funcType;const m=this.convertDate;let v=null;if("date"===d||"datetime"===d){g=g||"yyyy-MM (MMMM)";let e=e=>{const t=m(e[i]);return t?t.format(g):t};"friendly"===g&&(e=e=>{const t=e[i];return t?l(t).fromNow():t}),v=h(e,((e,t)=>({text:t||"(no date)"})))}else if(!g||"number"!==d&&"seconds"!==d){switch(null===c||void 0===c?void 0:c.valueType){case"count":v=[{key:e.length,values:e}];break;case"distinct":v=[{key:null===(r=e.distinct(a||i))||void 0===r?void 0:r.length,values:e}];break;default:v=h(a||i)}}else switch(g){default:v=h(a||i);break;case"sum":v=[{key:e.sum(i),values:e}];break;case"avg":v=[{key:e.avg(i),values:e}];break;case"count":const t=e.count((e=>e[i]>0));v=[{key:t,keyObj:{text:`${t} has value`},values:e}]}return v.sortBy("key",u).map(((e,r)=>({key:e.key,keyObj:e.keyObj,path:n+r,rowSpan:e.values.length,values:this.groupData(e.values,t,s,o,n+r)})))}getColumnGrouping(e){const t=e.groupBy("groupText",(e=>e.visible)).filter((({key:e})=>!!e));return t.length?t:void 0}getColGroupingLen(e){if(e)return e.reduce(((e,t)=>(e[t.key]=t.values.length,e)),{})}getGroupedRow(e){return e?(0,u.jsx)(a.lE,{children:e.map((e=>e.values.map(this.getColumnRenderer(!1))))}):null}getColumnRenderer(e,t){return(s,o)=>{if(!s.visible)return null;let n,r=!e&&s.allowSorting?s.fieldKey||s.field:void 0,l=s.allowGrouping,c=t?2:void 0,d=s.displayText;if(t&&s.groupText){if(d=s.groupText,n=t[d],!n)return null;delete t[d],c=void 0,r=void 0,l=!1}return!1===l?(0,u.jsx)(a.sg,{sortBy:r,rowSpan:c,colSpan:n,children:d},o):(0,u.jsx)(i._l,{itemType:"column",item:s,itemTarget:f,children:(e,t)=>(0,u.jsx)(a.sg,{rowSpan:c,colSpan:n,dragConnector:e,sortBy:r,children:d})},o)}}getRowRenderer(e){return(t,s)=>(0,u.jsx)("tr",{children:this.renderRowCells(e,t)},s)}renderRowCells(e,t){return e.map(this.getCellRenderer(t))}getGroupRenderer(e,t){const{groupFoldable:s}=this.state;return s?(s,o)=>this.renderFoldableGroupRow(s,o,e,t):(s,o)=>this.renderGroupRow(s,o,e,t)}renderFoldableGroupRow(e,t,s,n,r=0){var l;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent,c=r>0&&[].init(((e,t)=>(0,u.jsx)("td",{className:"group-indent-td"},t)),r),d=n.length>0&&(0,u.jsxs)("tr",{children:[c,(0,u.jsx)("td",{className:"group-toggler-td",title:`Click to ${e.hidden?"expand":"collapse"} group`,"group-path":e.path,onClick:this.toggleGroupVisibility,children:(0,u.jsx)("span",{className:"fa fa-caret-"+(e.hidden?"right":"down")})}),(0,u.jsx)("td",{className:"group-name-td",colSpan:n.length+s.length,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,value:e.keyObj||e.key,settings:i.settings}):e.key||""})]},e.key);let p=null;return n.length>0?p=e.values.map(((e,t)=>this.renderFoldableGroupRow(e,t,s,n.slice(1),r+1))):(p=s.map(this.getCellRenderer(e)),p=(0,u.jsxs)("tr",{children:[c,p]},t)),(0,u.jsxs)(o.Fragment,{children:[d,p]},t)}renderGroupRow(e,t,s,n,r=null){var l;const i=n[0],a="value"!==((null===i||void 0===i||null===(l=i.settings)||void 0===l?void 0:l.valueType)||"value")?null:null===i||void 0===i?void 0:i.viewComponent;let c=n.length>0&&(0,u.jsx)("td",{rowSpan:e.rowSpan,children:a?(0,u.jsx)(a,{tag:"span",count:e.rowSpan,settings:null===i||void 0===i?void 0:i.settings,value:e.keyObj||e.key}):e.key||""});r&&c?c=(0,u.jsxs)(o.Fragment,{children:[r,c]}):r&&0===t&&(c=r);let d=null;return n.length>0?d=e.values.map(((e,t)=>this.renderGroupRow(e,t,s,n.slice(1),0===t&&c))):(d=s.map(this.getCellRenderer(e)),d=(0,u.jsxs)("tr",{children:[c,d]},t)),d}sortGroupedData(e,t,s,o,n){if(n=n?`${n}_`:"",0===t.length)return s?e.sortBy(s,o):e;const{sortDesc:r}=t[0];return t=t.slice(1),e.sortBy("key",r).map(((e,r)=>({...e,path:n+r,values:this.sortGroupedData(e.values,t,s,o,n+r)})))}render(){const{exportSheetName:e,noRowsMessage:t,sortField:s,isDesc:o,displayColumns:n,className:l,hideGroups:i}=this.props,{allColumns:c,columns:d,groupBy:p,groupFoldable:g,data:m,showColumns:v}=this.state,x=this.getColumnGrouping(d),C=this.getColGroupingLen(x);return(0,u.jsxs)("div",{className:r()("groupable-grid",i&&"groups-hidden"),children:[v&&(0,u.jsx)(y,{onChange:this.columnSelectionChanged,columns:c,displayColumns:n}),!i&&(0,u.jsx)(h,{groupBy:p||[],displayColumns:n,allColumns:c,foldable:g,showColumns:v,onChange:this.onGroupChanged,toggleColumns:this.toggleColumns}),(0,u.jsxs)(a.TT,{className:l,dataset:m,exportSheetName:e,sortBy:s,isDesc:o,onSort:this.sortColumnChanged,children:[(0,u.jsxs)(a.Et,{children:[(0,u.jsxs)(a.lE,{children:[!!g&&p&&p.map(this.getGroupColumnRenderer(C)),!g&&p&&p.map(this.getColumnRenderer(!0,C)),d.map(this.getColumnRenderer(!1,C))]}),this.getGroupedRow(x)]}),(0,u.jsx)(a.XP,{children:this.renderTableBody(d,p)}),(0,u.jsx)(a.ch,{span:d.length,children:t})]})]})}}const k=j},2251:(e,t,s)=>{s.d(t,{Sn:()=>i,qm:()=>u,lc:()=>h,m4:()=>g,y5:()=>m,Y3:()=>v,Bx:()=>y,_t:()=>f,a3:()=>w,Hv:()=>S,aS:()=>T,s$:()=>N,H:()=>F,ph:()=>R});var o=s(7313),n=s(6417);class r extends o.PureComponent{render(){const{tag:e="td",className:t,settings:s,count:o}=this.props,r=!!o&&!(null===s||void 0===s||!s.showGroupCount)&&(0,n.jsxs)("span",{className:"badge badge-info margin-l-5",title:`Total issues in group: ${o}`,children:["(",o,")"]});return(0,n.jsx)(e,{className:t,children:this.renderControl(r)})}}const l=r;const i=class extends l{renderControl(){const{value:e}=this.props;return null!==e&&void 0!==e&&e.length?`${e.length} comments`:null}};var a=s(6310);const u=class extends l{constructor(e){super(e),(0,a.f3)(this,"UserUtilsService")}renderControl(e){const{value:t,date:s=t,quick:o,dateOnly:r}=this.props;if(!s)return e;if(null!==t&&void 0!==t&&t.text)return(0,n.jsxs)(n.Fragment,{children:[t.text," ",e]});const l=r?this.$userutils.formatDate:this.$userutils.formatDateTime;return(0,n.jsxs)("span",{title:o?l(s):null,children:[o&&"about "," ",l(s,o?"quick":null)]})}};var c=s(4616),d=s(2725),p=s(794);const h=class extends l{constructor(e){super(),e.getTicketUrl?this.getTicketUrl=e.getTicketUrl:((0,c.f3)(this,"UserUtilsService"),this.getTicketUrl=this.$userutils.getTicketUrl)}renderControl(e){var t;const{value:s,issue:o=s,title:r,className:l,settings:i}=this.props;if(!o)return e;if("string"===typeof o)return o;const a=o.key,u=o.fields,c=null===u||void 0===u?void 0:u.issuetype,h=null===u||void 0===u?void 0:u.summary,g=null===c||void 0===c?void 0:c.iconUrl,m=null===c||void 0===c?void 0:c.name;let v=null===u||void 0===u||null===(t=u.status)||void 0===t?void 0:t.name;v=!!v&&!1!==(null===i||void 0===i?void 0:i.showStatus)&&`(${v})`;const y=null===i||void 0===i?void 0:i.valueType;let x=a||"Unknown";return"summary"===y?x=h:"both"===y&&(x=(0,n.jsxs)(n.Fragment,{children:[x," - ",h]})),(0,n.jsxs)(p.Z,{href:this.getTicketUrl(a),title:r,className:`link ${l}`,children:[!!g&&(0,n.jsx)(d.Ee,{src:g,title:m}),(0,n.jsxs)("span",{title:h,children:[x," ",v]}),e]})}};const g=class extends l{constructor(){super(),(0,c.f3)(this,"UserUtilsService")}renderControl(){const{value:e}=this.props;if(null===e||void 0===e||!e.length)return null;const t=this.$userutils.getTicketUrl;return(0,n.jsx)("ul",{className:"tags",children:e.map(((e,s)=>{const o=e.type,r=o&&(e.inwardIssue?o.inward:o.outward);return(0,n.jsx)("li",{children:(0,n.jsx)(h,{tag:"span",issue:o?e.inwardIssue||e.outwardIssue:e,title:r,getTicketUrl:t,className:"badge badge-pill skin-bg-font"})},s)}))})}};const m=class extends l{renderControl(e){const{value:t,textField:s="name",iconField:o="iconUrl"}=this.props;return t?(0,n.jsxs)(n.Fragment,{children:[!!o&&(0,n.jsx)(d.Ee,{src:t[o]}),t[s]," ",e]}):e}};const v=class extends l{renderControl(){const{value:e,progress:t=e}=this.props;return null!==t&&void 0!==t&&t.percent?`${t.percent}%`:null}};const y=class extends l{renderControl(e){var t;const{value:s,project:o=s,settings:r}=this.props;if(!o)return e;if("string"===typeof o)return o;const l=null===(t=o.avatarUrls)||void 0===t?void 0:t["16x16"],i=null===r||void 0===r?void 0:r.valueType;let a=o.key;return"name"===i?a=o.name:"both"===i&&(a=(0,n.jsxs)(n.Fragment,{children:[o.name," (",o.key,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!l&&(0,n.jsx)(d.Ee,{src:l}),a,e]})}};var x=s(2805);const C=/^com\..*\[.*\].*$/;const f=class extends l{getRepeator(e){const{tagProp:t="name",titleProp:s,iconClass:o,hrefProp:r,hideZero:l}=this.props,i=!!o&&(0,n.jsx)("span",{className:`fa ${o}`});return r?(o,a)=>{const u="string"===typeof o?o:o[t];if(0===u&&l)return null;const c=(0,n.jsxs)(p.Z,{href:o[r]||void 0,title:s?o[s]:void 0,className:"link badge badge-pill skin-bg-font",children:[i," ",u]});return e?c:(0,n.jsx)("li",{children:c},a)}:(o,r)=>{let a=o;if("string"===typeof o)C.test(o)&&(a=(o=(0,x.Kk)(o))[t||"name"]||a);else if(a=o[t],0===a&&l)return null;const u=(0,n.jsxs)("span",{title:s?o[s]:void 0,className:"badge badge-pill skin-bg-font",children:[i," ",a]});return e?u:(0,n.jsx)("li",{children:u},r)}}renderControl(){const{value:e}=this.props;return e?Array.isArray(e)?(0,n.jsx)("ul",{className:"tags",children:e.map(this.getRepeator())}):"object"===typeof e?this.getRepeator(!0)(e,0):void 0:null}};var j=s(1485),k=s(4074);class b extends l{constructor(e){super(e),this.startTimer=()=>this.context.startTimer(this.props.value),this.showContext=e=>{const t=[...this.contextMenu];try{const e=this.context.getElapsedTimeInSecs(),s=(null===e||void 0===e?void 0:e.key)===this.props.value,o=null===e||void 0===e?void 0:e.isRunning;s?(o?t.push({label:"Pause timer",icon:"fa fa-pause",command:this.context.pauseTimer}):t.push({label:"Resume timer",icon:"fa fa-play",command:this.context.resumeTimer}),t.push({label:"Stop timer",icon:"fa fa-stop",command:this.context.stopTimer})):t.push({label:"Start timer",icon:"fa fa-play",command:this.startTimer})}catch{}(0,j.pT)(e,t)},(0,c.f3)(this,"UserUtilsService","BookmarkService"),this.contextMenu=[!e.hideWorklog&&{label:"Add worklog",icon:"fa fa-clock-o",command:this.addWorklog.bind(this)},{label:"Bookmark",icon:"fa fa-bookmark",command:()=>this.addBookmark()}].filter(Boolean)}renderControl(e){const{value:t,url:s=this.$userutils.getTicketUrl(t),hideContext:o}=this.props;return t?(0,n.jsxs)(n.Fragment,{children:[!o&&(0,n.jsx)("i",{className:"fa fa-ellipsis-v margin-r-8",onClick:this.showContext}),(0,n.jsx)(p.Z,{href:s,className:"link strike",children:t}),e]}):e}addWorklog(){const{onAddWorklog:e,value:t}=this.props;e?e(t):console.error("Add worklog function is not yet implemented")}addBookmark(){const{value:e,onBookmark:t}=this.props;this.$bookmark.addBookmark([e],!t).then(t)}}b.contextType=k.a2;const w=b;const S=class extends l{constructor(e){super(e),(0,c.f3)(this,"UtilsService")}renderControl(e){var t;const{value:s,inputType:o="secs",format:r=!0,days:l,converter:i}=this.props;let{timespent:a=s}=this.props;return i&&(a=i(a)),a?("ticks"===o&&a>500&&(a=parseInt(a/1e3)),a=null!==(t=a)&&void 0!==t&&t.text?a.text:!1===r?this.$utils.convertSecs(a,{showZeroSecs:!0}):this.$utils.formatSecs(a,void 0,void 0,l),(0,n.jsxs)("span",{children:[a," ",e]})):e}};const T=class extends l{renderControl(){const{value:e}=this.props;if(!e)return null;const{remainingEstimate:t,timeSpent:s}=e;return s||t?(0,n.jsxs)("span",{children:[s," (",t," remaining)"]}):null}};const N=class extends l{renderControl(e){var t;let{value:s}=this.props;return s?(s=(null===(t=s)||void 0===t?void 0:t.text)||s,"object"!==typeof s?(0,n.jsxs)(n.Fragment,{children:[s," ",e]}):Array.isArray(s)?s.length?this.getTagRenderer(s[0],s):null:this.getTagRenderer(s,s)):e}getTagRenderer(e,t){return"string"===typeof e?(0,n.jsx)(f,{value:t,tagProp:"",tag:"span"}):e.value?(0,n.jsx)(f,{value:t,tagProp:"value",tag:"span"}):e.name?(0,n.jsx)(f,{value:t,tagProp:"name",tag:"span"}):JSON.stringify(e)}};const F=class extends l{renderControl(e){var t,s;const{value:o,user:r=o,settings:l}=this.props;if(!r)return e;if("string"===typeof r)return r;const i=!(null===l||void 0===l||!l.showImage)&&((null===(t=r.avatarUrls)||void 0===t?void 0:t["32x32"])||(null===(s=r.avatarUrls)||void 0===s?void 0:s["48x48"])),a=null===l||void 0===l?void 0:l.valueType;let u=r.displayName;return"email"===a?u=r.emailAddress:"both"===a&&(u=(0,n.jsxs)(n.Fragment,{children:[r.displayName," (",r.emailAddress,")"]})),(0,n.jsxs)(n.Fragment,{children:[!!i&&(0,n.jsx)(d.Ee,{className:"img-x32",src:i}),u,e]})}};function R(e){switch(e){case"ageindays":return{Component:u,props:{quick:!0}};case"date":return{Component:u,props:{dateOnly:!0}};case"datetime":return{Component:u};case"parent":return{Component:h,props:{settings:{valueType:"both"}}};case"progress":return{Component:v};case"project":return{Component:y,props:{settings:{valueType:"both"}}};case"timespent":return{Component:S};case"timetracking":return{Component:T};case"comments-page":return{Component:i};case"user":return{Component:F};case"votes":return{Component:f,props:{tagProp:"votes"}};case"issuetype":case"status":case"resolution":case"priority":return{Component:m};default:return{Component:N}}}},218:(e,t,s)=>{s.d(t,{Z:()=>i});var o=s(7313),n=s(2544),r=s(6417);class l extends o.PureComponent{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(null===e||void 0===e?void 0:e.trim(),null)}}render(){const{jql:e}=this.props;return(0,r.jsx)("div",{className:"jql-editor",children:(0,r.jsx)(n.Z,{className:"jql-query",multiline:!0,placeholder:"JQL query to fetch data",value:e,onChange:this.onChange})})}}const i=l}}]);