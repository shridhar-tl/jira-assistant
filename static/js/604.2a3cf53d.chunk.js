"use strict";(globalThis.webpackChunkjira_assistant=globalThis.webpackChunkjira_assistant||[]).push([[604],{8807:(e,t,s)=>{s.d(t,{A:()=>n});var i=s(9950);const n=function(e){const[t,s]=i.useState(null===e||void 0===e||e);return[t,i.useCallback((()=>s((e=>!e))),[s]),s]}},4401:(e,t,s)=>{s.d(t,{A:()=>g});var i=s(9950),n=s(8738),a=s.n(n),r=s(8670),o=s(4967),l=s(6778),c=s(530),d=s(4353),h=s(374),u=s(2285),p=s(5006),m=s(4922),x=(s(4432),s(4414));const g=function(e){const{title:t,iconClass:s,hideRefresh:n,gadgetHint:d,hideMenu:h,isLoading:m,loadingProgress:g,customActions:y,onRefresh:j,settings:v}=e,b=i.useRef({}),S=!1!==e.isGadget,w=v||{fullWidth:!1,fullHeight:!1},[N,C]=(0,i.useState)(w.fullWidth||!1),[k,D]=(0,i.useState)(w.fullHeight||!1),[R,P]=(0,i.useState)(!1),T=i.useId();(0,i.useEffect)((()=>{v&&(C(v.fullWidth),D(v.fullHeight))}),[v]);const{$analytics:A}=(0,p.WQ)("AnalyticsService"),F=()=>{P(!R),R?document.body.classList.remove("fs-layout"):document.body.classList.add("fs-layout")},$=(t,s)=>{e.onAction&&e.onAction({type:t,data:s},e.model,e.index)};b.current.props=e,b.current.isGadget=S,b.current.fullWidth=N,b.current.fullHeight=k,b.current.isFullScreen=R,b.current.$analytics=A,b.current.setSizeOptions=(e,t)=>{w.fullWidth=e,w.fullHeight=t,C(e),D(t),V()},b.current.toggleFullScreen=F,b.current.performAction=$;const V=()=>{$(u.v.SettingsChanged,w)},B=e=>(0,c.O0)(e,f(b.current)),E=i.useCallback((e=>(0,c.O0)(e,f(b.current))),[]),{children:I,tabLayout:O,gadgetType:W}=e;if(O)return(0,x.jsx)(x.Fragment,{children:I});const H=N||!S,G=k||!S,L=a()("gadget",e.className,{docked:!S,"full-width":H&&!R,"full-height":G&&!R,"half-width":!H&&!R,"half-height":!G&&!R,"full-screen":R});return(0,x.jsxs)("div",{ref:t=>{b.current.rootEl=t;const{dropProps:{dropConnector:s}={}}=e;s&&s(t)},className:L,"data-test-id":W,children:[m&&"number"!==typeof g&&(0,x.jsx)(l.aH,{}),m&&"number"===typeof g&&(0,x.jsx)(l.pT,{progress:g,backdrop:!0}),(0,x.jsx)(r.Z,{header:(()=>{const{subTitle:i,draggableHandle:a}=e,r="gadget-header"+(a?" movable":"");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{ref:a,className:r,onContextMenu:S?B:null,onDoubleClick:F,children:[(0,x.jsx)("i",{className:`fa ${s}`})," ",t," ",i&&(0,x.jsxs)("span",{children:[" - ",i]}),(0,x.jsxs)("div",{className:"float-end",children:[d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(o.m,{target:`.icon-hint-${T}`,children:d}),(0,x.jsx)("i",{className:`fa fa-info-circle icon-hint icon-hint-${T}`,"data-pr-position":"bottom"})]}):null,y,!n&&(0,x.jsx)(l.$n,{text:!0,icon:"fa fa-refresh",disabled:m,onClick:c||j,title:"Refresh data"}),!h&&(0,x.jsx)(l.$n,{text:!0,icon:"fa fa-wrench",onClick:E})]})]}),(0,x.jsx)("div",{className:"clearfix"})]});var c})(),children:I})]})};function f(e){const{$analytics:t,performAction:s,isGadget:i,isFullScreen:n,fullWidth:a,fullHeight:r,rootEl:o,setSizeOptions:l,toggleFullScreen:c,props:{title:d,hideExport:p,hideCSVExport:x,hideXLSXExport:g,hidePDFExport:f}}=e,j=i?[{separator:!0},{label:"Full width",icon:`fa fa-${a?"check-":""}circle fs-16 margin-r-5`,command:()=>l(!a,r)},{label:"Full height",icon:`fa fa-${r?"check-":""}circle fs-16 margin-r-5`,command:()=>l(a,!r)},{separator:!0},{label:"Remove",icon:"fa fa-remove",command:()=>{t.trackEvent("Gadget removed",m.hB.GadgetActions,d),s(u.v.RemoveGadget)}}]:[],v=[];return p||(v.push({separator:!0}),x||v.push({label:"Export to CSV",icon:"fa fa-file-text",command:()=>y(h.A.CSV,d,o,t)}),g||v.push({label:"Export to Excel",icon:"fa fa-file-excel",command:()=>y(h.A.XLSX,d,o,t)}),f||v.push({label:"Export to PDF",icon:"fa fa-file-pdf",command:()=>y(h.A.PDF,d,o,t)})),[{label:"Toggle full screen",icon:"fa fa-"+(n?"compress":"expand"),command:()=>c()},...v,...j]}function y(e,t,s,i){const n=new d.L;n.fileName=t,n.format=e||e,n.element=s,i.trackEvent("Export data",m.hB.GadgetActions,n.format),n.export()}},9109:(e,t,s)=>{s.d(t,{A:()=>o});s(9950);var i=s(8738),n=s.n(i),a=s(6778),r=s(4414);const o=function({title:e,onBackClick:t,show:s,onHide:i,children:o,contentClassName:l,controls:c}){return(0,r.jsx)("div",{className:"side-bar-container "+(s?"open":"closed"),children:(0,r.jsxs)("div",{className:"site-bar-block",children:[(0,r.jsxs)("div",{className:"header"+(t?" ps-0":""),children:[(0,r.jsx)(a.$n,{className:"close-icon",icon:"fa fa-times",onClick:i,title:"Hide this block"}),c,t&&(0,r.jsx)(a.$n,{className:"back-icon float-start",icon:"fa fa-arrow-left",onClick:t,title:"Configure data source"}),(0,r.jsx)("h2",{className:"title",children:e})]}),(0,r.jsx)("div",{className:n()("site-bar-content",l),children:o})]})})}},9604:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var i=s(9950),n=s(2935),a=s(5006);const r="reports_SayDoRatioReport";var o=s(4401),l=s(9109),c=s(5459),d=s(6778),h=s(4414);const u=function({settings:e,show:t,onHide:s,onDone:n}){var a;const[r,o]=i.useState(e),[u,p]=i.useState(!1),m=i.useRef({});m.current.settings=r,m.current.onDone=n;const x=i.useCallback((e=>{const t={...m.current.settings,...e};o(t)}),[]),g=i.useCallback((e=>x({sprintBoards:e})),[x]),f=i.useCallback(((e,t)=>x({[t]:parseInt(e)||""})),[x]),y=i.useCallback(((e,t)=>x({[t]:!!e})),[x]),j=i.useCallback((()=>{p(!0),m.current.onDone(m.current.settings).finally((()=>p(!1)))}),[]),v=(null===r||void 0===r||null===(a=r.sprintBoards)||void 0===a?void 0:a.length)>0&&r.noOfSprints>=3&&r.noOfSprints<13&&r.velocitySprints>=3&&!!r.storyPointField;return(0,h.jsxs)(l.A,{show:t,onHide:s,title:"Report Config",controls:null,width:"500",contentClassName:"p-0",children:[(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsx)("label",{className:"fw-bold pb-2 d-block",children:"Select Sprint Boards:"}),(0,h.jsx)(c.A,{value:r.sprintBoards,multiple:!0,onChange:g}),(0,h.jsx)("span",{className:"help-text d-block",children:"Select all the sprint boards for which you would like to view Say-Do Ratio report."})]}),(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsx)("label",{className:"fw-bold pb-2 d-block",children:"Number of Sprints:"}),(0,h.jsx)(d.fI,{value:r.noOfSprints,field:"noOfSprints",onChange:f,maxLength:2}),(0,h.jsx)("span",{className:"help-text d-block",children:"Provide the number of sprints to be displayed in chart and table. Minimum value allowed is 3."})]}),(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsx)("label",{className:"fw-bold pb-2 d-block",children:"Number of Sprints for velocity:"}),(0,h.jsx)(d.fI,{value:r.velocitySprints,field:"velocitySprints",onChange:f,maxLength:1}),(0,h.jsx)("span",{className:"help-text d-block",children:"Provide the number of sprints to be used for velocity calculation. The average completed story points count of all the sprints would be considered as velocity of each sprint. Minimum value allowed is 3."})]}),!(null!==r&&void 0!==r&&r.storyPointField)&&(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsx)("label",{className:"fw-bold pb-2 d-block msg-error",children:"Story Points field unavailable:"}),'Select value for "Story Points field" under General settings -> "Default Values" tab. Report cannot be generated without having "Story Points field" configured.']}),(0,h.jsxs)("div",{className:"p-3",children:[(0,h.jsx)(d.Sc,{checked:r.includeNonWorkingDays,field:"includeNonWorkingDays",onChange:y,label:"Include non working days in cycle time calculation"}),(0,h.jsx)("div",{className:"help-text d-block mt-1",children:"You can configure working days from General Settings page."})]}),(0,h.jsx)("div",{className:"p-3",children:(0,h.jsx)(d.$n,{className:"float-end me-2",icon:"fa fa-arrow-right",isLoading:u,iconPos:"right",label:"Generate Report",disabled:!v||u,onClick:j,title:"Generated report for selected boards"})})]})};var p=s(8807),m=s(5620);s(2813);const x=function(){return(0,h.jsx)("div",{className:"pad-15",children:(0,h.jsxs)("section",{children:[(0,h.jsx)("h2",{children:"How to Use the Say Do Ratio Report"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Say Do Ratio Report serves as a valuable tool to summarize achievements within each sprint and to monitor progress sprint over sprint."}),(0,h.jsxs)("li",{children:["Begin by selecting your filters and configuration options. Click on the ",(0,h.jsx)("span",{className:"fa fa-edit"})," icon located at the top right corner of the report to access report config:",(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Select Sprint Boards:"})," Choose all sprint boards for which you wish to view the report."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Number of Sprints to Display:"})," Specify the number of completed sprints you would like to include in the report. The minimum allowed is ",(0,h.jsx)("strong",{children:"3"}),"."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Number of Sprints for Velocity:"})," Indicate the number of sprints to be used for velocity calculations (min ",(0,h.jsx)("strong",{children:"3"}),", max ",(0,h.jsx)("strong",{children:"9"}),")."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Include Non-Working Days in Cycle Time Calculation:"})," Decide if you want to include non-working days based on your General settings."]})]})]}),(0,h.jsxs)("li",{children:["Once all configurations are set, click the ",(0,h.jsx)("strong",{children:'"Generate Report"'})," button to produce the report. Be prepared for potential delays based on the number of boards and sprints selected."]})]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Report Structure:"}),"This report displays a comprehensive table summarizing all boards and sprints, along with individual charts for each board. This report supports exporting data in ",(0,h.jsx)("strong",{children:"Excel"}),", ",(0,h.jsx)("strong",{children:"PDF"}),", and ",(0,h.jsx)("strong",{children:"CSV"})," formats. User feedback for suggestions and bug reports is appreciated to enhance this report."]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Table Structure:"}),"The report table contains the following columns:",(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Board Name:"})," Name of the selected board."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Velocity:"})," Expected velocity for the upcoming sprint based on completed story points."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Say-Do Ratio:"})," Average Say-Do Ratio for the sprints included in the report."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Cycle Time:"})," Average cycle time calculated using specific configurations."]}),(0,h.jsxs)("li",{children:[(0,h.jsx)("strong",{children:"Sprints:"})," Each sprint is represented in individual columns, showing the average Say-Do Ratio for that sprint."]})]})]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("strong",{children:"Chart Structure:"}),"The Y-axis represents story points, and the Y1-axis represents cycle time. The chart displays Velocity, Committed Story Points, and Completed Story Points as lines, with Cycle Time as bars."]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{children:(0,h.jsx)("strong",{children:"Important Note:"})}),(0,h.jsxs)("ul",{children:[!m.mx&&(0,h.jsx)("li",{children:" This report requires access to change logs and utilizes a new API introduced by Jira, currently available only to Jira Cloud users. It is still in preview and not yet rolled out to all the Jira Instances."}),m.mx&&(0,h.jsx)("li",{children:"This report requires access to change logs and utilizes a new API introduced by Jira, which is still in preview and not yet rolled out to all the Jira Instances."}),(0,h.jsx)("li",{children:"As it uses some of the API's which are still in preview, this report may not be functional for all Jira Instances immediately. Hence if it does not work then wait for few days so that your region gets the update from Jira."}),(0,h.jsxs)("li",{children:["While there are no APIs to retrieve information about stories that were part of a sprint at its initiation, accurate calculation of the Say-Do Ratio can be challenging if a story is removed during the sprint.",!m.mx&&(0,h.jsx)(h.Fragment,{children:" A workaround is implemented by using some of the Jira's internal API's, which is not available while you use oAuth authentication."}),m.mx&&(0,h.jsx)(h.Fragment,{children:" A workaround is implemented for upcoming sprints, but results for sprints that have already begun may not be precise."})]}),!m.mx&&(0,h.jsx)("li",{children:"Using the report with oAuth have lack of functionalities due to the above mentioned limitations."})]})]})]})})};var g=s(1427),f=s(3571);const y=getComputedStyle(document.documentElement),j=y.getPropertyValue("--text-color"),v=y.getPropertyValue("--text-color-secondary"),b=y.getPropertyValue("--surface-border");function S(e,t,s,i){return{maintainAspectRatio:!1,responsive:!0,plugins:{title:{display:!0,text:e,align:"center",font:{size:"16px"},padding:0},subtitle:{display:!0,text:t,padding:10},legend:{position:"bottom",labels:{color:j}},tooltip:{mode:"index",intersect:!1,padding:12,boxPadding:6,callbacks:{title:e=>`Sprint: ${e[0].label}`,label:e=>`${e.dataset.label}: ${e.formattedValue} ${"y1"===e.dataset.yAxisID?"days":"points"}`},bodySpacing:10}},hover:{mode:"index",intersect:!1},scales:{x:{ticks:{color:v},grid:{color:b}},y:{title:{display:!0,text:"Story Points"},min:s,max:i,ticks:{color:v},grid:{color:b}},y1:{position:"right",title:{display:!0,text:"Cycle Time (Days)"},ticks:{color:v},grid:{drawOnChartArea:!1}}}}}function w(e,t,s,i,n){return{label:s,data:e.map((({[t]:e})=>e)),fill:!1,borderColor:i,tension:.4,...n}}function N(e){return{label:"Cycle Time",data:e.map((({averageCycleTime:e})=>e)),backgroundColor:"#FFD700",yAxisID:"y1",type:"bar"}}const C=function({board:e}){const{data:t,options:s}=i.useMemo((()=>{const{name:t,sprintList:s,velocity:i}=e,n=s.filter(Boolean),a=n.map((e=>e.name)),r=[w(n,"velocity","Velocity","#4169E1",{borderDash:[5,5]}),w(n,"committedStoryPoints","Committed","#FF6347"),w(n,"completedStoryPoints","Completed","#228B22"),N(n)];let o=7,l=7;for(const e of r)if("y1"!==e.yAxisID)for(const t of e.data)t<o&&(o=t),t>l&&(l=t);return o<=2?o=0:o-=1,{data:{labels:a,datasets:r},options:S(t,`Velocity: ${null!==i&&void 0!==i?i:"(Unavailable)"}`,o,l+2)}}),[e]);return(0,h.jsx)("div",{className:"col-12 col-xl-6 mb-4",children:(0,h.jsx)(f.t,{className:"exportable-image",type:"line",data:t,options:s,height:"350px"})})};var k=s(2492),D=s(9051),R=s.n(D),P=s(6904);const T="D-MMM-YYYY h:mm A";const A=function({sprint:e,onClose:t}){const[s,n]=i.useState([]);return i.useEffect((()=>{const{issues:t}=e,s=F(t);n(s),(async()=>{const e=t.map((({key:e})=>e)),{$ticket:s}=(0,a.WQ)("TicketService"),i=await s.getTicketDetails(e,!1,["assignee","issuetype","priority","summary","status"]),r=F(t.map((e=>{const{fields:t}=i[e.key];return{...e,fields:{...e.fields,...t}}})));n(r)})()}),[e]),(0,h.jsxs)("div",{className:"sprint-info",children:[(0,h.jsxs)("div",{className:"sprint-info-header",children:[(0,h.jsx)("h2",{children:e.name}),(0,h.jsx)("span",{className:"close-icon fas fa-times",onClick:t})]}),(0,h.jsxs)("div",{className:"sprint-details",children:[(0,h.jsxs)("div",{className:"metric-item",children:[(0,h.jsx)("strong",{children:"Active during:"})," ",R()(e.startDate).format(T)," to ",R()(e.completeDate).format(T)]}),!!e.velocity&&(0,h.jsxs)("div",{className:"metric-item",children:[(0,h.jsx)("strong",{children:"Average Velocity:"})," ",e.velocity," (",parseFloat(e.velocityGrowth.toFixed(2)),"%)"]}),!!e.sayDoRatio&&(0,h.jsxs)("div",{className:"metric-item",children:[(0,h.jsx)("strong",{children:"Say Do Ratio:"})," ",e.sayDoRatio,"%"]}),!!e.averageCycleTime&&(0,h.jsxs)("div",{className:"metric-item",children:[(0,h.jsx)("strong",{children:"Cycle Time:"}),(0,h.jsx)(P.g4,{tag:"span",value:e.averageCycleTime,days:!0,inputType:"days"}),(0,h.jsxs)("span",{className:"ms-1",children:["(",e.cycleTimesIssuesCount," issues)"]})]})]}),s.map((e=>(0,h.jsxs)("div",{className:"issue-group",children:[(0,h.jsx)("h3",{children:e.title}),(0,h.jsxs)(g.ew,{dataset:e.issues,className:"issues-table",containerStyle:{height:"auto",maxHeight:"calc(100vh - 560px)"},exportable:!1,children:[(0,h.jsx)(g.D1,{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)(g.VP,{style:{width:"100px"},children:"Key"}),(0,h.jsx)(g.VP,{style:{maxWidth:"450px"},children:"Summary"}),(0,h.jsx)(g.VP,{style:{width:"150px"},children:"Priority"}),(0,h.jsx)(g.VP,{style:{width:"200px"},children:"Assignee"}),e.showCycleTime&&(0,h.jsx)(g.VP,{className:"text-center",style:{width:"70px",minWidth:"50px"},children:"Cycle Time"}),(0,h.jsx)(g.VP,{className:"text-center",style:{width:"70px",minWidth:"50px"},children:"Story Points"})]})}),(0,h.jsx)(g.vc,{children:e.issues.map((t=>(0,h.jsxs)("tr",{style:{backgroundColor:t.addedToSprint?"#fff3cd":""},children:[(0,h.jsxs)("td",{children:[(0,h.jsx)(P.Ek,{tag:"span",value:t}),t.addedToSprint&&(0,h.jsx)("span",{className:"ps-2",children:"*"})]}),(0,h.jsx)("td",{style:{maxWidth:"450px"},children:t.fields.summary}),(0,h.jsx)(P.mG,{value:t.fields.priority}),(0,h.jsx)(P.YP,{value:t.fields.assignee,settings:{showImage:!0}}),e.showCycleTime&&(0,h.jsx)("td",{className:"text-center",children:(0,h.jsx)(P.g4,{tag:"span",value:t.cycleTime,days:!0,inputType:"days"})}),(0,h.jsxs)("td",{className:"text-center",children:[!!t.initialStoryPoints&&(0,h.jsxs)("span",{className:"text-muted",children:[t.initialStoryPoints," ",(0,h.jsx)("span",{className:"fas fa-arrow-right mx-1"})]}),t.fields.storyPoints||"-"]})]},t.key)))})]})]},e.title)))]})};function F(e){return e.groupBy((e=>e.completed?"1Completed issues":e.completedOutside?"3Completed outside sprint":e.removedFromSprint?"4Removed from sprint":"2Issues not completed")).sortBy((e=>e.key)).map((({key:e,values:t})=>({title:`${e.substring(1)} (${t.length})`,showCycleTime:e.startsWith("1"),issues:t})))}const $="Unable to fetch change logs and hence data may not be accurate";const V=function({reportData:e,settings:t}){const[s,n]=i.useState();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(g.ew,{dataset:e,containerStyle:{height:"auto",maxHeight:"70%"},exportable:!1,children:[(0,h.jsx)(g.D1,{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)(g.VP,{sortBy:"name",children:"Board Name"}),(0,h.jsx)(g.VP,{sortBy:"velocity",className:"text-center",children:"Velocity"}),(0,h.jsx)(g.VP,{sortBy:"sayDoRatio",className:"text-center",children:"Say-Do-Ratio"}),(0,h.jsx)(g.VP,{sortBy:"averageCycleTime",className:"text-center",children:"Cycle Time"}),I(t.noOfSprints,(e=>{const s=t.noOfSprints===e+1?"Last sprint (n-1)":"Sprint n"+(e-t.noOfSprints);return(0,h.jsx)(g.VP,{className:"text-center",children:s},e)}))]})}),(0,h.jsx)(g.vc,{className:"no-log-bg-hl",children:e=>{var t;return(0,h.jsxs)("tr",{children:[(0,h.jsxs)("td",{children:[e.name," ",e.logUnavailable&&(0,h.jsx)("span",{className:"fas fa-exclamation-triangle msg-warning",title:$})]}),(0,h.jsxs)("td",{className:"text-center",children:[e.velocity||"-"," ",!!e.velocity&&(0,h.jsxs)("span",{children:["(",parseFloat((null===(t=e.velocityGrowth)||void 0===t?void 0:t.toFixed(2))||0),"%)"]})]}),(0,h.jsxs)("td",{className:E(e.sayDoRatio),children:[B(e.sayDoRatio),!!e.sayDoRatio&&(0,h.jsx)(k.A,{value:e.sayDoRatio,maxHours:100})]}),(0,h.jsx)("td",{className:"text-center",children:e.averageCycleTime?`${e.averageCycleTime} days`:"-"}),e.sprintList.map(((t,i)=>t?(0,h.jsxs)("td",{className:`sprint-info-cell ${E(t.sayDoRatio,t===s)}`,onClick:()=>n(t),children:[(0,h.jsx)("span",{className:"fas fa-info-circle float-end"}),!!t.sayDoRatio&&(0,h.jsxs)("span",{children:[t.sayDoRatio,"%"]}),!t.sayDoRatio&&(0,h.jsx)("span",{children:"-"}),!e.logUnavailable&&t.logUnavailable&&(0,h.jsx)("span",{className:"fas fa-exclamation-triangle msg-warning",title:$}),!!t.sayDoRatio&&(0,h.jsx)(k.A,{value:parseInt(t.sayDoRatio),maxHours:100})]},t.id):(0,h.jsx)("td",{className:"text-center",children:"-"},i)))]},e.id)}}),!(null!==e&&void 0!==e&&e.length)&&(0,h.jsx)(g.QC,{span:7,children:"No data available."})]}),(0,h.jsxs)("table",{className:"d-none exportable","export-sheet-name":"Say Do Ratio",children:[(0,h.jsxs)("thead",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{rowSpan:2,children:"Board Name"}),(0,h.jsx)("th",{rowSpan:2,children:"Velocity"}),(0,h.jsx)("th",{rowSpan:2,children:"Say-Do-Ratio"}),(0,h.jsx)("th",{rowSpan:2,children:"Cycle Time"}),I(t.noOfSprints,(e=>{const s=t.noOfSprints===e+1?"Last sprint (n-1)":"Sprint n"+(e-t.noOfSprints);return(0,h.jsx)("th",{colSpan:3,className:"text-center",children:s},e)}))]}),(0,h.jsx)("tr",{children:I(t.noOfSprints,(e=>(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)("th",{children:"Say-Do-Ratio"}),(0,h.jsx)("th",{children:"Velocity"}),(0,h.jsx)("th",{children:"Cycle Time"})]},e)))})]}),(0,h.jsx)("tbody",{children:e.map((e=>{var t;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.name}),(0,h.jsxs)("td",{children:[e.velocity," ",!!e.velocity&&(0,h.jsxs)("span",{children:["(",parseFloat((null===(t=e.velocityGrowth)||void 0===t?void 0:t.toFixed(2))||0),"%)"]})]}),(0,h.jsx)("td",{children:B(e.sayDoRatio)}),(0,h.jsx)("td",{children:B(e.averageCycleTime," days")}),e.sprintList.map(((e,t)=>(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)("td",{children:B(null===e||void 0===e?void 0:e.sayDoRatio)}),(0,h.jsx)("td",{children:B(null===e||void 0===e?void 0:e.velocity)}),(0,h.jsx)("td",{children:B(null===e||void 0===e?void 0:e.cycleTime)})]},t)))]},e.id)}))})]}),s&&(0,h.jsx)("div",{className:"row m-0 mt-3",children:(0,h.jsx)(A,{sprint:s,onClose:()=>n(null)})}),(0,h.jsx)("div",{className:"row m-0 mt-3",children:null===e||void 0===e?void 0:e.map((e=>(0,h.jsx)(C,{board:e},e.id)))})]})};function B(e,t="%",s=""){return e?`${e}${t}`:s}function E(e,t){if(!e)return t?"text-center selected":"text-center";let s="log-good";return s=e>=85?"log-good":e>=70?"log-less":"log-high",`log-indi-cntr ${s}${t?" selected":""}`}function I(e,t){const s=[];for(let i=0;i<e;i++)s.push(t(i));return s}const O=function(){const[e,t]=i.useState(!1),[s,l]=i.useState(),[c,m]=(0,p.A)(!0),[g,f]=i.useState(function(){var e;const{$session:t}=(0,a.WQ)("SessionService"),s={sprintBoards:[],noOfSprints:6,velocitySprints:6,...t.pageSettings[r]||{}};return s.storyPointField=null===(e=t.CurrentUser.storyPointField)||void 0===e?void 0:e.id,s.workingDays=t.CurrentUser.workingDays||[1,2,3,4,5],s}()),[y,j]=i.useState([]),v=i.useRef({});v.current.settings=g,v.current.toggleEdit=m;const b=i.useCallback((async()=>{try{l(0),j([]),t(!0);const e=await function(e){return new n.A((async(t,s,i)=>{var n;const{sprintBoards:o,noOfSprints:l,velocitySprints:c,storyPointField:d,workingDays:h,includeNonWorkingDays:u}=e,{$sprint:p,$jira:m,$config:x}=(0,a.WQ)("SprintService","JiraService","ConfigService");await x.saveSettings(r,{sprintBoards:o,noOfSprints:l,velocitySprints:c,includeNonWorkingDays:u});const g=null===(n=(await m.getCustomFields()).find((({name:e})=>"Sprint"===e)))||void 0===n?void 0:n.id;i({data:[],completed:5});const f=u?void 0:h,y=[];for(const{id:e,name:a}of o){const{closedSprintLists:t,...s}=await p.computeAverageSprintVelocity(e,c,d,g,l+c,f).progress((({completed:e})=>{i({completed:5+95*(y.length+e/100)/o.length})})),n=t.slice(-l);for(;n.length<l;)n.splice(0,0,null);y.push({id:e,name:a,sprintList:n,...s}),i({data:[...y],completed:5+95*y.length/o.length})}t(y)}))}(v.current.settings).progress((({completed:e,data:t})=>{l(e),t&&j(t)}));j(e)}finally{t(!1)}}),[]);v.current.loadReportData=b;const S=i.useCallback((e=>(f(e),v.current.settings=e,v.current.loadReportData().then(v.current.toggleEdit))),[]),w=(0,h.jsx)(d.$n,{type:"secondary",icon:"fa fa-edit",className:"mx-1",onClick:m,title:"Edit report configuration"});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u,{settings:g,show:c,onHide:m,onDone:S}),(0,h.jsx)("div",{className:"page-container",children:(0,h.jsxs)(o.A,{title:"Say Do Ratio Report",isGadget:!1,isLoading:e,loadingProgress:s,onRefresh:b,customActions:w,children:[!(null!==y&&void 0!==y&&y.length)&&(0,h.jsx)(x,{}),(null===y||void 0===y?void 0:y.length)>0&&(0,h.jsx)(V,{reportData:y,settings:g})]})})]})}}}]);